var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,o=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r;import{ay as l,az as i,_ as s}from"./index-DK9WUj9J.js";import{P as c,u as d,d as p,g as v,e as f,f as V}from"./vue-flow-core-alBcHjf2.js";const y=[(e=>(Vue.pushScopeId("data-v-2aba1cee"),e=e(),Vue.popScopeId(),e))((()=>Vue.createElementVNode("span",{class:"truck"},[Vue.createElementVNode("span",{class:"box"},"ðŸ“¦"),Vue.createTextVNode(" ðŸšš ")],-1)))],g=s(Vue.defineComponent({__name:"animationEdge",props:{id:{type:String,required:!0},source:{type:String,required:!0},target:{type:String,required:!0},sourceX:{type:Number,required:!0},sourceY:{type:Number,required:!0},targetX:{type:Number,required:!0},targetY:{type:Number,required:!0},sourcePosition:{type:String,default:c.Right},targetPosition:{type:String,default:c.Left}},setup(e){const s=e,{findEdge:c}=d(),g=p([s.target,s.source]),m=Vue.ref(0),b=Vue.ref(),h=Vue.ref({x:0,y:0}),x=Vue.ref(0),w=Vue.toRef((()=>g.value[0].data)),P=Vue.toRef((()=>g.value[1].data)),S=Vue.toRef((()=>P.value.isFinished)),k=Vue.toRef((()=>w.value.isCancelled)),E=Vue.ref(!1),N=Vue.toRef((()=>w.value.hasError?"#f87171":w.value.isFinished?"#42B983":w.value.isCancelled||w.value.isSkipped?"#fbbf24":w.value.isRunning||E.value?"#2563eb":"#6b7280")),O=Vue.computed((()=>v(s)));function j(){return e=this,t=null,a=function*(){var e;const t=null==(e=b.value)?void 0:e.pathEl;if(!t)return;const a=t.getTotalLength(),r=m.value||0;h.value=t.getPointAtLength(r),E.value=!0,x.value!==a&&(x.value=a),yield l(m,r,a,{transition:i.easeInOutCubic,duration:Math.max(1500,a/2),abort:()=>!E.value}),R()},new Promise(((r,u)=>{var n=e=>{try{l(a.next(e))}catch(t){u(t)}},o=e=>{try{l(a.throw(e))}catch(t){u(t)}},l=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,o);l((a=a.apply(e,t)).next())}));var e,t,a}function R(){Vue.nextTick((()=>{m.value=0,x.value=0,h.value={x:0,y:0},E.value=!1}))}return Vue.watch(k,(e=>{e&&R()})),Vue.watch(E,(e=>{const l=c(s.id);var i;l&&(l.data=(i=((e,t)=>{for(var a in t||(t={}))u.call(t,a)&&o(e,a,t[a]);if(r)for(var a of r(t))n.call(t,a)&&o(e,a,t[a]);return e})({},l.data),t(i,a({isAnimating:e}))))})),Vue.watch(m,(e=>{var t;const a=null==(t=b.value)?void 0:t.pathEl;if(!a||0===e||!E.value)return;const r=a.getTotalLength();x.value===r?h.value=a.getPointAtLength(e):j()})),Vue.watch(S,(e=>{e&&j()})),(t,a)=>(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,[Vue.createVNode(Vue.unref(f),{id:e.id,ref_key:"edgeRef",ref:b,path:O.value[0],style:Vue.normalizeStyle({stroke:N.value})},null,8,["id","path","style"]),E.value?(Vue.openBlock(),Vue.createBlock(Vue.unref(V),{key:0},{default:Vue.withCtx((()=>[Vue.createElementVNode("div",{style:Vue.normalizeStyle({transform:`translate(-50%, -50%) translate(${h.value.x}px,${h.value.y}px)`}),class:"nodrag nopan animated-edge-label"},y,4)])),_:1})):Vue.createCommentVNode("",!0)],64))}}),[["__scopeId","data-v-2aba1cee"]]);export{g as default};
