import{r as e,a as t,m as a,i as l,e as n,aV as i,L as o,am as s,bk as r}from"./index-Doj-dlYt.js";import{g as u}from"./system-DpP-6O0X.js";import{u as c}from"./hooks-CGneLFXS.js";function m(m){const p=e({username:"",status:"",loginTime:""}),d=t([]),h=t(!0),g=t(0),{tagStyle:f}=c(),b=e({total:0,pageSize:10,currentPage:1,background:!0}),v=[{label:"勾选列",type:"selection",fixed:"left",reserveSelection:!0},{label:"序号",prop:"id",minWidth:90},{label:"用户名",prop:"username",minWidth:100},{label:"登录 IP",prop:"ip",minWidth:140},{label:"登录地点",prop:"address",minWidth:140},{label:"操作系统",prop:"system",minWidth:100},{label:"浏览器类型",prop:"browser",minWidth:100},{label:"登录状态",prop:"status",minWidth:100,cellRenderer:({row:e,props:t})=>l(n("el-tag"),{size:t.size,style:f.value(e.status)},{default:()=>[1===e.status?"成功":"失败"]})},{label:"登录行为",prop:"behavior",minWidth:100},{label:"登录时间",prop:"loginTime",minWidth:180,formatter:({loginTime:e})=>i(e).format("YYYY-MM-DD HH:mm:ss")}];function S(){return e=this,t=null,a=function*(){h.value=!0;const{data:e}=yield u(r(p));d.value=e.list,b.total=e.total,b.pageSize=e.pageSize,b.currentPage=e.currentPage,setTimeout((()=>{h.value=!1}),500)},new Promise(((l,n)=>{var i=e=>{try{s(a.next(e))}catch(t){n(t)}},o=e=>{try{s(a.throw(e))}catch(t){n(t)}},s=e=>e.done?l(e.value):Promise.resolve(e.value).then(i,o);s((a=a.apply(e,t)).next())}));var e,t,a}return a((()=>{S()})),{form:p,loading:h,columns:v,dataList:d,pagination:b,selectedNum:g,onSearch:S,clearAll:function(){o("已删除所有日志数据",{type:"success"}),S()},resetForm:e=>{e&&(e.resetFields(),S())},onbatchDel:function(){const e=m.value.getTableRef().getSelectionRows();o(`已删除序号为 ${s(e,"id")} 的数据`,{type:"success"}),m.value.getTableRef().clearSelection(),S()},handleSizeChange:function(e){},onSelectionCancel:function(){g.value=0,m.value.getTableRef().clearSelection()},handleCurrentChange:function(e){},handleSelectionChange:function(e){g.value=e.length,m.value.setAdaptive()}}}export{m as useRole};
