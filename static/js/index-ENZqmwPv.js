var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,u=(t,a,o)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[a]=o;import{S as n}from"./sortable.esm-DhhifNSC.js";import{_ as s}from"./form.vue_vue_type_script_setup_true_lang--9W4f1y6.js";import{r as c,v as i,m as d,h as p,_ as V}from"./index-DK9WUj9J.js";import{A as m}from"./plus-CeXuBKcU.js";import"./mock-BfijETem.js";const v={width:24,height:24,body:'<path fill="currentColor" d="M12 3c5.392 0 9.878 3.88 10.819 9c-.94 5.12-5.427 9-10.819 9c-5.392 0-9.878-3.88-10.818-9C2.122 6.88 6.608 3 12 3Zm0 16a9.005 9.005 0 0 0 8.778-7a9.005 9.005 0 0 0-17.555 0A9.005 9.005 0 0 0 12 19Zm0-2.5a4.5 4.5 0 1 1 0-9a4.5 4.5 0 0 1 0 9Zm0-2a2.5 2.5 0 1 0 0-5a2.5 2.5 0 0 0 0 5Z"/>'},f={width:24,height:24,body:'<path fill="currentColor" d="M17 6h5v2h-2v13a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V8H2V6h5V3a1 1 0 0 1 1-1h8a1 1 0 0 1 1 1v3Zm1 2H6v12h12V8ZM9 4v2h6V4H9Z"/>'},h=e=>(Vue.pushScopeId("data-v-04dda22c"),e=e(),Vue.popScopeId(),e),g={class:"card-header"},x=h((()=>Vue.createElementVNode("p",{class:"mb-4"},[Vue.createTextVNode(" 综合示例"),Vue.createElementVNode("span",{class:"text-[14px]"},[Vue.createTextVNode(" （ "),Vue.createElementVNode("span",{class:"text-[red]"},"自动上传"),Vue.createTextVNode(" 、拖拽上传、拖拽排序、设置请求头、上传进度、大图预览、多选文件、最大文件数量、文件类型限制、文件大小限制、删除文件） ")])],-1))),N={key:0,class:"mt-[35%] m-auto"},y=h((()=>Vue.createElementVNode("p",{class:"font-medium"},"文件上传中",-1))),b=["onMouseenter"],k=["src"],w=["onClick"],_=["onClick"],C={title:"移除",class:"hover:text-[var(--el-color-danger)]"},E={key:0,effect:"dark",round:"",size:"large",type:"info",class:"img-name"},j={class:"text-[#fff] dark:text-black"},B=h((()=>Vue.createElementVNode("p",{class:"el-upload__tip"}," 可拖拽上传最多3张单个不超过2MB且格式为jpeg/png/gif的图片 ",-1))),T=h((()=>Vue.createElementVNode("p",{class:"mb-4 mt-4"},[Vue.createTextVNode(" 结合表单校验进行"),Vue.createElementVNode("span",{class:"text-[red]"},"手动上传"),Vue.createElementVNode("span",{class:"text-[14px]"}," （可先打开浏览器控制台找到Network，然后填写表单内容后点击点提交观察请求变化） ")],-1))),I={class:"flex justify-between"},O=h((()=>Vue.createElementVNode("p",{class:"text-center"},"上传接口相关截图",-1))),z={class:"flex flex-wrap"},M={class:"text-[red] text-[12px] flex flex-auto items-center justify-end"},S=h((()=>Vue.createElementVNode("span",{class:"font-bold text-[18x]"}," 请不要上传重要信息 ",-1))),D=Vue.defineComponent((Z=((e,t)=>{for(var a in t||(t={}))l.call(t,a)&&u(e,a,t[a]);if(o)for(var a of o(t))r.call(t,a)&&u(e,a,t[a]);return e})({},{name:"PureUpload"}),t(Z,a({__name:"index",setup(e){const t=Vue.ref([]),a=VueRouter.useRouter(),o=Vue.ref(0),l=Vue.ref(!1),r=Vue.computed((()=>c(t.value,"url"))),u=Vue.computed((()=>i(t.value,"name","size"))),V=Array.from({length:3}).map(((e,t)=>{return a=t+1,new URL(Object.assign({"./imgs/1.jpg":"/static/jpg/1-CNu9tHLV.jpg","./imgs/2.jpg":"/static/jpg/2-Dn7NyzRJ.jpg","./imgs/3.jpg":"/static/jpg/3-BNVYzMvF.jpg"})[`./imgs/${a}.jpg`],import.meta.url).href;var a})),h=e=>["image/jpeg","image/png","image/gif"].includes(e.type)?e.size/1024/1024>2?(d("单个图片大小不能超过2MB"),!1):void 0:(d("只能上传图片"),!1),D=()=>{d("最多上传3张图片，请先删除在上传")},Z=()=>document.querySelectorAll("#pure-upload-item"),$=()=>{[{name:"巴旦木.jpeg",type:"img"},{name:"恭喜发财.png",type:"img"},{name:"可爱动物.gif",type:"gif"},{name:"pure-upload.csv",type:"other"},{name:"pure-upload.txt",type:"other"}].forEach((e=>{axios.get(`https://xiaoxian521.github.io/hyperlink/${e.type}/${e.name}`,{responseType:"blob"}).then((({data:t})=>{p(t,e.name)}))}))};return(e,c)=>{const i=Vue.resolveComponent("el-link"),d=Vue.resolveComponent("el-button"),p=Vue.resolveComponent("IconifyIconOffline"),P=Vue.resolveComponent("el-progress"),U=Vue.resolveComponent("el-upload"),A=Vue.resolveComponent("el-image-viewer"),H=Vue.resolveComponent("el-divider"),L=Vue.resolveComponent("el-image"),J=Vue.resolveComponent("el-card"),R=Vue.resolveDirective("tippy");return Vue.openBlock(),Vue.createBlock(J,{shadow:"never"},{header:Vue.withCtx((()=>[Vue.createElementVNode("div",g,[Vue.withDirectives((Vue.openBlock(),Vue.createBlock(i,{href:"https://element-plus.org/zh-CN/component/upload.html",target:"_blank",style:{"font-size":"16px","font-weight":"800"}},{default:Vue.withCtx((()=>[Vue.createTextVNode(" 文件上传 ")])),_:1})),[[R,{content:"点击查看详细文档"}]])]),Vue.createVNode(i,{class:"mt-2",href:"https://github.com/pure-admin/vue-pure-admin/blob/main/src/views/components/upload",target:"_blank"},{default:Vue.withCtx((()=>[Vue.createTextVNode(" 代码位置 src/views/components/upload ")])),_:1})])),default:Vue.withCtx((()=>[Vue.createVNode(d,{class:"mb-4",text:"",bg:"",onClick:$},{default:Vue.withCtx((()=>[Vue.createTextVNode(" 点击下载安全文件进行上传测试 ")])),_:1}),x,Vue.withDirectives(Vue.createElementVNode("p",{class:"mb-4"},Vue.toDisplayString(u.value),513),[[Vue.vShow,t.value.length>0]]),Vue.createVNode(U,{"file-list":t.value,"onUpdate:fileList":c[0]||(c[0]=e=>t.value=e),drag:"",multiple:"",class:"pure-upload","list-type":"picture-card",accept:"image/jpeg,image/png,image/gif",action:"https://run.mocky.io/v3/3aa761d7-b0b3-4a03-96b3-6168d4f7467b",limit:3,headers:{Authorization:"eyJhbGciOiJIUzUxMiJ9.admin"},"on-exceed":D,"before-upload":h},{file:Vue.withCtx((({file:e})=>["ready"==e.status||"uploading"==e.status?(Vue.openBlock(),Vue.createElementBlock("div",N,[y,Vue.createVNode(P,{class:"mt-2","stroke-width":2,"text-inside":!0,"show-text":!1,percentage:e.percentage},null,8,["percentage"])])):(Vue.openBlock(),Vue.createElementBlock("div",{key:1,onMouseenter:Vue.withModifiers((a=>(e=>{var a,o,l;const r="el-upload-list",u=t.value.findIndex((t=>t.uid===e));null==(l=null==(o=null==(a=Z())?void 0:a[u])?void 0:o.classList)||l.add(`${r}__item-actions`);const s=document.querySelector(`.${r}`);n.create(s,{handle:`.${r}__item`,onEnd:({newIndex:e,oldIndex:a})=>{const o=t.value[a];t.value.splice(a,1),t.value.splice(e,0,o),Z().forEach((e=>{e.classList.remove(`${r}__item-actions`)}))}})})(e.uid)),["stop"])},[Vue.createElementVNode("img",{class:"el-upload-list__item-thumbnail select-none",src:e.url},null,8,k),Vue.createElementVNode("span",{id:"pure-upload-item",class:Vue.normalizeClass(["el-upload-list__item-actions",t.value.length>1&&"!cursor-move"])},[Vue.createElementVNode("span",{title:"查看",class:"hover:text-primary",onClick:a=>(e=>{o.value=t.value.findIndex((t=>t.uid===e.uid)),l.value=!0})(e)},[Vue.createVNode(p,{icon:Vue.unref(v),class:"hover:scale-125 duration-100"},null,8,["icon"])],8,w),Vue.createElementVNode("span",{class:"el-upload-list__item-delete",onClick:a=>(e=>{t.value.splice(t.value.indexOf(e),1)})(e)},[Vue.createElementVNode("span",C,[Vue.createVNode(p,{icon:Vue.unref(f),class:"hover:scale-125 duration-100"},null,8,["icon"])])],8,_)],2)],40,b))])),default:Vue.withCtx((()=>[Vue.createVNode(p,{icon:Vue.unref(m),class:"m-auto mt-4",width:"30"},null,8,["icon"])])),_:1},8,["file-list"]),l.value?(Vue.openBlock(),Vue.createBlock(A,{key:0,initialIndex:o.value,"url-list":r.value,"zoom-rate":1.2,"max-scale":7,"min-scale":.2,onClose:c[1]||(c[1]=e=>l.value=!1),onSwitch:c[2]||(c[2]=e=>o.value=e)},null,8,["initialIndex","url-list"])):Vue.createCommentVNode("",!0),(Vue.openBlock(),Vue.createBlock(Vue.Teleport,{to:"body"},[t.value[o.value]&&l.value?(Vue.openBlock(),Vue.createElementBlock("div",E,[Vue.createElementVNode("p",j,Vue.toDisplayString(t.value[o.value].name),1)])):Vue.createCommentVNode("",!0)])),B,Vue.createVNode(H),T,Vue.createElementVNode("div",I,[Vue.createVNode(s),Vue.createElementVNode("div",null,[O,Vue.createVNode(L,{class:"w-[200px] rounded-md",src:Vue.unref(V)[0],"preview-src-list":Vue.unref(V),fit:"cover"},null,8,["src","preview-src-list"])])]),Vue.createVNode(H),Vue.createElementVNode("div",z,[Vue.createElementVNode("p",null,[Vue.createTextVNode(" 裁剪、上传头像请参考 "),Vue.createElementVNode("span",{class:"font-bold text-[18x] cursor-pointer hover:text-[red]",onClick:c[3]||(c[3]=e=>Vue.unref(a).push({name:"SystemUser"}))}," 系统管理-用户管理 "),Vue.createTextVNode(" 表格操作栏中的上传头像功能 ")]),Vue.createElementVNode("p",M,[Vue.createTextVNode(" 免责声明：上传接口使用免费开源的 "),Vue.createVNode(i,{href:"https://designer.mocky.io/",target:"_blank",style:{"font-size":"16px","font-weight":"800"}},{default:Vue.withCtx((()=>[Vue.createTextVNode("  Mocky  ")])),_:1}),S,Vue.createTextVNode("，如果造成任何损失，我们概不负责 ")])])])),_:1})}}}))));var Z;const $=V(D,[["__scopeId","data-v-04dda22c"]]);export{$ as default};
