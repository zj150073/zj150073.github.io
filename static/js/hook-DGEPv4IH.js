import{m as e,r as t}from"./index-DK9WUj9J.js";import{a}from"./system-CZHEA98f.js";import{u as l}from"./hooks-siYFZ-vN.js";function n(n){const o=Vue.reactive({module:"",status:"",operatingTime:""}),r=Vue.ref([]),i=Vue.ref(!0),s=Vue.ref(0),{tagStyle:u}=l(),c=Vue.reactive({total:0,pageSize:10,currentPage:1,background:!0}),p=[{label:"勾选列",type:"selection",fixed:"left",reserveSelection:!0},{label:"序号",prop:"id",minWidth:90},{label:"操作人员",prop:"username",minWidth:100},{label:"所属模块",prop:"module",minWidth:140},{label:"操作概要",prop:"summary",minWidth:140},{label:"操作 IP",prop:"ip",minWidth:100},{label:"操作地点",prop:"address",minWidth:140},{label:"操作系统",prop:"system",minWidth:100},{label:"浏览器类型",prop:"browser",minWidth:100},{label:"操作状态",prop:"status",minWidth:100,cellRenderer:({row:e,props:t})=>Vue.createVNode(Vue.resolveComponent("el-tag"),{size:t.size,style:u.value(e.status)},{default:()=>[1===e.status?"成功":"失败"]})},{label:"操作时间",prop:"operatingTime",minWidth:180,formatter:({operatingTime:e})=>dayjs(e).format("YYYY-MM-DD HH:mm:ss")}];function m(){return e=this,t=null,l=function*(){i.value=!0;const{data:e}=yield a(Vue.toRaw(o));r.value=e.list,c.total=e.total,c.pageSize=e.pageSize,c.currentPage=e.currentPage,setTimeout((()=>{i.value=!1}),500)},new Promise(((a,n)=>{var o=e=>{try{i(l.next(e))}catch(t){n(t)}},r=e=>{try{i(l.throw(e))}catch(t){n(t)}},i=e=>e.done?a(e.value):Promise.resolve(e.value).then(o,r);i((l=l.apply(e,t)).next())}));var e,t,l}return Vue.onMounted((()=>{m()})),{form:o,loading:i,columns:p,dataList:r,pagination:c,selectedNum:s,onSearch:m,clearAll:function(){e("已删除所有日志数据",{type:"success"}),m()},resetForm:e=>{e&&(e.resetFields(),m())},onbatchDel:function(){const a=n.value.getTableRef().getSelectionRows();e(`已删除序号为 ${t(a,"id")} 的数据`,{type:"success"}),n.value.getTableRef().clearSelection(),m()},handleSizeChange:function(e){},onSelectionCancel:function(){s.value=0,n.value.getTableRef().clearSelection()},handleCurrentChange:function(e){},handleSelectionChange:function(e){s.value=e.length,n.value.setAdaptive()}}}export{n as useRole};
