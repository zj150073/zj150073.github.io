var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,s=(l,a,o)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[a]=o;import{b as n,_ as i}from"./_plugin-vue_export-helper-DGnNDdBR.js";/* empty css                   */import{u,f as p,g as d,a as c,P as m,b as v}from"./plus-form-DEkdpNN5.js";import{d as f,a as b,p as h,aW as y,n as w,f as g,b as x,ap as T,w as _,S as k,g as P,aq as j,bj as V,i as $,u as O,dh as C,h as E,t as F,a5 as I,l as z,dk as B,dj as U,e as L,k as D}from"./index-CgRj-jQH.js";const R={class:"plus-drawer-form__footer"};var S,W,q=f((S=((e,l)=>{for(var a in l||(l={}))r.call(l,a)&&s(e,a,l[a]);if(o)for(var a of o(l))t.call(l,a)&&s(e,a,l[a]);return e})({},{name:"PlusDrawerForm"}),W={__name:"index",props:{modelValue:{default:()=>({})},visible:{type:Boolean,default:!1},drawer:{default:()=>({})},size:{default:"540px"},form:{default:()=>({})},hasFooter:{type:Boolean,default:!0},cancelText:{default:""},confirmText:{default:""},confirmLoading:{type:Boolean,default:!1},hasErrorTip:{type:Boolean,default:!0}},emits:["update:modelValue","update:visible","confirm","change","cancel","confirmError"],setup(e,{expose:l,emit:a}){const o=e,r=a,{t:t}=u(),s=b(null),i=h((()=>{var e;return null==(e=s.value)?void 0:e.formInstance})),f=b(),L=b({}),D=b(!1),S=y(),W=p(S,v()),q=p(S,d()),A=p(S,c());w((()=>o.visible),(e=>{D.value=e}),{immediate:!0}),w((()=>o.modelValue),(e=>{L.value=e}),{immediate:!0});const Y=(e,l)=>{r("update:modelValue",e),r("change",e,l)},G=()=>{return e=this,l=null,a=function*(){var e,l,a;try{(yield null==(e=i.value)?void 0:e.validate())&&r("confirm",L.value)}catch(s){if(o.hasErrorTip){U.closeAll();const e=n(s)&&Object.values(s),o=e?null==(a=null==(l=e[0])?void 0:l[0])?void 0:a.message:void 0;U.warning(o||t("plus.form.errorTip"))}r("confirmError",s)}},new Promise(((o,r)=>{var t=e=>{try{n(a.next(e))}catch(l){r(l)}},s=e=>{try{n(a.throw(e))}catch(l){r(l)}},n=e=>e.done?o(e.value):Promise.resolve(e.value).then(t,s);n((a=a.apply(e,l)).next())}));var e,l,a},H=()=>{D.value=!1,r("update:visible",D.value),r("cancel")};return l({drawerInstance:f,formInstance:i}),(e,l)=>(g(),x(O(B),I({ref_key:"drawerInstance",ref:f,modelValue:D.value,"onUpdate:modelValue":l[1]||(l[1]=e=>D.value=e),class:"plus-drawer-form",size:e.size||"540px",title:O(t)("plus.drawerForm.title"),"close-on-click-modal":!1,"close-on-press-escape":!1},e.$attrs,{onClose:H}),T({default:_((()=>[$(O(m),I({ref_key:"formInstance",ref:s,modelValue:L.value,"onUpdate:modelValue":l[0]||(l[0]=e=>L.value=e),"has-footer":!1},e.form,{onChange:Y}),T({_:2},[e.$slots["form-footer"]?{name:"footer",fn:_((()=>[k(e.$slots,"form-footer")])),key:"0"}:void 0,e.$slots["form-group-header"]?{name:"group-header",fn:_((()=>[k(e.$slots,"form-group-header")])),key:"1"}:void 0,z(O(W),((l,a)=>({name:a,fn:_((l=>[k(e.$slots,a,j(V(l)))]))}))),z(O(q),((l,a)=>({name:a,fn:_((l=>[k(e.$slots,a,j(V(l)))]))}))),z(O(A),((l,a)=>({name:a,fn:_((l=>[k(e.$slots,a,j(V(l)))]))}))),e.$slots["tooltip-icon"]?{name:"tooltip-icon",fn:_((()=>[k(e.$slots,"tooltip-icon")])),key:"2"}:void 0]),1040,["modelValue"])])),_:2},[e.$slots["drawer-header"]?{name:"header",fn:_((()=>[k(e.$slots,"drawer-header")])),key:"0"}:void 0,e.hasFooter?{name:"footer",fn:_((()=>[P("div",R,[k(e.$slots,"drawer-footer",j(V({handleConfirm:G,handleCancel:H})),(()=>[$(O(C),{onClick:H},{default:_((()=>[E(F(e.cancelText||O(t)("plus.drawerForm.cancelText")),1)])),_:1}),$(O(C),{type:"primary",loading:e.confirmLoading,onClick:G},{default:_((()=>[E(F(e.confirmText||O(t)("plus.drawerForm.confirmText")),1)])),_:1},8,["loading"])]))])])),key:"1"}:void 0]),1040,["modelValue","size","title"]))}},l(S,a(W))));const A=i(q,[["__file","index.vue"]]),Y=f({__name:"drawer",setup(e){const l=[{label:"名称",width:120,prop:"name",valueType:"copy",tooltip:"名称最多显示6个字符"},{label:"状态",width:120,prop:"status",valueType:"select",options:[{label:"未解决",value:"0",color:"red"},{label:"已解决",value:"1",color:"blue"},{label:"解决中",value:"2",color:"yellow"},{label:"失败",value:"3",color:"red"}]},{label:"是否显示",width:100,prop:"switch",valueType:"switch"},{label:"时间",prop:"time",valueType:"date-picker"},{label:"数量",prop:"number",valueType:"input-number",fieldProps:{precision:2,step:2}},{label:"城市",prop:"city",valueType:"cascader",options:[{value:"0",label:"陕西",children:[{value:"0-0",label:"西安",children:[{value:"0-0-0",label:"新城区"},{value:"0-0-1",label:"高新区"},{value:"0-0-2",label:"灞桥区"}]}]},{value:"1",label:"山西",children:[{value:"1-0",label:"太原",children:[{value:"1-0-0",label:"小店区"},{value:"1-0-1",label:"古交市"},{value:"1-0-2",label:"万柏林区"}]}]}]},{label:"地区",prop:"place",tooltip:"请精确到门牌号",fieldProps:{placeholder:"请精确到门牌号"}},{label:"要求",prop:"demand",valueType:"checkbox",options:[{label:"四六级",value:"0"},{label:"计算机二级证书",value:"1"},{label:"普通话证书",value:"2"}]},{label:"梦想",prop:"gift",valueType:"radio",options:[{label:"诗",value:"0"},{label:"远方",value:"1"},{label:"美食",value:"2"}]},{label:"到期时间",prop:"endTime",valueType:"date-picker",fieldProps:{type:"datetimerange",startPlaceholder:"请选择开始时间",endPlaceholder:"请选择结束时间"}},{label:"说明",prop:"desc",valueType:"textarea",fieldProps:{maxlength:10,showWordLimit:!0,autosize:{minRows:2,maxRows:4}}}],a=b(!1),o=b({}),r=()=>{a.value=!0};return(e,t)=>{const s=L("el-button");return g(),D("div",null,[$(s,{onClick:r},{default:_((()=>[E("打开抽屉表单")])),_:1}),$(O(A),{visible:a.value,"onUpdate:visible":t[0]||(t[0]=e=>a.value=e),modelValue:o.value,"onUpdate:modelValue":t[1]||(t[1]=e=>o.value=e),form:{columns:l}},null,8,["visible","modelValue","form"])])}}});export{Y as _};
