var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=Math.pow,l=(t,n,o)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,u=(e,t)=>{for(var n in t||(t={}))r.call(t,n)&&l(e,n,t[n]);if(o)for(var n of o(t))i.call(t,n)&&l(e,n,t[n]);return e},s=(e,o)=>t(e,n(o)),c=(e,t)=>{var n={};for(var a in e)r.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&o)for(var a of o(e))t.indexOf(a)<0&&i.call(e,a)&&(n[a]=e[a]);return n};function d(e){return!!Vue.getCurrentScope()&&(Vue.onScopeDispose(e),!0)}function f(e){return"function"==typeof e?e():Vue.unref(e)}const h="undefined"!=typeof window&&"undefined"!=typeof document,v=Object.prototype.toString,p=e=>"[object Object]"===v.call(e),g=()=>{};const m=e=>e();function y(e,t=!1,n="Timeout"){return new Promise(((o,r)=>{t?setTimeout((()=>r(n)),e):setTimeout(o,e)}))}function w(e,t,n={}){const o=n,{eventFilter:r=m}=o,i=c(o,["eventFilter"]);return Vue.watch(e,(a=r,l=t,function(...e){return new Promise(((t,n)=>{Promise.resolve(a((()=>l.apply(this,e)),{fn:l,thisArg:this,args:e})).then(t).catch(n)}))}),i);var a,l}function V(e,t,n={}){const o=n,{eventFilter:r}=o,i=c(o,["eventFilter"]),{eventFilter:a,pause:l,resume:d,isActive:f}=function(e=m){const t=Vue.ref(!0);return{isActive:Vue.readonly(t),pause:function(){t.value=!1},resume:function(){t.value=!0},eventFilter:(...n)=>{t.value&&e(...n)}}}(r);return{stop:w(e,t,s(u({},i),{eventFilter:a})),pause:l,resume:d,isActive:f}}function x(e,t=!1){function n(n,{flush:o="sync",deep:r=!1,timeout:i,throwOnTimeout:a}={}){let l=null;const u=[new Promise((i=>{l=Vue.watch(e,(e=>{n(e)!==t&&(null==l||l(),i(e))}),{flush:o,deep:r,immediate:!0})}))];return null!=i&&u.push(y(i,a).then((()=>f(e))).finally((()=>null==l?void 0:l()))),Promise.race(u)}function o(o,r){if(!Vue.isRef(o))return n((e=>e===o),r);const{flush:i="sync",deep:a=!1,timeout:l,throwOnTimeout:u}=null!=r?r:{};let s=null;const c=[new Promise((n=>{s=Vue.watch([e,o],(([e,o])=>{t!==(e===o)&&(null==s||s(),n(e))}),{flush:i,deep:a,immediate:!0})}))];return null!=l&&c.push(y(l,u).then((()=>f(e))).finally((()=>(null==s||s(),f(e))))),Promise.race(c)}function r(e){return i(1,e)}function i(e=1,t){let o=-1;return n((()=>(o+=1,o>=e)),t)}if(Array.isArray(f(e))){return{toMatch:n,toContains:function(e,t){return n((t=>{const n=Array.from(t);return n.includes(e)||n.includes(f(e))}),t)},changed:r,changedTimes:i,get not(){return x(e,!t)}}}return{toMatch:n,toBe:o,toBeTruthy:function(e){return n((e=>Boolean(e)),e)},toBeNull:function(e){return o(null,e)},toBeNaN:function(e){return n(Number.isNaN,e)},toBeUndefined:function(e){return o(void 0,e)},changed:r,changedTimes:i,get not(){return x(e,!t)}}}function b(e){return x(e)}function _(e){var t;const n=f(e);return null!=(t=null==n?void 0:n.$el)?t:n}const E=h?window:void 0;function S(...e){let t,n,o,r;if("string"==typeof e[0]||Array.isArray(e[0])?([n,o,r]=e,t=E):[t,n,o,r]=e,!t)return g;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const i=[],a=()=>{i.forEach((e=>e())),i.length=0},l=Vue.watch((()=>[_(t),f(r)]),(([e,t])=>{if(a(),!e)return;const r=p(t)?u({},t):t;i.push(...n.flatMap((t=>o.map((n=>((e,t,n,o)=>(e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)))(e,t,n,r))))))}),{immediate:!0,flush:"post"}),s=()=>{l(),a()};return d(s),s}function N(...e){let t,n,o={};3===e.length?(t=e[0],n=e[1],o=e[2]):2===e.length?"object"==typeof e[1]?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:r=E,eventName:i="keydown",passive:a=!1,dedupe:l=!1}=o,u="function"==typeof(s=t)?s:"string"==typeof s?e=>e.key===s:Array.isArray(s)?e=>s.includes(e.key):()=>!0;var s;return S(r,i,(e=>{e.repeat&&f(l)||u(e)&&n(e)}),a)}function k(e,t,n,o={}){var r,i,a;const{clone:l=!1,passive:u=!1,eventName:s,deep:c=!1,defaultValue:d,shouldEmit:f}=o,h=Vue.getCurrentInstance(),v=n||(null==h?void 0:h.emit)||(null==(r=null==h?void 0:h.$emit)?void 0:r.bind(h))||(null==(a=null==(i=null==h?void 0:h.proxy)?void 0:i.$emit)?void 0:a.bind(null==h?void 0:h.proxy));let p=s;t||(t="modelValue"),p=p||`update:${t.toString()}`;const g=e=>{return l?"function"==typeof l?l(e):(t=e,JSON.parse(JSON.stringify(t))):e;var t},m=()=>void 0!==e[t]?g(e[t]):d,y=e=>{f?f(e)&&v(p,e):v(p,e)};if(u){const n=m(),o=Vue.ref(n);let r=!1;return Vue.watch((()=>e[t]),(e=>{r||(r=!0,o.value=g(e),Vue.nextTick((()=>r=!1)))})),Vue.watch(o,(n=>{r||n===e[t]&&!c||y(n)}),{deep:c}),o}return Vue.computed({get:()=>m(),set(e){y(e)}})}var C={value:()=>{}};function M(){for(var e,t=0,n=arguments.length,o={};t<n;++t){if(!(e=arguments[t]+"")||e in o||/[\s.]/.test(e))throw new Error("illegal type: "+e);o[e]=[]}return new I(o)}function I(e){this._=e}function P(e,t){for(var n,o=0,r=e.length;o<r;++o)if((n=e[o]).name===t)return n.value}function T(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=C,e=e.slice(0,o).concat(e.slice(o+1));break}return null!=n&&e.push({name:t,value:n}),e}I.prototype=M.prototype={constructor:I,on:function(e,t){var n,o,r=this._,i=(o=r,(e+"").trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");if(n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),e&&!o.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:t}}))),a=-1,l=i.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++a<l;)if(n=(e=i[a]).type)r[n]=T(r[n],e.name,t);else if(null==t)for(n in r)r[n]=T(r[n],e.name,null);return this}for(;++a<l;)if((n=(e=i[a]).type)&&(n=P(r[n],e.name)))return n},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new I(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,o,r=new Array(n),i=0;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=0,n=(o=this._[e]).length;i<n;++i)o[i].value.apply(t,r)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)}};var B="http://www.w3.org/1999/xhtml";const O={svg:"http://www.w3.org/2000/svg",xhtml:B,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function D(e){var t=e+="",n=t.indexOf(":");return n>=0&&"xmlns"!==(t=e.slice(0,n))&&(e=e.slice(n+1)),O.hasOwnProperty(t)?{space:O[t],local:e}:e}function A(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===B&&t.documentElement.namespaceURI===B?t.createElement(e):t.createElementNS(n,e)}}function $(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function z(e){var t=D(e);return(t.local?$:A)(t)}function R(){}function L(e){return null==e?R:function(){return this.querySelector(e)}}function H(){return[]}function Y(e){return null==e?H:function(){return this.querySelectorAll(e)}}function G(e){return function(){return null==(t=e.apply(this,arguments))?[]:Array.isArray(t)?t:Array.from(t);var t}}function F(e){return function(){return this.matches(e)}}function X(e){return function(t){return t.matches(e)}}var U=Array.prototype.find;function j(){return this.firstElementChild}var Z=Array.prototype.filter;function K(){return Array.from(this.children)}function W(e){return new Array(e.length)}function q(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}function J(e,t,n,o,r,i){for(var a,l=0,u=t.length,s=i.length;l<s;++l)(a=t[l])?(a.__data__=i[l],o[l]=a):n[l]=new q(e,i[l]);for(;l<u;++l)(a=t[l])&&(r[l]=a)}function Q(e,t,n,o,r,i,a){var l,u,s,c=new Map,d=t.length,f=i.length,h=new Array(d);for(l=0;l<d;++l)(u=t[l])&&(h[l]=s=a.call(u,u.__data__,l,t)+"",c.has(s)?r[l]=u:c.set(s,u));for(l=0;l<f;++l)s=a.call(e,i[l],l,i)+"",(u=c.get(s))?(o[l]=u,u.__data__=i[l],c.delete(s)):n[l]=new q(e,i[l]);for(l=0;l<d;++l)(u=t[l])&&c.get(h[l])===u&&(r[l]=u)}function ee(e){return e.__data__}function te(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function ne(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function oe(e){return function(){this.removeAttribute(e)}}function re(e){return function(){this.removeAttributeNS(e.space,e.local)}}function ie(e,t){return function(){this.setAttribute(e,t)}}function ae(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function le(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}}function ue(e,t){return function(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function se(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function ce(e){return function(){this.style.removeProperty(e)}}function de(e,t,n){return function(){this.style.setProperty(e,t,n)}}function fe(e,t,n){return function(){var o=t.apply(this,arguments);null==o?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function he(e,t){return e.style.getPropertyValue(t)||se(e).getComputedStyle(e,null).getPropertyValue(t)}function ve(e){return function(){delete this[e]}}function pe(e,t){return function(){this[e]=t}}function ge(e,t){return function(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}}function me(e){return e.trim().split(/^|\s+/)}function ye(e){return e.classList||new we(e)}function we(e){this._node=e,this._names=me(e.getAttribute("class")||"")}function Ve(e,t){for(var n=ye(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function xe(e,t){for(var n=ye(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function be(e){return function(){Ve(this,e)}}function _e(e){return function(){xe(this,e)}}function Ee(e,t){return function(){(t.apply(this,arguments)?Ve:xe)(this,e)}}function Se(){this.textContent=""}function Ne(e){return function(){this.textContent=e}}function ke(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}function Ce(){this.innerHTML=""}function Me(e){return function(){this.innerHTML=e}}function Ie(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}function Pe(){this.nextSibling&&this.parentNode.appendChild(this)}function Te(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Be(){return null}function Oe(){var e=this.parentNode;e&&e.removeChild(this)}function De(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ae(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function $e(e){return function(){var t=this.__on;if(t){for(var n,o=0,r=-1,i=t.length;o<i;++o)n=t[o],e.type&&n.type!==e.type||n.name!==e.name?t[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?t.length=r:delete this.__on}}}function ze(e,t,n){return function(){var o,r=this.__on,i=function(e){return function(t){e.call(this,t,this.__data__)}}(t);if(r)for(var a=0,l=r.length;a<l;++a)if((o=r[a]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=i,o.options=n),void(o.value=t);this.addEventListener(e.type,i,n),o={type:e.type,name:e.name,value:t,listener:i,options:n},r?r.push(o):this.__on=[o]}}function Re(e,t,n){var o=se(e),r=o.CustomEvent;"function"==typeof r?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Le(e,t){return function(){return Re(this,e,t)}}function He(e,t){return function(){return Re(this,e,t.apply(this,arguments))}}q.prototype={constructor:q,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}},we.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};var Ye=[null];function Ge(e,t){this._groups=e,this._parents=t}function Fe(){return new Ge([[document.documentElement]],Ye)}function Xe(e){return"string"==typeof e?new Ge([[document.querySelector(e)]],[document.documentElement]):new Ge([[e]],Ye)}function Ue(e,t){if(e=function(e){let t;for(;t=e.sourceEvent;)e=t;return e}(e),void 0===t&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,[(o=o.matrixTransform(t.getScreenCTM().inverse())).x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}Ge.prototype=Fe.prototype={constructor:Ge,select:function(e){"function"!=typeof e&&(e=L(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a,l=t[r],u=l.length,s=o[r]=new Array(u),c=0;c<u;++c)(i=l[c])&&(a=e.call(i,i.__data__,c,l))&&("__data__"in i&&(a.__data__=i.__data__),s[c]=a);return new Ge(o,this._parents)},selectAll:function(e){e="function"==typeof e?G(e):Y(e);for(var t=this._groups,n=t.length,o=[],r=[],i=0;i<n;++i)for(var a,l=t[i],u=l.length,s=0;s<u;++s)(a=l[s])&&(o.push(e.call(a,a.__data__,s,l)),r.push(a));return new Ge(o,r)},selectChild:function(e){return this.select(null==e?j:function(e){return function(){return U.call(this.children,e)}}("function"==typeof e?e:X(e)))},selectChildren:function(e){return this.selectAll(null==e?K:function(e){return function(){return Z.call(this.children,e)}}("function"==typeof e?e:X(e)))},filter:function(e){"function"!=typeof e&&(e=F(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a=t[r],l=a.length,u=o[r]=[],s=0;s<l;++s)(i=a[s])&&e.call(i,i.__data__,s,a)&&u.push(i);return new Ge(o,this._parents)},data:function(e,t){if(!arguments.length)return Array.from(this,ee);var n,o=t?Q:J,r=this._parents,i=this._groups;"function"!=typeof e&&(n=e,e=function(){return n});for(var a=i.length,l=new Array(a),u=new Array(a),s=new Array(a),c=0;c<a;++c){var d=r[c],f=i[c],h=f.length,v=te(e.call(d,d&&d.__data__,c,r)),p=v.length,g=u[c]=new Array(p),m=l[c]=new Array(p);o(d,f,g,m,s[c]=new Array(h),v,t);for(var y,w,V=0,x=0;V<p;++V)if(y=g[V]){for(V>=x&&(x=V+1);!(w=m[x])&&++x<p;);y._next=w||null}}return(l=new Ge(l,r))._enter=u,l._exit=s,l},enter:function(){return new Ge(this._enter||this._groups.map(W),this._parents)},exit:function(){return new Ge(this._exit||this._groups.map(W),this._parents)},join:function(e,t,n){var o=this.enter(),r=this,i=this.exit();return"function"==typeof e?(o=e(o))&&(o=o.selection()):o=o.append(e+""),null!=t&&(r=t(r))&&(r=r.selection()),null==n?i.remove():n(i),o&&r?o.merge(r).order():r},merge:function(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,i=o.length,a=Math.min(r,i),l=new Array(r),u=0;u<a;++u)for(var s,c=n[u],d=o[u],f=c.length,h=l[u]=new Array(f),v=0;v<f;++v)(s=c[v]||d[v])&&(h[v]=s);for(;u<r;++u)l[u]=n[u];return new Ge(l,this._parents)},selection:function(){return this},order:function(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o,r=e[t],i=r.length-1,a=r[i];--i>=0;)(o=r[i])&&(a&&4^o.compareDocumentPosition(a)&&a.parentNode.insertBefore(o,a),a=o);return this},sort:function(e){function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}e||(e=ne);for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var a,l=n[i],u=l.length,s=r[i]=new Array(u),c=0;c<u;++c)(a=l[c])&&(s[c]=a);s.sort(t)}return new Ge(r,this._parents).order()},call:function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,i=o.length;r<i;++r){var a=o[r];if(a)return a}return null},size:function(){let e=0;for(const t of this)++e;return e},empty:function(){return!this.node()},each:function(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r,i=t[n],a=0,l=i.length;a<l;++a)(r=i[a])&&e.call(r,r.__data__,a,i);return this},attr:function(e,t){var n=D(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((null==t?n.local?re:oe:"function"==typeof t?n.local?ue:le:n.local?ae:ie)(n,t))},style:function(e,t,n){return arguments.length>1?this.each((null==t?ce:"function"==typeof t?fe:de)(e,t,null==n?"":n)):he(this.node(),e)},property:function(e,t){return arguments.length>1?this.each((null==t?ve:"function"==typeof t?ge:pe)(e,t)):this.node()[e]},classed:function(e,t){var n=me(e+"");if(arguments.length<2){for(var o=ye(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each(("function"==typeof t?Ee:t?be:_e)(n,t))},text:function(e){return arguments.length?this.each(null==e?Se:("function"==typeof e?ke:Ne)(e)):this.node().textContent},html:function(e){return arguments.length?this.each(null==e?Ce:("function"==typeof e?Ie:Me)(e)):this.node().innerHTML},raise:function(){return this.each(Pe)},lower:function(){return this.each(Te)},append:function(e){var t="function"==typeof e?e:z(e);return this.select((function(){return this.appendChild(t.apply(this,arguments))}))},insert:function(e,t){var n="function"==typeof e?e:z(e),o=null==t?Be:"function"==typeof t?t:L(t);return this.select((function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)}))},remove:function(){return this.each(Oe)},clone:function(e){return this.select(e?Ae:De)},datum:function(e){return arguments.length?this.property("__data__",e):this.node().__data__},on:function(e,t,n){var o,r,i=function(e){return e.trim().split(/^|\s+/).map((function(e){var t="",n=e.indexOf(".");return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}}))}(e+""),a=i.length;if(!(arguments.length<2)){for(l=t?ze:$e,o=0;o<a;++o)this.each(l(i[o],t,n));return this}var l=this.node().__on;if(l)for(var u,s=0,c=l.length;s<c;++s)for(o=0,u=l[s];o<a;++o)if((r=i[o]).type===u.type&&r.name===u.name)return u.value},dispatch:function(e,t){return this.each(("function"==typeof t?He:Le)(e,t))},[Symbol.iterator]:function*(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o,r=e[t],i=0,a=r.length;i<a;++i)(o=r[i])&&(yield o)}};const je={passive:!1},Ze={capture:!0,passive:!1};function Ke(e){e.stopImmediatePropagation()}function We(e){e.preventDefault(),e.stopImmediatePropagation()}function qe(e){var t=e.document.documentElement,n=Xe(e).on("dragstart.drag",We,Ze);"onselectstart"in t?n.on("selectstart.drag",We,Ze):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Je(e,t){var n=e.document.documentElement,o=Xe(e).on("dragstart.drag",null);t&&(o.on("click.drag",We,Ze),setTimeout((function(){o.on("click.drag",null)}),0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Qe=e=>()=>e;function et(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:i,x:a,y:l,dx:u,dy:s,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:s,enumerable:!0,configurable:!0},_:{value:c}})}function tt(e){return!e.ctrlKey&&!e.button}function nt(){return this.parentNode}function ot(e,t){return null==t?{x:e.x,y:e.y}:t}function rt(){return navigator.maxTouchPoints||"ontouchstart"in this}function it(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function at(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function lt(){}et.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var ut=.7,st=1/ut,ct="\\s*([+-]?\\d+)\\s*",dt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ft="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ht=/^#([0-9a-f]{3,8})$/,vt=new RegExp(`^rgb\\(${ct},${ct},${ct}\\)$`),pt=new RegExp(`^rgb\\(${ft},${ft},${ft}\\)$`),gt=new RegExp(`^rgba\\(${ct},${ct},${ct},${dt}\\)$`),mt=new RegExp(`^rgba\\(${ft},${ft},${ft},${dt}\\)$`),yt=new RegExp(`^hsl\\(${dt},${ft},${ft}\\)$`),wt=new RegExp(`^hsla\\(${dt},${ft},${ft},${dt}\\)$`),Vt={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function xt(){return this.rgb().formatHex()}function bt(){return this.rgb().formatRgb()}function _t(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ht.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Et(t):3===n?new kt(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?St(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?St(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=vt.exec(e))?new kt(t[1],t[2],t[3],1):(t=pt.exec(e))?new kt(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=gt.exec(e))?St(t[1],t[2],t[3],t[4]):(t=mt.exec(e))?St(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=yt.exec(e))?Bt(t[1],t[2]/100,t[3]/100,1):(t=wt.exec(e))?Bt(t[1],t[2]/100,t[3]/100,t[4]):Vt.hasOwnProperty(e)?Et(Vt[e]):"transparent"===e?new kt(NaN,NaN,NaN,0):null}function Et(e){return new kt(e>>16&255,e>>8&255,255&e,1)}function St(e,t,n,o){return o<=0&&(e=t=n=NaN),new kt(e,t,n,o)}function Nt(e,t,n,o){return 1===arguments.length?((r=e)instanceof lt||(r=_t(r)),r?new kt((r=r.rgb()).r,r.g,r.b,r.opacity):new kt):new kt(e,t,n,null==o?1:o);var r}function kt(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}function Ct(){return`#${Tt(this.r)}${Tt(this.g)}${Tt(this.b)}`}function Mt(){const e=It(this.opacity);return`${1===e?"rgb(":"rgba("}${Pt(this.r)}, ${Pt(this.g)}, ${Pt(this.b)}${1===e?")":`, ${e})`}`}function It(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Pt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Tt(e){return((e=Pt(e))<16?"0":"")+e.toString(16)}function Bt(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Dt(e,t,n,o)}function Ot(e){if(e instanceof Dt)return new Dt(e.h,e.s,e.l,e.opacity);if(e instanceof lt||(e=_t(e)),!e)return new Dt;if(e instanceof Dt)return e;var t=(e=e.rgb()).r/255,n=e.g/255,o=e.b/255,r=Math.min(t,n,o),i=Math.max(t,n,o),a=NaN,l=i-r,u=(i+r)/2;return l?(a=t===i?(n-o)/l+6*(n<o):n===i?(o-t)/l+2:(t-n)/l+4,l/=u<.5?i+r:2-i-r,a*=60):l=u>0&&u<1?0:a,new Dt(a,l,u,e.opacity)}function Dt(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}function At(e){return(e=(e||0)%360)<0?e+360:e}function $t(e){return Math.max(0,Math.min(1,e||0))}function zt(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}it(lt,_t,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:xt,formatHex:xt,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Ot(this).formatHsl()},formatRgb:bt,toString:bt}),it(kt,Nt,at(lt,{brighter(e){return e=null==e?st:Math.pow(st,e),new kt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?ut:Math.pow(ut,e),new kt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new kt(Pt(this.r),Pt(this.g),Pt(this.b),It(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ct,formatHex:Ct,formatHex8:function(){return`#${Tt(this.r)}${Tt(this.g)}${Tt(this.b)}${Tt(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:Mt,toString:Mt})),it(Dt,(function(e,t,n,o){return 1===arguments.length?Ot(e):new Dt(e,t,n,null==o?1:o)}),at(lt,{brighter(e){return e=null==e?st:Math.pow(st,e),new Dt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?ut:Math.pow(ut,e),new Dt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,r=2*n-o;return new kt(zt(e>=240?e-240:e+120,r,o),zt(e,r,o),zt(e<120?e+240:e-120,r,o),this.opacity)},clamp(){return new Dt(At(this.h),$t(this.s),$t(this.l),It(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=It(this.opacity);return`${1===e?"hsl(":"hsla("}${At(this.h)}, ${100*$t(this.s)}%, ${100*$t(this.l)}%${1===e?")":`, ${e})`}`}}));const Rt=e=>()=>e;function Lt(e){return 1==(e=+e)?Ht:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}(t,n,e):Rt(isNaN(t)?n:t)}}function Ht(e,t){var n=t-e;return n?function(e,t){return function(n){return e+n*t}}(e,n):Rt(isNaN(e)?t:e)}const Yt=function e(t){var n=Lt(t);function o(e,t){var o=n((e=Nt(e)).r,(t=Nt(t)).r),r=n(e.g,t.g),i=n(e.b,t.b),a=Ht(e.opacity,t.opacity);return function(t){return e.r=o(t),e.g=r(t),e.b=i(t),e.opacity=a(t),e+""}}return o.gamma=e,o}(1);function Gt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}var Ft=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Xt=new RegExp(Ft.source,"g");function Ut(e,t){var n,o,r,i=Ft.lastIndex=Xt.lastIndex=0,a=-1,l=[],u=[];for(e+="",t+="";(n=Ft.exec(e))&&(o=Xt.exec(t));)(r=o.index)>i&&(r=t.slice(i,r),l[a]?l[a]+=r:l[++a]=r),(n=n[0])===(o=o[0])?l[a]?l[a]+=o:l[++a]=o:(l[++a]=null,u.push({i:a,x:Gt(n,o)})),i=Xt.lastIndex;return i<t.length&&(r=t.slice(i),l[a]?l[a]+=r:l[++a]=r),l.length<2?u[0]?function(e){return function(t){return e(t)+""}}(u[0].x):function(e){return function(){return e}}(t):(t=u.length,function(e){for(var n,o=0;o<t;++o)l[(n=u[o]).i]=n.x(e);return l.join("")})}var jt,Zt=180/Math.PI,Kt={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Wt(e,t,n,o,r,i){var a,l,u;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(u=e*n+t*o)&&(n-=e*u,o-=t*u),(l=Math.sqrt(n*n+o*o))&&(n/=l,o/=l,u/=l),e*o<t*n&&(e=-e,t=-t,u=-u,a=-a),{translateX:r,translateY:i,rotate:Math.atan2(t,e)*Zt,skewX:Math.atan(u)*Zt,scaleX:a,scaleY:l}}function qt(e,t,n,o){function r(e){return e.length?e.pop()+" ":""}return function(i,a){var l=[],u=[];return i=e(i),a=e(a),function(e,o,r,i,a,l){if(e!==r||o!==i){var u=a.push("translate(",null,t,null,n);l.push({i:u-4,x:Gt(e,r)},{i:u-2,x:Gt(o,i)})}else(r||i)&&a.push("translate("+r+t+i+n)}(i.translateX,i.translateY,a.translateX,a.translateY,l,u),function(e,t,n,i){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),i.push({i:n.push(r(n)+"rotate(",null,o)-2,x:Gt(e,t)})):t&&n.push(r(n)+"rotate("+t+o)}(i.rotate,a.rotate,l,u),function(e,t,n,i){e!==t?i.push({i:n.push(r(n)+"skewX(",null,o)-2,x:Gt(e,t)}):t&&n.push(r(n)+"skewX("+t+o)}(i.skewX,a.skewX,l,u),function(e,t,n,o,i,a){if(e!==n||t!==o){var l=i.push(r(i)+"scale(",null,",",null,")");a.push({i:l-4,x:Gt(e,n)},{i:l-2,x:Gt(t,o)})}else 1===n&&1===o||i.push(r(i)+"scale("+n+","+o+")")}(i.scaleX,i.scaleY,a.scaleX,a.scaleY,l,u),i=a=null,function(e){for(var t,n=-1,o=u.length;++n<o;)l[(t=u[n]).i]=t.x(e);return l.join("")}}}var Jt=qt((function(e){const t=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Kt:Wt(t.a,t.b,t.c,t.d,t.e,t.f)}),"px, ","px)","deg)"),Qt=qt((function(e){return null==e?Kt:(jt||(jt=document.createElementNS("http://www.w3.org/2000/svg","g")),jt.setAttribute("transform",e),(e=jt.transform.baseVal.consolidate())?Wt((e=e.matrix).a,e.b,e.c,e.d,e.e,e.f):Kt)}),", ",")",")");function en(e){return((e=Math.exp(e))+1/e)/2}const tn=function e(t,n,o){function r(e,r){var i,a,l=e[0],u=e[1],s=e[2],c=r[0],d=r[1],f=r[2],h=c-l,v=d-u,p=h*h+v*v;if(p<1e-12)a=Math.log(f/s)/t,i=function(e){return[l+e*h,u+e*v,s*Math.exp(t*e*a)]};else{var g=Math.sqrt(p),m=(f*f-s*s+o*p)/(2*s*n*g),y=(f*f-s*s-o*p)/(2*f*n*g),w=Math.log(Math.sqrt(m*m+1)-m),V=Math.log(Math.sqrt(y*y+1)-y);a=(V-w)/t,i=function(e){var o,r=e*a,i=en(w),c=s/(n*g)*(i*(o=t*r+w,((o=Math.exp(2*o))-1)/(o+1))-function(e){return((e=Math.exp(e))-1/e)/2}(w));return[l+c*h,u+c*v,s*i/en(t*r+w)]}}return i.duration=1e3*a*t/Math.SQRT2,i}return r.rho=function(t){var n=Math.max(.001,+t),o=n*n;return e(n,o,o*o)},r}(Math.SQRT2,2,4);var nn,on,rn=0,an=0,ln=0,un=1e3,sn=0,cn=0,dn=0,fn="object"==typeof performance&&performance.now?performance:Date,hn="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function vn(){return cn||(hn(pn),cn=fn.now()+dn)}function pn(){cn=0}function gn(){this._call=this._time=this._next=null}function mn(e,t,n){var o=new gn;return o.restart(e,t,n),o}function yn(){cn=(sn=fn.now())+dn,rn=an=0;try{!function(){vn(),++rn;for(var e,t=nn;t;)(e=cn-t._time)>=0&&t._call.call(void 0,e),t=t._next;--rn}()}finally{rn=0,function(){var e,t,n=nn,o=1/0;for(;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:nn=t);on=e,Vn(o)}(),cn=0}}function wn(){var e=fn.now(),t=e-sn;t>un&&(dn-=t,sn=e)}function Vn(e){rn||(an&&(an=clearTimeout(an)),e-cn>24?(e<1/0&&(an=setTimeout(yn,e-fn.now()-dn)),ln&&(ln=clearInterval(ln))):(ln||(sn=fn.now(),ln=setInterval(wn,un)),rn=1,hn(yn)))}function xn(e,t,n){var o=new gn;return t=null==t?0:+t,o.restart((n=>{o.stop(),e(n+t)}),t,n),o}gn.prototype=mn.prototype={constructor:gn,restart:function(e,t,n){if("function"!=typeof e)throw new TypeError("callback is not a function");n=(null==n?vn():+n)+(null==t?0:+t),this._next||on===this||(on?on._next=this:nn=this,on=this),this._call=e,this._time=n,Vn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Vn())}};var bn=M("start","end","cancel","interrupt"),_n=[],En=0,Sn=1,Nn=2,kn=3,Cn=4,Mn=5,In=6;function Pn(e,t,n,o,r,i){var a=e.__transition;if(a){if(n in a)return}else e.__transition={};!function(e,t,n){var o,r=e.__transition;function i(e){n.state=Sn,n.timer.restart(a,n.delay,n.time),n.delay<=e&&a(e-n.delay)}function a(i){var s,c,d,f;if(n.state!==Sn)return u();for(s in r)if((f=r[s]).name===n.name){if(f.state===kn)return xn(a);f.state===Cn?(f.state=In,f.timer.stop(),f.on.call("interrupt",e,e.__data__,f.index,f.group),delete r[s]):+s<t&&(f.state=In,f.timer.stop(),f.on.call("cancel",e,e.__data__,f.index,f.group),delete r[s])}if(xn((function(){n.state===kn&&(n.state=Cn,n.timer.restart(l,n.delay,n.time),l(i))})),n.state=Nn,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Nn){for(n.state=kn,o=new Array(d=n.tween.length),s=0,c=-1;s<d;++s)(f=n.tween[s].value.call(e,e.__data__,n.index,n.group))&&(o[++c]=f);o.length=c+1}}function l(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(u),n.state=Mn,1),i=-1,a=o.length;++i<a;)o[i].call(e,r);n.state===Mn&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){for(var o in n.state=In,n.timer.stop(),delete r[t],r)return;delete e.__transition}r[t]=n,n.timer=mn(i,0,n.time)}(e,n,{name:t,index:o,group:r,on:bn,tween:_n,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:En})}function Tn(e,t){var n=On(e,t);if(n.state>En)throw new Error("too late; already scheduled");return n}function Bn(e,t){var n=On(e,t);if(n.state>kn)throw new Error("too late; already running");return n}function On(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Dn(e,t){var n,o,r,i=e.__transition,a=!0;if(i){for(r in t=null==t?null:t+"",i)(n=i[r]).name===t?(o=n.state>Nn&&n.state<Mn,n.state=In,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete i[r]):a=!1;a&&delete e.__transition}}function An(e,t){var n,o;return function(){var r=Bn(this,e),i=r.tween;if(i!==n)for(var a=0,l=(o=n=i).length;a<l;++a)if(o[a].name===t){(o=o.slice()).splice(a,1);break}r.tween=o}}function $n(e,t,n){var o,r;if("function"!=typeof n)throw new Error;return function(){var i=Bn(this,e),a=i.tween;if(a!==o){r=(o=a).slice();for(var l={name:t,value:n},u=0,s=r.length;u<s;++u)if(r[u].name===t){r[u]=l;break}u===s&&r.push(l)}i.tween=r}}function zn(e,t,n){var o=e._id;return e.each((function(){var e=Bn(this,o);(e.value||(e.value={}))[t]=n.apply(this,arguments)})),function(e){return On(e,o).value[t]}}function Rn(e,t){var n;return("number"==typeof t?Gt:t instanceof _t?Yt:(n=_t(t))?(t=n,Yt):Ut)(e,t)}function Ln(e){return function(){this.removeAttribute(e)}}function Hn(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Yn(e,t,n){var o,r,i=n+"";return function(){var a=this.getAttribute(e);return a===i?null:a===o?r:r=t(o=a,n)}}function Gn(e,t,n){var o,r,i=n+"";return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===o?r:r=t(o=a,n)}}function Fn(e,t,n){var o,r,i;return function(){var a,l,u=n(this);if(null!=u)return(a=this.getAttribute(e))===(l=u+"")?null:a===o&&l===r?i:(r=l,i=t(o=a,u));this.removeAttribute(e)}}function Xn(e,t,n){var o,r,i;return function(){var a,l,u=n(this);if(null!=u)return(a=this.getAttributeNS(e.space,e.local))===(l=u+"")?null:a===o&&l===r?i:(r=l,i=t(o=a,u));this.removeAttributeNS(e.space,e.local)}}function Un(e,t){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&function(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}(e,r)),n}return r._value=t,r}function jn(e,t){var n,o;function r(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&function(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}(e,r)),n}return r._value=t,r}function Zn(e,t){return function(){Tn(this,e).delay=+t.apply(this,arguments)}}function Kn(e,t){return t=+t,function(){Tn(this,e).delay=t}}function Wn(e,t){return function(){Bn(this,e).duration=+t.apply(this,arguments)}}function qn(e,t){return t=+t,function(){Bn(this,e).duration=t}}var Jn=Fe.prototype.constructor;function Qn(e){return function(){this.style.removeProperty(e)}}var eo=0;function to(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function no(){return++eo}var oo=Fe.prototype;to.prototype={constructor:to,select:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=L(e));for(var o=this._groups,r=o.length,i=new Array(r),a=0;a<r;++a)for(var l,u,s=o[a],c=s.length,d=i[a]=new Array(c),f=0;f<c;++f)(l=s[f])&&(u=e.call(l,l.__data__,f,s))&&("__data__"in l&&(u.__data__=l.__data__),d[f]=u,Pn(d[f],t,n,f,d,On(l,n)));return new to(i,this._parents,t,n)},selectAll:function(e){var t=this._name,n=this._id;"function"!=typeof e&&(e=Y(e));for(var o=this._groups,r=o.length,i=[],a=[],l=0;l<r;++l)for(var u,s=o[l],c=s.length,d=0;d<c;++d)if(u=s[d]){for(var f,h=e.call(u,u.__data__,d,s),v=On(u,n),p=0,g=h.length;p<g;++p)(f=h[p])&&Pn(f,t,n,p,h,v);i.push(h),a.push(u)}return new to(i,a,t,n)},selectChild:oo.selectChild,selectChildren:oo.selectChildren,filter:function(e){"function"!=typeof e&&(e=F(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var i,a=t[r],l=a.length,u=o[r]=[],s=0;s<l;++s)(i=a[s])&&e.call(i,i.__data__,s,a)&&u.push(i);return new to(o,this._parents,this._name,this._id)},merge:function(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,i=Math.min(o,r),a=new Array(o),l=0;l<i;++l)for(var u,s=t[l],c=n[l],d=s.length,f=a[l]=new Array(d),h=0;h<d;++h)(u=s[h]||c[h])&&(f[h]=u);for(;l<o;++l)a[l]=t[l];return new to(a,this._parents,this._name,this._id)},selection:function(){return new Jn(this._groups,this._parents)},transition:function(){for(var e=this._name,t=this._id,n=no(),o=this._groups,r=o.length,i=0;i<r;++i)for(var a,l=o[i],u=l.length,s=0;s<u;++s)if(a=l[s]){var c=On(a,t);Pn(a,e,n,s,l,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new to(o,this._parents,e,n)},call:oo.call,nodes:oo.nodes,node:oo.node,size:oo.size,empty:oo.empty,each:oo.each,on:function(e,t){var n=this._id;return arguments.length<2?On(this.node(),n).on.on(e):this.each(function(e,t,n){var o,r,i=function(e){return(e+"").trim().split(/^|\s+/).every((function(e){var t=e.indexOf(".");return t>=0&&(e=e.slice(0,t)),!e||"start"===e}))}(t)?Tn:Bn;return function(){var a=i(this,e),l=a.on;l!==o&&(r=(o=l).copy()).on(t,n),a.on=r}}(n,e,t))},attr:function(e,t){var n=D(e),o="transform"===n?Qt:Rn;return this.attrTween(e,"function"==typeof t?(n.local?Xn:Fn)(n,o,zn(this,"attr."+e,t)):null==t?(n.local?Hn:Ln)(n):(n.local?Gn:Yn)(n,o,t))},attrTween:function(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==t)return this.tween(n,null);if("function"!=typeof t)throw new Error;var o=D(e);return this.tween(n,(o.local?Un:jn)(o,t))},style:function(e,t,n){var o="transform"==(e+="")?Jt:Rn;return null==t?this.styleTween(e,function(e,t){var n,o,r;return function(){var i=he(this,e),a=(this.style.removeProperty(e),he(this,e));return i===a?null:i===n&&a===o?r:r=t(n=i,o=a)}}(e,o)).on("end.style."+e,Qn(e)):"function"==typeof t?this.styleTween(e,function(e,t,n){var o,r,i;return function(){var a=he(this,e),l=n(this),u=l+"";return null==l&&(this.style.removeProperty(e),u=l=he(this,e)),a===u?null:a===o&&u===r?i:(r=u,i=t(o=a,l))}}(e,o,zn(this,"style."+e,t))).each(function(e,t){var n,o,r,i,a="style."+t,l="end."+a;return function(){var u=Bn(this,e),s=u.on,c=null==u.value[a]?i||(i=Qn(t)):void 0;s===n&&r===c||(o=(n=s).copy()).on(l,r=c),u.on=o}}(this._id,e)):this.styleTween(e,function(e,t,n){var o,r,i=n+"";return function(){var a=he(this,e);return a===i?null:a===o?r:r=t(o=a,n)}}(e,o,t),n).on("end.style."+e,null)},styleTween:function(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(null==t)return this.tween(o,null);if("function"!=typeof t)throw new Error;return this.tween(o,function(e,t,n){var o,r;function i(){var i=t.apply(this,arguments);return i!==r&&(o=(r=i)&&function(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}(e,i,n)),o}return i._value=t,i}(e,t,null==n?"":n))},text:function(e){return this.tween("text","function"==typeof e?function(e){return function(){var t=e(this);this.textContent=null==t?"":t}}(zn(this,"text",e)):function(e){return function(){this.textContent=e}}(null==e?"":e+""))},textTween:function(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(null==e)return this.tween(t,null);if("function"!=typeof e)throw new Error;return this.tween(t,function(e){var t,n;function o(){var o=e.apply(this,arguments);return o!==n&&(t=(n=o)&&function(e){return function(t){this.textContent=e.call(this,t)}}(o)),t}return o._value=e,o}(e))},remove:function(){return this.on("end.remove",(e=this._id,function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}));var e},tween:function(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o,r=On(this.node(),n).tween,i=0,a=r.length;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((null==t?An:$n)(n,e,t))},delay:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Zn:Kn)(t,e)):On(this.node(),t).delay},duration:function(e){var t=this._id;return arguments.length?this.each(("function"==typeof e?Wn:qn)(t,e)):On(this.node(),t).duration},ease:function(e){var t=this._id;return arguments.length?this.each(function(e,t){if("function"!=typeof t)throw new Error;return function(){Bn(this,e).ease=t}}(t,e)):On(this.node(),t).ease},easeVarying:function(e){if("function"!=typeof e)throw new Error;return this.each(function(e,t){return function(){var n=t.apply(this,arguments);if("function"!=typeof n)throw new Error;Bn(this,e).ease=n}}(this._id,e))},end:function(){var e,t,n=this,o=n._id,r=n.size();return new Promise((function(i,a){var l={value:a},u={value:function(){0==--r&&i()}};n.each((function(){var n=Bn(this,o),r=n.on;r!==e&&((t=(e=r).copy())._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),n.on=t})),0===r&&i()}))},[Symbol.iterator]:oo[Symbol.iterator]};var ro={time:null,delay:0,duration:250,ease:function(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}};function io(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}Fe.prototype.interrupt=function(e){return this.each((function(){Dn(this,e)}))},Fe.prototype.transition=function(e){var t,n;e instanceof to?(t=e._id,e=e._name):(t=no(),(n=ro).time=vn(),e=null==e?null:e+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var a,l=o[i],u=l.length,s=0;s<u;++s)(a=l[s])&&Pn(a,e,t,s,l,n||io(a,t));return new to(o,this._parents,e,t)};const ao=e=>()=>e;function lo(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function uo(e,t,n){this.k=e,this.x=t,this.y=n}uo.prototype={constructor:uo,scale:function(e){return 1===e?this:new uo(this.k*e,this.x,this.y)},translate:function(e,t){return 0===e&0===t?this:new uo(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var so=new uo(1,0,0);function co(e){e.stopImmediatePropagation()}function fo(e){e.preventDefault(),e.stopImmediatePropagation()}function ho(e){return!(e.ctrlKey&&"wheel"!==e.type||e.button)}function vo(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e).hasAttribute("viewBox")?[[(e=e.viewBox.baseVal).x,e.y],[e.x+e.width,e.y+e.height]]:[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]:[[0,0],[e.clientWidth,e.clientHeight]]}function po(){return this.__zoom||so}function go(e){return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function mo(){return navigator.maxTouchPoints||"ontouchstart"in this}function yo(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],i=e.invertY(t[0][1])-n[0][1],a=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),a>i?(i+a)/2:Math.min(0,i)||Math.max(0,a))}uo.prototype;var wo=(e=>(e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom",e))(wo||{}),Vo=(e=>(e.Partial="partial",e.Full="full",e))(Vo||{}),xo=(e=>(e.Bezier="default",e.SimpleBezier="simple-bezier",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e))(xo||{}),bo=(e=>(e.Strict="strict",e.Loose="loose",e))(bo||{}),_o=(e=>(e.Arrow="arrow",e.ArrowClosed="arrowclosed",e))(_o||{}),Eo=(e=>(e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal",e))(Eo||{});function So(e){var t,n;const o=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target,r="function"==typeof(null==o?void 0:o.hasAttribute)&&o.hasAttribute("contenteditable"),i="function"==typeof(null==o?void 0:o.closest)?o.closest(".nokey"):null;return["INPUT","SELECT","TEXTAREA"].includes(null==o?void 0:o.nodeName)||r||!!i}function No(e,t,n,o){const r=t.split("+").map((e=>e.trim().toLowerCase()));return 1===r.length?e.toLowerCase()===t.toLowerCase():(o?n.delete(e.toLowerCase()):n.add(e.toLowerCase()),r.every(((e,t)=>n.has(e)&&Array.from(n.values())[t]===r[t])))}function ko(e,t){const n=Vue.toRef((()=>{var e;return null!=(e=Vue.toValue(null==t?void 0:t.actInsideInputWithModifier))&&e})),o=Vue.toRef((()=>{var e;return null!=(e=Vue.toValue(null==t?void 0:t.target))?e:window})),r=Vue.ref(!0===Vue.toValue(e));let i=!1;const a=new Set;let l=s(Vue.toValue(e));function u(){i=!1,a.clear(),r.value=!1}function s(e){return null===e?(u(),()=>!1):"boolean"==typeof e?(u(),r.value=e,()=>!1):Array.isArray(e)||"string"==typeof e?function(e,t){return n=>{if(!n.code&&!n.key)return!1;const o=(r=n.code,"string"==typeof(i=e)?r===i?"code":"key":i.includes(r)?"code":"key");var r,i;return Array.isArray(e)?e.some((e=>No(n[o],e,t,"keyup"===n.type))):No(n[o],e,t,"keyup"===n.type)}}(e,a):e}return Vue.watch((()=>Vue.toValue(e)),((e,t)=>{"boolean"==typeof t&&"boolean"!=typeof e&&u(),l=s(e)}),{immediate:!0}),Vue.onMounted((()=>{S(window,["blur","contextmenu"],u)})),N(((...e)=>l(...e)),(e=>{var t;i=(t=e).ctrlKey||t.metaKey||t.shiftKey;(!i||i&&!n.value)&&So(e)||(e.preventDefault(),r.value=!0)}),{eventName:"keydown",target:o}),N(((...e)=>l(...e)),(e=>{if(r.value){if((!i||i&&!n.value)&&So(e))return;u()}}),{eventName:"keyup",target:o}),r}const Co="vue-flow__node-desc",Mo="vue-flow__edge-desc",Io=["Enter"," ","Escape"],Po={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function To(e){return s(u({},e.computedPosition||{x:0,y:0}),{width:e.dimensions.width||0,height:e.dimensions.height||0})}function Bo(e,t){const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)}function Oo(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Do(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function Ao(e,t){return{x:Do(e.x,t[0][0],t[1][0]),y:Do(e.y,t[0][1],t[1][1])}}function $o(e){const t=e.getRootNode();return"elementFromPoint"in t?t:window.document}function zo(e){return e&&"object"==typeof e&&"id"in e&&"source"in e&&"target"in e}function Ro(e){return e&&"object"==typeof e&&"id"in e&&"position"in e&&!zo(e)}function Lo(e){return Ro(e)&&"computedPosition"in e}function Ho(e){return!Number.isNaN(e)&&Number.isFinite(e)}function Yo(e,t,n){var o;const r={id:e.id.toString(),type:null!=(o=e.type)?o:"default",dimensions:Vue.markRaw({width:0,height:0}),computedPosition:Vue.markRaw(u({z:0},e.position)),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Dr(e.data)?e.data:{},events:Vue.markRaw(Dr(e.events)?e.events:{})};return Object.assign(null!=t?t:r,e,{id:e.id.toString(),parentNode:n})}function Go(e,t,n){var o,r,i,a,l,s,c,d,f;const h=u({id:e.id.toString(),type:null!=(r=null!=(o=e.type)?o:null==t?void 0:t.type)?r:"default",source:e.source.toString(),target:e.target.toString(),sourceHandle:null==(d=e.sourceHandle)?void 0:d.toString(),targetHandle:null==(f=e.targetHandle)?void 0:f.toString(),updatable:null!=(i=e.updatable)?i:null==n?void 0:n.updatable,selectable:null!=(a=e.selectable)?a:null==n?void 0:n.selectable,focusable:null!=(l=e.focusable)?l:null==n?void 0:n.focusable,data:Dr(e.data)?e.data:{},events:Vue.markRaw(Dr(e.events)?e.events:{}),label:null!=(s=e.label)?s:"",interactionWidth:null!=(c=e.interactionWidth)?c:null==n?void 0:n.interactionWidth},null!=n?n:{});return Object.assign(null!=t?t:h,e,{id:e.id.toString()})}function Fo(e,t,n,o){const r="string"==typeof e?e:e.id,i=new Set,a="source"===o?"target":"source";for(const l of n)l[a]===r&&i.add(l[o]);return t.filter((e=>i.has(e.id)))}function Xo({source:e,sourceHandle:t,target:n,targetHandle:o}){return`vueflow__edge-${e}${null!=t?t:""}-${n}${null!=o?o:""}`}function Uo({x:e,y:t},{x:n,y:o,zoom:r}){return{x:e*r+n,y:t*r+o}}function jo({x:e,y:t},{x:n,y:o,zoom:r},i=!1,[a,l]=[1,1]){const u={x:(e-n)/r,y:(t-o)/r};return i?{x:a*Math.round(u.x/a),y:l*Math.round(u.y/l)}:u}function Zo({x:e,y:t,width:n,height:o}){return{x:e,y:t,x2:e+n,y2:t+o}}function Ko(e){let t={x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY,x2:Number.NEGATIVE_INFINITY,y2:Number.NEGATIVE_INFINITY};for(let r=0;r<e.length;r++){const i=e[r];n=t,o=Zo(u(u({},i.computedPosition),i.dimensions)),t={x:Math.min(n.x,o.x),y:Math.min(n.y,o.y),x2:Math.max(n.x2,o.x2),y2:Math.max(n.y2,o.y2)}}var n,o;return function({x:e,y:t,x2:n,y2:o}){return{x:e,y:t,width:n-e,height:o-t}}(t)}function Wo(e,t,n={x:0,y:0,zoom:1},o=!1,r=!1){var i,a,l,c;const d=s(u({},jo(t,n)),{width:t.width/n.zoom,height:t.height/n.zoom}),f=[];for(const u of e){const{dimensions:e,selectable:t=!0,hidden:n=!1}=u,s=null!=(a=null!=(i=e.width)?i:u.width)?a:null,h=null!=(c=null!=(l=e.height)?l:u.height)?c:null;if(r&&!t||n)continue;const v=Bo(d,To(u));(null===s||null===h||o&&v>0||v>=(null!=s?s:0)*(null!=h?h:0)||u.dragging)&&f.push(u)}return f}function qo(e,t){const n=new Set;if("string"==typeof e)n.add(e);else if(e.length>=1)for(const o of e)n.add(o.id);return t.filter((e=>n.has(e.source)||n.has(e.target)))}function Jo(e,t,n,o,r,i=.1,a={x:0,y:0}){var l,u;const s=t/(e.width*(1+i)),c=n/(e.height*(1+i)),d=Do(Math.min(s,c),o,r),f=e.x+e.width/2,h=e.y+e.height/2;return{x:t/2-f*d+(null!=(l=a.x)?l:0),y:n/2-h*d+(null!=(u=a.y)?u:0),zoom:d}}function Qo(e,t){if(!e.parentNode)return!1;const n=t(e.parentNode);return!!n&&(!!n.selected||Qo(n,t))}function er(e,t){if(void 0===e)return"";if("string"==typeof e)return e;return`${t?`${t}__`:""}${Object.keys(e).sort().map((t=>`${t}=${e[t]}`)).join("&")}`}function tr(e,t,n){return e<t?Do(Math.abs(e-t),1,t)/t:e>n?-Do(Math.abs(e-n),1,t)/t:0}function nr(e,t,n=15,o=40){return[tr(e.x,o,t.width-o)*n,tr(e.y,o,t.height-o)*n]}function or(e,t){var n,o;if(t){const r=e.position.x+e.dimensions.width-t.dimensions.width,i=e.position.y+e.dimensions.height-t.dimensions.height;if(r>0||i>0||e.position.x<0||e.position.y<0){let a={};if("function"==typeof t.style?a=u({},t.style(t)):t.style&&(a=u({},t.style)),a.width=null!=(n=a.width)?n:`${t.dimensions.width}px`,a.height=null!=(o=a.height)?o:`${t.dimensions.height}px`,r>0)if("string"==typeof a.width){const e=Number(a.width.replace("px",""));a.width=`${e+r}px`}else a.width+=r;if(i>0)if("string"==typeof a.height){const e=Number(a.height.replace("px",""));a.height=`${e+i}px`}else a.height+=i;if(e.position.x<0){const n=Math.abs(e.position.x);if(t.position.x=t.position.x-n,"string"==typeof a.width){const e=Number(a.width.replace("px",""));a.width=`${e+n}px`}else a.width+=n;e.position.x=0}if(e.position.y<0){const n=Math.abs(e.position.y);if(t.position.y=t.position.y-n,"string"==typeof a.height){const e=Number(a.height.replace("px",""));a.height=`${e+n}px`}else a.height+=n;e.position.y=0}t.dimensions.width=Number(a.width.toString().replace("px","")),t.dimensions.height=Number(a.height.toString().replace("px","")),"function"==typeof t.style?t.style=e=>{const n=t.style;return u(u({},n(e)),a)}:t.style=u(u({},t.style),a)}}}function rr(e,t){var n,o;const r=e.filter((e=>"add"===e.type||"remove"===e.type));for(const a of r)if("add"===a.type){-1===t.findIndex((e=>e.id===a.item.id))&&t.push(a.item)}else if("remove"===a.type){const e=t.findIndex((e=>e.id===a.id));-1!==e&&t.splice(e,1)}const i=t.map((e=>e.id));for(const a of t)for(const r of e)if(r.id===a.id)switch(r.type){case"select":a.selected=r.selected;break;case"position":if(Lo(a)&&(void 0!==r.position&&(a.position=r.position),void 0!==r.dragging&&(a.dragging=r.dragging),a.expandParent&&a.parentNode)){const e=t[i.indexOf(a.parentNode)];e&&Lo(e)&&or(a,e)}break;case"dimensions":if(Lo(a)&&(void 0!==r.dimensions&&(a.dimensions=r.dimensions),void 0!==r.updateStyle&&(a.style=s(u({},a.style||{}),{width:`${null==(n=r.dimensions)?void 0:n.width}px`,height:`${null==(o=r.dimensions)?void 0:o.height}px`})),void 0!==r.resizing&&(a.resizing=r.resizing),a.expandParent&&a.parentNode)){const e=t[i.indexOf(a.parentNode)];if(e&&Lo(e)){!!e.dimensions.width&&!!e.dimensions.height?or(a,e):Vue.nextTick((()=>{or(a,e)}))}}}return t}function ir(e,t){return{id:e,type:"select",selected:t}}function ar(e){return{item:e,type:"add"}}function lr(e){return{id:e,type:"remove"}}function ur(e,t,n,o,r){return{id:e,source:t,target:n,sourceHandle:o||null,targetHandle:r||null,type:"remove"}}function sr(e,t=new Set,n=!1){const o=[];for(const[r,i]of e){const e=t.has(r);void 0===i.selected&&!e||i.selected===e||(n&&(i.selected=e),o.push(ir(i.id,e)))}return o}function cr(e){const t=new Set;let n=!1;e&&(n=!0,t.add(e));const o=e=>{t.delete(e)};return{on:r=>{e&&n&&t.delete(e),t.add(r);const i=()=>{o(r),e&&n&&t.add(e)};return d(i),{off:i}},off:o,trigger:e=>Promise.all(Array.from(t).map((t=>t(e)))),hasListeners:()=>t.size>0,fns:t}}function dr(e,t,n){let o=e;do{if(o&&o.matches(t))return!0;if(o===n)return!1;o=o.parentElement}while(o);return!1}function fr({id:e,dragItems:t,findNode:n}){const o=[];for(const r of t){const e=n(r.id);e&&o.push(e)}return[e?o.find((t=>t.id===e)):o[0],o]}function hr(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function vr(e,t,n,o){let r=e.extent||n;if("parent"!==r&&(Array.isArray(r)||"parent"!==(null==r?void 0:r.range))||e.expandParent){if(Array.isArray(r)){const e=(null==o?void 0:o.computedPosition.x)||0,t=(null==o?void 0:o.computedPosition.y)||0;r=[[r[0][0]+e,r[0][1]+t],[r[1][0]+e,r[1][1]+t]]}else if("parent"!==r&&(null==r?void 0:r.range)&&Array.isArray(r.range)){const[e,t,n,i]=hr(r.padding),a=(null==o?void 0:o.computedPosition.x)||0,l=(null==o?void 0:o.computedPosition.y)||0;r=[[r.range[0][0]+a+i,r.range[0][1]+l+e],[r.range[1][0]+a-t,r.range[1][1]+l-n]]}}else if(e.parentNode&&o&&e.dimensions.width&&e.dimensions.height){const e=function(e,t,n){const[o,r,i,a]="string"!=typeof e?hr(e.padding):[0,0,0,0];return!(!n||void 0===n.computedPosition.x||void 0===n.computedPosition.y||void 0===n.dimensions.width||void 0===n.dimensions.height)&&[[n.computedPosition.x+a,n.computedPosition.y+o],[n.computedPosition.x+n.dimensions.width-r,n.computedPosition.y+n.dimensions.height-i]]}(r,0,o);e&&(r=e)}else t(new br(Vr.NODE_EXTENT_INVALID,e.id)),r=n;return"parent"===r?[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]]:r}function pr(e,t,n,o,r){const i=Ao(t,function({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}(e.dimensions,vr(e,n,o,r)));return{position:{x:i.x-((null==r?void 0:r.computedPosition.x)||0),y:i.y-((null==r?void 0:r.computedPosition.y)||0)},computedPosition:i}}function gr(e,t,n=wo.Left){var o,r,i;const a=(null!=(o=null==t?void 0:t.x)?o:0)+e.computedPosition.x,l=(null!=(r=null==t?void 0:t.y)?r:0)+e.computedPosition.y,{width:u,height:s}=null!=t?t:function(e){var t,n,o,r,i,a;return{width:null!=(n=null!=(t=null==(i=e.dimensions)?void 0:i.width)?t:e.width)?n:0,height:null!=(r=null!=(o=null==(a=e.dimensions)?void 0:a.height)?o:e.height)?r:0}}(e);switch(null!=(i=null==t?void 0:t.position)?i:n){case wo.Top:return{x:a+u/2,y:l};case wo.Right:return{x:a+u,y:l+s/2};case wo.Bottom:return{x:a+u/2,y:l+s};case wo.Left:return{x:a,y:l+s/2}}}function mr(e=[],t){return e.length&&(t?e.find((e=>e.id===t)):e[0])||null}function yr({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:i,width:a,height:l,viewport:u}){const s={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+o,t.y+i)};s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const c=Zo({x:(0-u.x)/u.zoom,y:(0-u.y)/u.zoom,width:a/u.zoom,height:l/u.zoom}),d=Math.max(0,Math.min(c.x2,s.x2)-Math.max(c.x,s.x)),f=Math.max(0,Math.min(c.y2,s.y2)-Math.max(c.y,s.y));return Math.ceil(d*f)>0}function wr(e,t,n=!1){const o="number"==typeof e.zIndex;let r=o?e.zIndex:0;const i=t(e.source),a=t(e.target);return i&&a?(n&&(r=o?e.zIndex:Math.max(i.computedPosition.z||0,a.computedPosition.z||0)),r):0}var Vr=(e=>(e.MISSING_STYLES="MISSING_STYLES",e.MISSING_VIEWPORT_DIMENSIONS="MISSING_VIEWPORT_DIMENSIONS",e.NODE_INVALID="NODE_INVALID",e.NODE_NOT_FOUND="NODE_NOT_FOUND",e.NODE_MISSING_PARENT="NODE_MISSING_PARENT",e.NODE_TYPE_MISSING="NODE_TYPE_MISSING",e.NODE_EXTENT_INVALID="NODE_EXTENT_INVALID",e.EDGE_INVALID="EDGE_INVALID",e.EDGE_NOT_FOUND="EDGE_NOT_FOUND",e.EDGE_SOURCE_MISSING="EDGE_SOURCE_MISSING",e.EDGE_TARGET_MISSING="EDGE_TARGET_MISSING",e.EDGE_TYPE_MISSING="EDGE_TYPE_MISSING",e.EDGE_SOURCE_TARGET_SAME="EDGE_SOURCE_TARGET_SAME",e.EDGE_SOURCE_TARGET_MISSING="EDGE_SOURCE_TARGET_MISSING",e.EDGE_ORPHANED="EDGE_ORPHANED",e.USEVUEFLOW_OPTIONS="USEVUEFLOW_OPTIONS",e))(Vr||{});const xr={MISSING_STYLES:()=>"It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly",MISSING_VIEWPORT_DIMENSIONS:()=>"The Vue Flow parent container needs a width and a height to render the graph",NODE_INVALID:e=>`Node is invalid\nNode: ${e}`,NODE_NOT_FOUND:e=>`Node not found\nNode: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent\nNode: ${e}\nParent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing\nType: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent\nNode: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target\nEdge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing\nEdge: ${e} \nSource: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing\nEdge: ${e} \nTarget: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing\nType: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same\nEdge: ${e} \nSource: ${t} \nTarget: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing\nEdge: ${e} \nSource: ${t} \nTarget: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed\nEdge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found\nEdge: ${e}`,USEVUEFLOW_OPTIONS:()=>"The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead"};class br extends Error{constructor(e,...t){var n;super(null==(n=xr[e])?void 0:n.call(xr,...t)),this.name="VueFlowError",this.code=e,this.args=t}}function _r(e){return"clientX"in e}function Er(e,t){var n,o,r,i;const a=_r(e),l=a?e.clientX:null==(r=e.touches)?void 0:r[0].clientX,u=a?e.clientY:null==(i=e.touches)?void 0:i[0].clientY;return{x:l-(null!=(n=null==t?void 0:t.left)?n:0),y:u-(null!=(o=null==t?void 0:t.top)?o:0)}}const Sr=()=>{var e;return"undefined"!=typeof navigator&&(null==(e=null==navigator?void 0:navigator.userAgent)?void 0:e.indexOf("Mac"))>=0};function Nr(e){null==e||e.classList.remove("valid","connecting","vue-flow__handle-valid","vue-flow__handle-connecting")}function kr(e,t,n,o){const r=[];for(const i of t[n]||[])if(`${e.id}-${i.id}-${n}`!==o){const{x:t,y:o}=gr(e,i);r.push({id:i.id||null,type:n,nodeId:e.id,x:t,y:o})}return r}function Cr(e,t,n,o,r,i,a,l,u,s,c){const d="target"===i,f=l.querySelector(`.vue-flow__handle[data-id="${null==t?void 0:t.nodeId}-${null==t?void 0:t.id}-${null==t?void 0:t.type}"]`),{x:h,y:v}=Er(e),p=l.elementFromPoint(h,v),g=(null==p?void 0:p.classList.contains("vue-flow__handle"))?p:f,m={handleDomNode:null,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},endHandle:null};if(g){m.handleDomNode=g;const e=Mr(void 0,g),t=g.getAttribute("data-nodeid"),i=g.getAttribute("data-handleid"),l=g.classList.contains("connectable"),f=g.classList.contains("connectableend"),h={source:d?t:o,sourceHandle:d?i:r,target:d?o:t,targetHandle:d?r:i};m.connection=h;l&&f&&(n===bo.Strict?d&&"source"===e||!d&&"target"===e:t!==o||i!==r)&&(m.isValid=a(h,{edges:u,nodes:s,sourceNode:c(h.source),targetNode:c(h.target)}),m.endHandle={nodeId:t,handleId:i,type:e,position:m.isValid?g.getAttribute("data-handlepos"):null})}return m}function Mr(e,t){return e||((null==t?void 0:t.classList.contains("target"))?"target":(null==t?void 0:t.classList.contains("source"))?"source":null)}const Ir=["production","prod"];function Pr(e,...t){Tr()}function Tr(){return!Ir.includes("production")}function Br(e,t,n,o){const r=t.querySelectorAll(`.vue-flow__handle${e}`);return Array.from(r).map((e=>{const t=e.getBoundingClientRect();return u({id:e.getAttribute("data-handleid"),position:e.getAttribute("data-handlepos"),x:(t.left-n.left)/o,y:(t.top-n.top)/o},Oo(e))}))}function Or(e,t,n,o,r,i=!1,a){r.value=!1,e.selected?(i||e.selected&&t)&&(o([e]),Vue.nextTick((()=>{a.blur()}))):n([e])}function Dr(e){return void 0!==Vue.unref(e)}function Ar(e,t,n,o){var r;if(!e||!e.source||!e.target)return n(new br(Vr.EDGE_INVALID,null!=(r=null==e?void 0:e.id)?r:"[ID UNKNOWN]")),!1;let i;return i=zo(e)?e:s(u({},e),{id:Xo(e)}),i=Go(i,void 0,o),!function(e,t){return t.some((t=>zo(t)&&t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)))}(i,t)&&i}function $r(e,t,n){const o={},r=[];for(let i=0;i<e.length;++i){const a=e[i];if(!Ro(a)){n(new br(Vr.NODE_INVALID,null==a?void 0:a.id)||`[ID UNKNOWN|INDEX ${i}]`);continue}const l=Yo(a,t(a.id),a.parentNode);a.parentNode&&(o[a.parentNode]=!0),r[i]=l}for(const i of r){const e=t(i.parentNode)||r.find((e=>e.id===i.parentNode));i.parentNode&&!e&&n(new br(Vr.NODE_MISSING_PARENT,i.id,i.parentNode)),(i.parentNode||o[i.id])&&(o[i.id]&&(i.isParent=!0),e&&(e.isParent=!0))}return r}function zr(e,t){e.clear();for(const n of t){const{id:t,source:o,target:r,sourceHandle:i=null,targetHandle:a=null}=n,l=`${o}-source-${i}`,u=`${r}-target-${a}`,s=e.get(l)||new Map,c=e.get(u)||new Map,d=Vue.markRaw({edgeId:t,source:o,target:r,sourceHandle:i,targetHandle:a});e.set(l,s.set(`${r}-${a}`,d)),e.set(u,c.set(`${o}-${i}`,d))}}function Rr(e,t,n){if(!n)return;const o=[];for(const r of e.keys())t.has(r)||o.push(e.get(r));o.length&&n(o)}function Lr(e,t,n,o,r,i,a,l){const c=[];for(const d of e){const e=zo(d)?d:Ar(d,l,r,i);if(!e)continue;const f=n(e.source),h=n(e.target);if(!f||!h){r(new br(Vr.EDGE_SOURCE_TARGET_MISSING,e.id,e.source,e.target));continue}if(!f){r(new br(Vr.EDGE_SOURCE_MISSING,e.id,e.source));continue}if(!h){r(new br(Vr.EDGE_TARGET_MISSING,e.id,e.target));continue}if(t){if(!t(e,{edges:l,nodes:a,sourceNode:f,targetNode:h})){r(new br(Vr.EDGE_INVALID,e.id));continue}}const v=o(e.id);c.push(s(u({},Go(e,v,i)),{sourceNode:f,targetNode:h}))}return c}const Hr=Symbol("vueFlow"),Yr=Symbol("nodeId"),Gr=Symbol("nodeRef"),Fr=Symbol("edgeId"),Xr=Symbol("edgeRef"),Ur=Symbol("slots");function jr(e){const{vueFlowRef:t,snapToGrid:n,snapGrid:o,noDragClassName:r,nodes:i,nodeExtent:a,nodeDragThreshold:l,viewport:s,autoPanOnNodeDrag:c,autoPanSpeed:d,nodesDraggable:f,panBy:h,findNode:v,multiSelectionActive:p,nodesSelectionActive:g,selectNodesOnDrag:m,removeSelectedElements:y,addSelectedNodes:w,updateNodePositions:V,emits:x}=Gi(),{onStart:b,onDrag:_,onStop:E,onClick:S,el:N,disabled:k,id:C,selectable:I,dragHandle:P}=e,T=Vue.ref(!1);let B,O=[],D=null,A={x:void 0,y:void 0},$={x:0,y:0},z=null,R=!1,L=0,H=!1;const Y=function(){const{viewport:e,snapGrid:t,snapToGrid:n}=Gi();return({sourceEvent:o})=>{const r=o.touches?o.touches[0].clientX:o.clientX,i=o.touches?o.touches[0].clientY:o.clientY,a={x:(r-e.value.x)/e.value.zoom,y:(i-e.value.y)/e.value.zoom};return u({xSnapped:n.value?t.value[0]*Math.round(a.x/t.value[0]):a.x,ySnapped:n.value?t.value[1]*Math.round(a.y/t.value[1]):a.y},a)}}(),G=({x:e,y:t})=>{A={x:e,y:t};let r=!1;if(O=O.map((i=>{const l={x:e-i.distance.x,y:t-i.distance.y};n.value&&(l.x=o.value[0]*Math.round(l.x/o.value[0]),l.y=o.value[1]*Math.round(l.y/o.value[1]));const{computedPosition:u}=pr(i,l,x.error,a.value,i.parentNode?v(i.parentNode):void 0);return r=r||i.position.x!==u.x||i.position.y!==u.y,i.position=u,i})),r&&(V(O,!0,!0),T.value=!0,z)){const[e,t]=fr({id:C,dragItems:O,findNode:v});_({event:z,node:e,nodes:t})}},F=()=>{var e,t;if(!D)return;const[n,o]=nr($,D,d.value);if(0!==n||0!==o){const r={x:(null!=(e=A.x)?e:0)-n/s.value.zoom,y:(null!=(t=A.y)?t:0)-o/s.value.zoom};h({x:n,y:o})&&G(r)}L=requestAnimationFrame(F)},X=(e,t)=>{R=!0;const n=v(C);m.value||p.value||!n||n.selected||y(),n&&Vue.toValue(I)&&m.value&&Or(n,p.value,w,y,g,!1,t);const o=Y(e);if(A=o,O=function(e,t,n,o,r){var i,a;const l=[];for(const u of e)!u.selected&&u.id!==r||u.parentNode&&Qo(u,o)||!(u.draggable||t&&void 0===u.draggable)||l.push(Vue.markRaw({id:u.id,position:u.position||{x:0,y:0},distance:{x:n.x-(null==(i=u.computedPosition)?void 0:i.x)||0,y:n.y-(null==(a=u.computedPosition)?void 0:a.y)||0},from:u.computedPosition,extent:u.extent,parentNode:u.parentNode,dimensions:u.dimensions,expandParent:u.expandParent}));return l}(i.value,f.value,o,v,C),O.length){const[t,n]=fr({id:C,dragItems:O,findNode:v});b({event:e.sourceEvent,node:t,nodes:n})}};return Vue.watch([()=>Vue.toValue(k),N],(([e,n],o,i)=>{if(n){const o=Xe(n);e||(B=function(){var e,t,n,o,r=tt,i=nt,a=ot,l=rt,u={},s=M("start","drag","end"),c=0,d=0;function f(e){e.on("mousedown.drag",h).filter(l).on("touchstart.drag",g).on("touchmove.drag",m,je).on("touchend.drag touchcancel.drag",y).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(a,l){if(!o&&r.call(this,a,l)){var u=w(this,i.call(this,a,l),a,l,"mouse");u&&(Xe(a.view).on("mousemove.drag",v,Ze).on("mouseup.drag",p,Ze),qe(a.view),Ke(a),n=!1,e=a.clientX,t=a.clientY,u("start",a))}}function v(o){if(We(o),!n){var r=o.clientX-e,i=o.clientY-t;n=r*r+i*i>d}u.mouse("drag",o)}function p(e){Xe(e.view).on("mousemove.drag mouseup.drag",null),Je(e.view,n),We(e),u.mouse("end",e)}function g(e,t){if(r.call(this,e,t)){var n,o,a=e.changedTouches,l=i.call(this,e,t),u=a.length;for(n=0;n<u;++n)(o=w(this,l,e,t,a[n].identifier,a[n]))&&(Ke(e),o("start",e,a[n]))}}function m(e){var t,n,o=e.changedTouches,r=o.length;for(t=0;t<r;++t)(n=u[o[t].identifier])&&(We(e),n("drag",e,o[t]))}function y(e){var t,n,r=e.changedTouches,i=r.length;for(o&&clearTimeout(o),o=setTimeout((function(){o=null}),500),t=0;t<i;++t)(n=u[r[t].identifier])&&(Ke(e),n("end",e,r[t]))}function w(e,t,n,o,r,i){var l,d,h,v=s.copy(),p=Ue(i||n,t);if(null!=(h=a.call(e,new et("beforestart",{sourceEvent:n,target:f,identifier:r,active:c,x:p[0],y:p[1],dx:0,dy:0,dispatch:v}),o)))return l=h.x-p[0]||0,d=h.y-p[1]||0,function n(i,a,s){var g,m=p;switch(i){case"start":u[r]=n,g=c++;break;case"end":delete u[r],--c;case"drag":p=Ue(s||a,t),g=c}v.call(i,e,new et(i,{sourceEvent:a,subject:h,target:f,identifier:r,active:g,x:p[0]+l,y:p[1]+d,dx:p[0]-m[0],dy:p[1]-m[1],dispatch:v}),o)}}return f.filter=function(e){return arguments.length?(r="function"==typeof e?e:Qe(!!e),f):r},f.container=function(e){return arguments.length?(i="function"==typeof e?e:Qe(e),f):i},f.subject=function(e){return arguments.length?(a="function"==typeof e?e:Qe(e),f):a},f.touchable=function(e){return arguments.length?(l="function"==typeof e?e:Qe(!!e),f):l},f.on=function(){var e=s.on.apply(s,arguments);return e===s?f:e},f.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,f):Math.sqrt(d)},f}().on("start",(e=>((e,n)=>{var o;"touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||(0===l.value&&X(e,n),A=Y(e),D=(null==(o=t.value)?void 0:o.getBoundingClientRect())||null,$=Er(e.sourceEvent,D))})(e,n))).on("drag",(e=>((e,t)=>{var n,o;const r=Y(e);if(!H&&R&&c.value&&(H=!0,F()),!R){const i=r.xSnapped-(null!=(n=A.x)?n:0),a=r.ySnapped-(null!=(o=A.y)?o:0);Math.sqrt(i*i+a*a)>l.value&&X(e,t)}(A.x!==r.xSnapped||A.y!==r.ySnapped)&&O.length&&R&&(z=e.sourceEvent,$=Er(e.sourceEvent,D),G(r))})(e,n))).on("end",(e=>(e=>{var t,n;if(R){if(T.value=!1,H=!1,R=!1,cancelAnimationFrame(L),O.length){V(O,!1,!1);const[t,n]=fr({id:C,dragItems:O,findNode:v});E({event:e.sourceEvent,node:t,nodes:n})}}else{const o=Y(e),r=o.xSnapped-(null!=(t=A.x)?t:0),i=o.ySnapped-(null!=(n=A.y)?n:0),a=Math.sqrt(r*r+i*i);0!==a&&a<=l.value&&(null==S||S(e.sourceEvent))}})(e))).filter((e=>{const t=e.target,o=Vue.toValue(P);return!e.button&&(!r.value||!dr(t,`.${r.value}`,n)&&(!o||dr(t,o,n)))})),o.call(B)),i((()=>{o.on(".drag",null),B&&(B.on("start",null),B.on("drag",null),B.on("end",null))}))}})),T}function Zr(e,t){const n={doubleClick:cr(),click:cr(),mouseEnter:cr(),mouseMove:cr(),mouseLeave:cr(),contextMenu:cr(),updateStart:cr(),update:cr(),updateEnd:cr()};return n.doubleClick.on((n=>{var o,r;t.edgeDoubleClick(n),null==(r=null==(o=e.events)?void 0:o.doubleClick)||r.call(o,n)})),n.click.on((n=>{var o,r;t.edgeClick(n),null==(r=null==(o=e.events)?void 0:o.click)||r.call(o,n)})),n.mouseEnter.on((n=>{var o,r;t.edgeMouseEnter(n),null==(r=null==(o=e.events)?void 0:o.mouseEnter)||r.call(o,n)})),n.mouseMove.on((n=>{var o,r;t.edgeMouseMove(n),null==(r=null==(o=e.events)?void 0:o.mouseMove)||r.call(o,n)})),n.mouseLeave.on((n=>{var o,r;t.edgeMouseLeave(n),null==(r=null==(o=e.events)?void 0:o.mouseLeave)||r.call(o,n)})),n.contextMenu.on((n=>{var o,r;t.edgeContextMenu(n),null==(r=null==(o=e.events)?void 0:o.contextMenu)||r.call(o,n)})),n.updateStart.on((n=>{var o,r;t.edgeUpdateStart(n),null==(r=null==(o=e.events)?void 0:o.updateStart)||r.call(o,n)})),n.update.on((n=>{var o,r;t.edgeUpdate(n),null==(r=null==(o=e.events)?void 0:o.update)||r.call(o,n)})),n.updateEnd.on((n=>{var o,r;t.edgeUpdateEnd(n),null==(r=null==(o=e.events)?void 0:o.updateEnd)||r.call(o,n)})),Object.entries(n).reduce(((e,[t,n])=>(e.emit[t]=n.trigger,e.on[t]=n.on,e)),{emit:{},on:{}})}function Kr(){return!0}function Wr({handleId:e,nodeId:t,type:n,isValidConnection:o,edgeUpdaterType:r,onEdgeUpdate:i,onEdgeUpdateEnd:l}){const{vueFlowRef:u,connectionMode:s,connectionRadius:c,connectOnClick:d,connectionClickStartHandle:f,nodesConnectable:h,autoPanOnConnect:v,autoPanSpeed:p,findNode:g,panBy:m,startConnection:y,updateConnection:w,endConnection:V,emits:x,viewport:b,edges:_,nodes:E,isValidConnection:S}=Gi();let N=null,k=!1,C=null,M=null;return{handlePointerDown:function(d){var f;const h="target"===Vue.toValue(n),I=_r(d),P=$o(d.target);if(I&&0===d.button||!I){let n=function(n){Y=Er(n,L);const{handle:o,validHandleResult:r}=function(e,t,n,o,r,i){const{x:l,y:u}=Er(e),s=t.elementsFromPoint(l,u).find((e=>e.classList.contains("vue-flow__handle")));if(s){const e=s.getAttribute("data-nodeid");if(e){const t=Mr(void 0,s),o=s.getAttribute("data-handleid"),a=i({nodeId:e,id:o,type:t});if(a){const i=r.find((n=>n.nodeId===e&&n.type===t&&n.id===o));return{handle:{id:o,type:t,nodeId:e,x:(null==i?void 0:i.x)||n.x,y:(null==i?void 0:i.y)||n.y},validHandleResult:a}}}}let c=[],d=Number.POSITIVE_INFINITY;for(const v of r){const e=Math.sqrt(a(v.x-n.x,2)+a(v.y-n.y,2));if(e<=o){const t=i(v);e<=d&&(e<d?c=[{handle:v,validHandleResult:t}]:e===d&&c.push({handle:v,validHandleResult:t}),d=e)}}if(!c.length)return{handle:null,validHandleResult:{handleDomNode:null,isValid:!1,connection:{source:"",target:"",sourceHandle:null,targetHandle:null},endHandle:null}};if(1===c.length)return c[0];const f=c.some((({validHandleResult:e})=>e.isValid)),h=c.some((({handle:e})=>"target"===e.type));return c.find((({handle:e,validHandleResult:t})=>h?"target"===e.type:!f||t.isValid))||c[0]}(n,P,jo(Y,b.value,!1,[1,1]),c.value,F,(o=>Cr(n,o,s.value,Vue.toValue(t),Vue.toValue(e),h?"target":"source",O,P,_.value,E.value,g)));if(B=o,G||(X(),G=!0),N=r.connection,k=r.isValid,C=r.handleDomNode,!(k&&B&&(null==M?void 0:M.endHandle)&&r.endHandle&&M.endHandle.type===r.endHandle.type&&M.endHandle.nodeId===r.endHandle.nodeId&&M.endHandle.handleId===r.endHandle.handleId)){if(w(B&&k?Uo({x:B.x,y:B.y},b.value):Y,r.endHandle,function(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}(!!B,k)),M=r,!B&&!k&&!C)return Nr(H);N&&N.source!==N.target&&C&&(Nr(H),H=C,C.classList.add("connecting","vue-flow__handle-connecting"),C.classList.toggle("valid",k),C.classList.toggle("vue-flow__handle-valid",k))}},I=function(e){(B||C)&&N&&k&&(i?i(e,N):x.connect(N)),x.connectEnd(e),r&&(null==l||l(e)),Nr(H),cancelAnimationFrame(D),V(e),G=!1,k=!1,N=null,C=null,P.removeEventListener("mousemove",n),P.removeEventListener("mouseup",I),P.removeEventListener("touchmove",n),P.removeEventListener("touchend",I)};const T=g(Vue.toValue(t));let B,O=Vue.toValue(o)||S.value||Kr;!O&&T&&(O=(h?T.isValidSourcePos:T.isValidTargetPos)||Kr);let D=0;const{x:A,y:$}=Er(d),z=null==P?void 0:P.elementFromPoint(A,$),R=Mr(Vue.toValue(r),z),L=null==(f=u.value)?void 0:f.getBoundingClientRect();if(!L||!R)return;let H,Y=Er(d,L),G=!1;const F=function({nodes:e,nodeId:t,handleId:n,handleType:o}){const r=[];for(let i=0;i<e.length;i++){const a=e[i],{handleBounds:l}=a;let u=[],s=[];l&&(u=kr(a,l,"source",`${t}-${n}-${o}`),s=kr(a,l,"target",`${t}-${n}-${o}`)),r.push(...u,...s)}return r}({nodes:E.value,nodeId:Vue.toValue(t),handleId:Vue.toValue(e),handleType:R}),X=()=>{if(!v.value)return;const[e,t]=nr(Y,L,p.value);m({x:e,y:t}),D=requestAnimationFrame(X)};y({nodeId:Vue.toValue(t),handleId:Vue.toValue(e),type:R,position:(null==z?void 0:z.getAttribute("data-handlepos"))||wo.Top},{x:A-L.left,y:$-L.top}),x.connectStart({event:d,nodeId:Vue.toValue(t),handleId:Vue.toValue(e),handleType:R}),P.addEventListener("mousemove",n),P.addEventListener("mouseup",I),P.addEventListener("touchmove",n),P.addEventListener("touchend",I)}},handleClick:function(r){if(!d.value)return;const i="target"===Vue.toValue(n);if(f.value){let a=Vue.toValue(o)||S.value||Kr;const l=g(Vue.toValue(t));if(!a&&l&&(a=(i?l.isValidSourcePos:l.isValidTargetPos)||Kr),l&&!1===(void 0===l.connectable?h.value:l.connectable))return;const u=$o(r.target),{connection:c,isValid:d}=Cr(r,{nodeId:Vue.toValue(t),id:Vue.toValue(e),type:Vue.toValue(n)},s.value,f.value.nodeId,f.value.handleId||null,f.value.type,a,u,_.value,E.value,g),v=c.source===c.target;d&&!v&&x.connect(c),x.clickConnectEnd(r),V(r,!0)}else x.clickConnectStart({event:r,nodeId:Vue.toValue(t),handleId:Vue.toValue(e)}),y({nodeId:Vue.toValue(t),type:Vue.toValue(n),handleId:Vue.toValue(e)},void 0,!0)}}}function qr(){return Vue.inject(Yr,"")}function Jr(e){var t;const n=null!=(t=null!=e?e:qr())?t:"",o=Vue.inject(Gr,Vue.ref(null)),{findNode:r,edges:i,emits:a}=Gi(),l=r(n);return l||a.error(new br(Vr.NODE_NOT_FOUND,n)),{id:n,nodeEl:o,node:l,parentNode:Vue.computed((()=>r(l.parentNode))),connectedEdges:Vue.computed((()=>qo([l],i.value)))}}function Qr(e,t){const n={doubleClick:cr(),click:cr(),mouseEnter:cr(),mouseMove:cr(),mouseLeave:cr(),contextMenu:cr(),dragStart:cr(),drag:cr(),dragStop:cr()};return n.doubleClick.on((n=>{var o,r;t.nodeDoubleClick(n),null==(r=null==(o=e.events)?void 0:o.doubleClick)||r.call(o,n)})),n.click.on((n=>{var o,r;t.nodeClick(n),null==(r=null==(o=e.events)?void 0:o.click)||r.call(o,n)})),n.mouseEnter.on((n=>{var o,r;t.nodeMouseEnter(n),null==(r=null==(o=e.events)?void 0:o.mouseEnter)||r.call(o,n)})),n.mouseMove.on((n=>{var o,r;t.nodeMouseMove(n),null==(r=null==(o=e.events)?void 0:o.mouseMove)||r.call(o,n)})),n.mouseLeave.on((n=>{var o,r;t.nodeMouseLeave(n),null==(r=null==(o=e.events)?void 0:o.mouseLeave)||r.call(o,n)})),n.contextMenu.on((n=>{var o,r;t.nodeContextMenu(n),null==(r=null==(o=e.events)?void 0:o.contextMenu)||r.call(o,n)})),n.dragStart.on((n=>{var o,r;t.nodeDragStart(n),null==(r=null==(o=e.events)?void 0:o.dragStart)||r.call(o,n)})),n.drag.on((n=>{var o,r;t.nodeDrag(n),null==(r=null==(o=e.events)?void 0:o.drag)||r.call(o,n)})),n.dragStop.on((n=>{var o,r;t.nodeDragStop(n),null==(r=null==(o=e.events)?void 0:o.dragStop)||r.call(o,n)})),Object.entries(n).reduce(((e,[t,n])=>(e.emit[t]=n.trigger,e.on[t]=n.on,e)),{emit:{},on:{}})}function ei(){const{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:o,snapGrid:r,snapToGrid:i,nodesDraggable:a,emits:l}=Gi();return(u,s=!1)=>{const c=i.value?r.value[0]:5,d=i.value?r.value[1]:5,f=s?4:1,h=u.x*c*f,v=u.y*d*f,p=[];for(const n of e.value)if(n.draggable||a&&void 0===n.draggable){const e={x:n.computedPosition.x+h,y:n.computedPosition.y+v},{computedPosition:r}=pr(n,e,l.error,t.value,n.parentNode?o(n.parentNode):void 0);p.push({id:n.id,position:r,from:n.position,distance:{x:u.x,y:u.y},dimensions:n.dimensions})}n(p,!0,!1)}}const ti=.1;function ni(){return Pr(),Promise.resolve(!1)}const oi={zoomIn:ni,zoomOut:ni,zoomTo:ni,fitView:ni,setCenter:ni,fitBounds:ni,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:ni,setTransform:ni,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function ri(e,t=0,n){return e.transition().duration(t).on("end",n)}function ii(e,t,n){const o=Vue.effectScope(!0);return o.run((()=>{const r=()=>{o.run((()=>{const e=e=>{return o=this,r=null,i=function*(){let o=e;"function"==typeof t.autoConnect&&(o=yield t.autoConnect(e)),!1!==o&&n.addEdges([o])},new Promise(((e,t)=>{var n=e=>{try{l(i.next(e))}catch(n){t(n)}},a=e=>{try{l(i.throw(e))}catch(n){t(n)}},l=t=>t.done?e(t.value):Promise.resolve(t.value).then(n,a);l((i=i.apply(o,r)).next())}));var o,r,i};Vue.watch((()=>t.autoConnect),(()=>{Dr(t.autoConnect)&&(n.autoConnect.value=t.autoConnect)}),{immediate:!0}),Vue.watch(n.autoConnect,((t,o,r)=>{t?n.onConnect(e):n.hooks.value.connect.off(e),r((()=>{n.hooks.value.connect.off(e)}))}),{immediate:!0})}))};o.run((()=>{let t,o,r=!(!n.nodes.value.length&&!n.edges.value.length);t=V([e.modelValue,()=>{var t,n;return null==(n=null==(t=e.modelValue)?void 0:t.value)?void 0:n.length}],(([e])=>{e&&Array.isArray(e)&&(null==o||o.pause(),n.setElements(e),o||r||!e.length?null==o||o.resume():r=!0)})),o=V([n.nodes,n.edges,()=>n.edges.value.length,()=>n.nodes.value.length],(([n,o])=>{var r;(null==(r=e.modelValue)?void 0:r.value)&&Array.isArray(e.modelValue.value)&&(null==t||t.pause(),e.modelValue.value=[...n,...o],Vue.nextTick((()=>{null==t||t.resume()})))}),{immediate:r}),Vue.onScopeDispose((()=>{null==t||t.stop(),null==o||o.stop()}))})),o.run((()=>{let t,o,r=!!n.nodes.value.length;t=V([e.nodes,()=>{var t,n;return null==(n=null==(t=e.nodes)?void 0:t.value)?void 0:n.length}],(([e])=>{e&&Array.isArray(e)&&(null==o||o.pause(),n.setNodes(e),o||r||!e.length?null==o||o.resume():r=!0)})),o=V([n.nodes,()=>n.nodes.value.length],(([n])=>{var o;(null==(o=e.nodes)?void 0:o.value)&&Array.isArray(e.nodes.value)&&(null==t||t.pause(),e.nodes.value=[...n],Vue.nextTick((()=>{null==t||t.resume()})))}),{immediate:r}),Vue.onScopeDispose((()=>{null==t||t.stop(),null==o||o.stop()}))})),o.run((()=>{let t,o,r=!!n.edges.value.length;t=V([e.edges,()=>{var t,n;return null==(n=null==(t=e.edges)?void 0:t.value)?void 0:n.length}],(([e])=>{e&&Array.isArray(e)&&(null==o||o.pause(),n.setEdges(e),o||r||!e.length?null==o||o.resume():r=!0)})),o=V([n.edges,()=>n.edges.value.length],(([n])=>{var o;(null==(o=e.edges)?void 0:o.value)&&Array.isArray(e.edges.value)&&(null==t||t.pause(),e.edges.value=[...n],Vue.nextTick((()=>{null==t||t.resume()})))}),{immediate:r}),Vue.onScopeDispose((()=>{null==t||t.stop(),null==o||o.stop()}))})),o.run((()=>{Vue.watch((()=>t.minZoom),(()=>{t.minZoom&&Dr(t.minZoom)&&n.setMinZoom(t.minZoom)}),{immediate:!0})})),o.run((()=>{Vue.watch((()=>t.maxZoom),(()=>{t.maxZoom&&Dr(t.maxZoom)&&n.setMaxZoom(t.maxZoom)}),{immediate:!0})})),o.run((()=>{Vue.watch((()=>t.translateExtent),(()=>{t.translateExtent&&Dr(t.translateExtent)&&n.setTranslateExtent(t.translateExtent)}),{immediate:!0})})),o.run((()=>{Vue.watch((()=>t.nodeExtent),(()=>{t.nodeExtent&&Dr(t.nodeExtent)&&n.setNodeExtent(t.nodeExtent)}),{immediate:!0})})),o.run((()=>{Vue.watch((()=>t.applyDefault),(()=>{Dr(t.applyDefault)&&(n.applyDefault.value=t.applyDefault)}),{immediate:!0})})),r(),(()=>{const e=["id","modelValue","translateExtent","nodeExtent","edges","nodes","maxZoom","minZoom","applyDefault","autoConnect"];for(const r of Object.keys(t)){const i=r;if(!e.includes(i)){const e=Vue.toRef((()=>t[i])),r=n[i];Vue.isRef(r)&&o.run((()=>{Vue.watch(e,(e=>{Dr(e)&&(r.value=e)}),{immediate:!0})}))}}})()})),()=>o.stop()}function ai(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],nodeExtent:[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],selectionMode:Vo.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:Eo.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:"#b1b1b7",connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:xo.Bezier,style:{}},connectionMode:bo.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:Number.NaN,y:Number.NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:"Shift",multiSelectionKeyCode:Sr()?"Meta":"Control",zoomActivationKeyCode:Sr()?"Meta":"Control",deleteKeyCode:"Backspace",panActivationKeyCode:"Space",hooks:{edgesChange:cr(),nodesChange:cr(),nodeDoubleClick:cr(),nodeClick:cr(),nodeMouseEnter:cr(),nodeMouseMove:cr(),nodeMouseLeave:cr(),nodeContextMenu:cr(),nodeDragStart:cr(),nodeDrag:cr(),nodeDragStop:cr(),nodesInitialized:cr(),miniMapNodeClick:cr(),miniMapNodeDoubleClick:cr(),miniMapNodeMouseEnter:cr(),miniMapNodeMouseMove:cr(),miniMapNodeMouseLeave:cr(),connect:cr(),connectStart:cr(),connectEnd:cr(),clickConnectStart:cr(),clickConnectEnd:cr(),paneReady:cr(),init:cr(),move:cr(),moveStart:cr(),moveEnd:cr(),selectionDragStart:cr(),selectionDrag:cr(),selectionDragStop:cr(),selectionContextMenu:cr(),selectionStart:cr(),selectionEnd:cr(),viewportChangeStart:cr(),viewportChange:cr(),viewportChangeEnd:cr(),paneScroll:cr(),paneClick:cr(),paneContextMenu:cr(),paneMouseEnter:cr(),paneMouseMove:cr(),paneMouseLeave:cr(),edgeContextMenu:cr(),edgeMouseEnter:cr(),edgeMouseMove:cr(),edgeMouseLeave:cr(),edgeDoubleClick:cr(),edgeClick:cr(),edgeUpdateStart:cr(),edgeUpdate:cr(),edgeUpdateEnd:cr(),updateNodeInternals:cr(),error:cr((e=>Pr(e.message)))},applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:"nodrag",noWheelClassName:"nowheel",noPanClassName:"nopan",defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:""}}const li=["id","vueFlowRef","viewportRef","initialized","modelValue","nodes","edges","maxZoom","minZoom","translateExtent","hooks","defaultEdgeOptions"];function ui(e,t,n){const o=function(e){function t(t,n){return new Promise((o=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleBy(ri(e.d3Selection,n,(()=>{o(!0)})),t):o(!1)}))}function n(t,n,o,r){return new Promise((i=>{const{x:a,y:l}=Ao({x:-t,y:-n},e.translateExtent),u=so.translate(-a,-l).scale(o);e.d3Selection&&e.d3Zoom?e.d3Zoom.transform(ri(e.d3Selection,r,(()=>{i(!0)})),u):i(!1)}))}return Vue.computed((()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:e=>t(1.2,null==e?void 0:e.duration),zoomOut:e=>t(1/1.2,null==e?void 0:e.duration),zoomTo:(t,n)=>new Promise((o=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.scaleTo(ri(e.d3Selection,null==n?void 0:n.duration,(()=>{o(!0)})),t):o(!1)})),setViewport:(e,t)=>n(e.x,e.y,e.zoom,null==t?void 0:t.duration),setTransform:(e,t)=>n(e.x,e.y,e.zoom,null==t?void 0:t.duration),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(t={padding:ti,includeHiddenNodes:!1,duration:0})=>{var o,r,i,a,l;const u=[];for(const n of e.nodes)n.dimensions.width&&n.dimensions.height&&((null==t?void 0:t.includeHiddenNodes)||!n.hidden)&&(!(null==(a=t.nodes)?void 0:a.length)||(null==(l=t.nodes)?void 0:l.length)&&t.nodes.includes(n.id))&&u.push(n);if(!u.length)return Promise.resolve(!1);const s=Ko(u),{x:c,y:d,zoom:f}=Jo(s,e.dimensions.width,e.dimensions.height,null!=(o=t.minZoom)?o:e.minZoom,null!=(r=t.maxZoom)?r:e.maxZoom,null!=(i=t.padding)?i:ti,t.offset);return n(c,d,f,null==t?void 0:t.duration)},setCenter:(t,o,r)=>{const i=void 0!==(null==r?void 0:r.zoom)?r.zoom:e.maxZoom;return n(e.dimensions.width/2-t*i,e.dimensions.height/2-o*i,i,null==r?void 0:r.duration)},fitBounds:(t,o={padding:ti})=>{const{x:r,y:i,zoom:a}=Jo(t,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,o.padding);return n(r,i,a,null==o?void 0:o.duration)},project:t=>jo(t,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:t=>{if(e.vueFlowRef){const{x:n,y:o}=e.vueFlowRef.getBoundingClientRect();return jo({x:t.x-n,y:t.y-o},e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:t=>{if(e.vueFlowRef){const{x:n,y:o}=e.vueFlowRef.getBoundingClientRect();return Uo({x:t.x+n,y:t.y+o},e.viewport)}return{x:0,y:0}}}:oi))}(e),r=t=>{const n=null!=t?t:[];e.hooks.updateNodeInternals.trigger(n)},i=t=>qo(t,e.edges),a=e=>{if(e)return t.value.get(e)},l=e=>{if(e)return n.value.get(e)},d=(o,r)=>{const i=new Set,a=new Set;for(const e of o)Ro(e)?i.add(e.id):zo(e)&&a.add(e.id);const l=sr(t.value,i,!0),u=sr(n.value,a);if(e.multiSelectionActive){for(const e of i)l.push(ir(e,r));for(const e of a)u.push(ir(e,r))}l.length&&e.hooks.nodesChange.trigger(l),u.length&&e.hooks.edgesChange.trigger(u)},f=t=>{var n;null==(n=e.d3Zoom)||n.scaleExtent([t,e.maxZoom]),e.minZoom=t},h=t=>{var n;null==(n=e.d3Zoom)||n.scaleExtent([e.minZoom,t]),e.maxZoom=t},v=t=>{var n;null==(n=e.d3Zoom)||n.translateExtent(t),e.translateExtent=t},p=t=>{const n=t instanceof Function?t(e.nodes):t;(e.initialized||n.length)&&(e.nodes=$r(n,a,e.hooks.error.trigger))},g=t=>{const n=t instanceof Function?t(e.edges):t;if(!e.initialized&&!n.length)return;const o=Lr(n,e.isValidConnection,a,l,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);zr(e.connectionLookup,o),e.edges=o},m=t=>{const n=t instanceof Function?t([...e.nodes,...e.edges]):t;(e.initialized||n.length)&&(p(n.filter(Ro)),g(n.filter(zo)))},y=e=>{const t=Ho((n=e).width)&&Ho(n.height)&&Ho(n.x)&&Ho(n.y);var n;const o=t?null:Lo(e)?e:a(e.id);if(!t&&!o)return[null,null,t];return[t?e:To(o),o,t]},w=t=>{const n=t instanceof Function?t(e):t,o=["d3Zoom","d3Selection","d3ZoomHandler","viewportRef","vueFlowRef","dimensions","hooks"];Dr(n.defaultEdgeOptions)&&(e.defaultEdgeOptions=n.defaultEdgeOptions);const r=n.modelValue||n.nodes||n.edges?[]:void 0;r&&(n.modelValue&&r.push(...n.modelValue),n.nodes&&r.push(...n.nodes),n.edges&&r.push(...n.edges),m(r));for(const i of Object.keys(n)){const t=i,r=n[t];![...li,...o].includes(t)&&Dr(r)&&(e[t]=r)}b((()=>e.d3Zoom)).not.toBeNull().then((()=>{Dr(n.maxZoom)&&h(n.maxZoom),Dr(n.minZoom)&&f(n.minZoom),Dr(n.translateExtent)&&v(n.translateExtent)})),e.initialized||(e.initialized=!0)};return{updateNodePositions:(t,n,o)=>{var r,i,l,u;const s=[];for(const e of t){const t={id:e.id,type:"position",dragging:o,from:e.from};if(n&&(t.position=e.position,e.parentNode)){const n=a(e.parentNode);t.position={x:t.position.x-(null!=(r=null==(l=null==n?void 0:n.computedPosition)?void 0:l.x)?r:0),y:t.position.y-(null!=(i=null==(u=null==n?void 0:n.computedPosition)?void 0:u.y)?i:0)}}s.push(t)}(null==s?void 0:s.length)&&e.hooks.nodesChange.trigger(s)},updateNodeDimensions:t=>{if(!e.vueFlowRef)return;const n=e.vueFlowRef.querySelector(".vue-flow__transformationpane");if(!n)return;const r=window.getComputedStyle(n),{m22:i}=new window.DOMMatrixReadOnly(r.transform),l=[];for(let e=0;e<t.length;++e){const n=t[e],o=a(n.id);if(o){const e=Oo(n.nodeElement);if(!(!e.width||!e.height||o.dimensions.width===e.width&&o.dimensions.height===e.height&&!n.forceUpdate)){const t=n.nodeElement.getBoundingClientRect();o.dimensions=e,o.handleBounds.source=Br(".source",n.nodeElement,t,i),o.handleBounds.target=Br(".target",n.nodeElement,t,i),l.push({id:o.id,type:"dimensions",dimensions:e})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&o.value.fitView().then((()=>{e.fitViewOnInitDone=!0})),l.length&&e.hooks.nodesChange.trigger(l)},setElements:m,setNodes:p,setEdges:g,addNodes:t=>{let n=t instanceof Function?t(e.nodes):t;n=Array.isArray(n)?n:[n];const o=$r(n,a,e.hooks.error.trigger),r=[];for(const e of o)r.push(ar(e));r.length&&e.hooks.nodesChange.trigger(r)},addEdges:t=>{let n=t instanceof Function?t(e.edges):t;n=Array.isArray(n)?n:[n];const o=Lr(n,e.isValidConnection,a,l,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),r=[];for(const e of o)r.push(ar(e));r.length&&e.hooks.edgesChange.trigger(r)},removeNodes:(t,n=!0,o=!1)=>{const r=t instanceof Function?t(e.nodes):t,l=Array.isArray(r)?r:[r],u=[],s=[];function c(e){const t=i(e);for(const n of t)Dr(n.deletable)&&!n.deletable||s.push(ur(n.id,n.source,n.target,n.sourceHandle,n.targetHandle))}function d(t){const o=[];for(const n of e.nodes)n.parentNode===t&&o.push(n);if(o.length){for(const e of o)u.push(lr(e.id));n&&c(o);for(const e of o)d(e.id)}}for(const e of l){const t="string"==typeof e?a(e):e;t&&(Dr(t.deletable)&&!t.deletable||(u.push(lr(t.id)),n&&c([t]),o&&d(t.id)))}s.length&&e.hooks.edgesChange.trigger(s),u.length&&e.hooks.nodesChange.trigger(u)},removeEdges:t=>{const n=t instanceof Function?t(e.edges):t,o=Array.isArray(n)?n:[n],r=[];for(const e of o){const t="string"==typeof e?l(e):e;t&&(Dr(t.deletable)&&!t.deletable||r.push(ur("string"==typeof e?e:e.id,t.source,t.target,t.sourceHandle,t.targetHandle)))}e.hooks.edgesChange.trigger(r)},findNode:a,findEdge:l,updateEdge:(t,n,o=!0)=>function(e,t,n,o,r,i){if(!t.source||!t.target)return i(new br(Vr.EDGE_INVALID,e.id)),!1;const a=o(e.id);if(!a)return i(new br(Vr.EDGE_NOT_FOUND,e.id)),!1;const l=e,{id:d}=l,f=c(l,["id"]),h=s(u({},f),{id:r?Xo(t):d,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle});return n.splice(n.indexOf(a),1,h),h}(t,n,e.edges,l,o,e.hooks.error.trigger),updateEdgeData:(e,t,n={replace:!1})=>{const o=l(e);if(!o)return;const r="function"==typeof t?t(o):t;o.data=n.replace?r:u(u({},o.data),r)},updateNode:(t,n,o={replace:!1})=>{const r=a(t);if(!r)return;const i="function"==typeof n?n(r):n;o.replace?e.nodes.splice(e.nodes.indexOf(r),1,i):Object.assign(r,i)},updateNodeData:(e,t,n={replace:!1})=>{const o=a(e);if(!o)return;const r="function"==typeof t?t(o):t;o.data=n.replace?r:u(u({},o.data),r)},applyEdgeChanges:t=>{const n=rr(t,e.edges);return zr(e.connectionLookup,n),n},applyNodeChanges:t=>rr(t,e.nodes),addSelectedElements:e=>{d(e,!0)},addSelectedNodes:o=>{if(e.multiSelectionActive){const t=o.map((e=>ir(e.id,!0)));e.hooks.nodesChange.trigger(t)}else e.hooks.nodesChange.trigger(sr(t.value,new Set(o.map((e=>e.id))),!0)),e.hooks.edgesChange.trigger(sr(n.value))},addSelectedEdges:o=>{if(e.multiSelectionActive){const t=o.map((e=>ir(e.id,!0)));e.hooks.edgesChange.trigger(t)}else e.hooks.edgesChange.trigger(sr(n.value,new Set(o.map((e=>e.id))))),e.hooks.nodesChange.trigger(sr(t.value,new Set,!0))},setMinZoom:f,setMaxZoom:h,setTranslateExtent:v,setNodeExtent:t=>{e.nodeExtent=t,r()},setPaneClickDistance:t=>{var n;null==(n=e.d3Zoom)||n.clickDistance(t)},removeSelectedElements:t=>{if(!t||!t.length)return d([],!1);const n=t.reduce(((e,t)=>{const n=ir(t.id,!1);return Ro(t)?e.nodes.push(n):e.edges.push(n),e}),{nodes:[],edges:[]});n.nodes.length&&e.hooks.nodesChange.trigger(n.nodes),n.edges.length&&e.hooks.edgesChange.trigger(n.edges)},removeSelectedNodes:t=>{const n=(t||e.nodes).map((e=>(e.selected=!1,ir(e.id,!1))));e.hooks.nodesChange.trigger(n)},removeSelectedEdges:t=>{const n=(t||e.edges).map((e=>(e.selected=!1,ir(e.id,!1))));e.hooks.edgesChange.trigger(n)},startConnection:(t,n,o=!1)=>{o?e.connectionClickStartHandle=t:e.connectionStartHandle=t,e.connectionEndHandle=null,e.connectionStatus=null,n&&(e.connectionPosition=n)},updateConnection:(t,n=null,o=null)=>{e.connectionStartHandle&&(e.connectionPosition=t,e.connectionEndHandle=n,e.connectionStatus=o)},endConnection:(t,n)=>{e.connectionPosition={x:Number.NaN,y:Number.NaN},e.connectionEndHandle=null,e.connectionStatus=null,n?e.connectionClickStartHandle=null:e.connectionStartHandle=null},setInteractive:t=>{e.nodesDraggable=t,e.nodesConnectable=t,e.elementsSelectable=t},setState:w,getIntersectingNodes:(t,n=!0,o=e.nodes)=>{const[r,i,a]=y(t);if(!r)return[];const l=[];for(const u of o||e.nodes){if(!(a||u.id!==i.id&&u.computedPosition))continue;const e=Bo(To(u),r);(n&&e>0||e>=Number(r.width)*Number(r.height))&&l.push(u)}return l},getIncomers:t=>function(...e){if(3===e.length){const[t,n,o]=e;return Fo(t,n,o,"source")}const[t,n]=e,o="string"==typeof t?t:t.id;return n.filter((e=>zo(e)&&e.target===o)).map((e=>n.find((t=>Ro(t)&&t.id===e.source))))}(t,e.nodes,e.edges),getOutgoers:t=>function(...e){if(3===e.length){const[t,n,o]=e;return Fo(t,n,o,"target")}const[t,n]=e,o="string"==typeof t?t:t.id;return n.filter((e=>zo(e)&&e.source===o)).map((e=>n.find((t=>Ro(t)&&t.id===e.target))))}(t,e.nodes,e.edges),getConnectedEdges:i,isNodeIntersecting:(e,t,n=!0)=>{const[o]=y(e);if(!o)return!1;const r=Bo(o,t);return n&&r>0||r>=Number(o.width)*Number(o.height)},panBy:t=>{const{viewport:n,dimensions:o,d3Zoom:r,d3Selection:i,translateExtent:a}=e;if(!r||!i||!t.x&&!t.y)return!1;const l=so.translate(n.x+t.x,n.y+t.y).scale(n.zoom),u=[[0,0],[o.width,o.height]],s=r.constrain()(l,u,a),c=e.viewport.x!==s.x||e.viewport.y!==s.y||e.viewport.zoom!==s.k;return r.transform(i,s),c},fitView:e=>o.value.fitView(e),zoomIn:e=>o.value.zoomIn(e),zoomOut:e=>o.value.zoomOut(e),zoomTo:(e,t)=>o.value.zoomTo(e,t),setViewport:(e,t)=>o.value.setViewport(e,t),setTransform:(e,t)=>o.value.setTransform(e,t),getViewport:()=>o.value.getViewport(),getTransform:()=>o.value.getTransform(),setCenter:(e,t,n)=>o.value.setCenter(e,t,n),fitBounds:(e,t)=>o.value.fitBounds(e,t),project:e=>o.value.project(e),screenToFlowCoordinate:e=>o.value.screenToFlowCoordinate(e),flowToScreenCoordinate:e=>o.value.flowToScreenCoordinate(e),toObject:()=>{const t=[],n=[];for(const o of e.nodes){const e=o,{computedPosition:n,handleBounds:r,selected:i,dimensions:a,isParent:l,resizing:u,dragging:s,events:d}=e,f=c(e,["computedPosition","handleBounds","selected","dimensions","isParent","resizing","dragging","events"]);t.push(f)}for(const o of e.edges){const e=o,{selected:t,sourceNode:r,targetNode:i,events:a}=e,l=c(e,["selected","sourceNode","targetNode","events"]);n.push(l)}return JSON.parse(JSON.stringify({nodes:t,edges:n,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:t=>new Promise((n=>{const{nodes:r,edges:i,position:a,zoom:l,viewport:u}=t;if(r&&p(r),i&&g(i),(null==u?void 0:u.x)&&(null==u?void 0:u.y)||a){const t=(null==u?void 0:u.x)||a[0],r=(null==u?void 0:u.y)||a[1],i=(null==u?void 0:u.zoom)||l||e.viewport.zoom;return b((()=>o.value.viewportInitialized)).toBe(!0).then((()=>{o.value.setViewport({x:t,y:r,zoom:i}).then((()=>{n(!0)}))}))}n(!0)})),updateNodeInternals:r,viewportHelper:o,$reset:()=>{var t,n,o;const r=ai();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){const i=so.translate(null!=(t=r.defaultViewport.x)?t:0,null!=(n=r.defaultViewport.y)?n:0).scale(Do(null!=(o=r.defaultViewport.zoom)?o:1,r.minZoom,r.maxZoom)),a=e.viewportRef.getBoundingClientRect(),l=[[0,0],[a.width,a.height]],u=e.d3Zoom.constrain()(i,l,r.translateExtent);e.d3Zoom.transform(e.d3Selection,u)}w(r)},$destroy:()=>{}}}const si=["data-id","data-handleid","data-nodeid","data-handlepos"],ci=Vue.defineComponent(s(u({},{name:"Handle",compatConfig:{MODE:3}}),{props:{id:{default:null},type:{},position:{default:()=>wo.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:t}){const n=Vue.createPropsRestProxy(e,["position","connectable","connectableStart","connectableEnd","id"]),o=Vue.toRef((()=>{var e;return null!=(e=n.type)?e:"source"})),r=Vue.toRef((()=>{var e;return null!=(e=n.isValidConnection)?e:null})),{connectionStartHandle:i,connectionClickStartHandle:a,connectionEndHandle:l,vueFlowRef:s,nodesConnectable:c,noDragClassName:d,noPanClassName:f}=Gi(),{id:h,node:v,nodeEl:p,connectedEdges:g}=Jr(),m=Vue.ref(),y=Vue.toRef((()=>void 0===e.connectableStart||e.connectableStart)),w=Vue.toRef((()=>void 0===e.connectableEnd||e.connectableEnd)),V=Vue.toRef((()=>{var t,n,r,a,u,s;return(null==(t=i.value)?void 0:t.nodeId)===h&&(null==(n=i.value)?void 0:n.handleId)===e.id&&(null==(r=i.value)?void 0:r.type)===o.value||(null==(a=l.value)?void 0:a.nodeId)===h&&(null==(u=l.value)?void 0:u.handleId)===e.id&&(null==(s=l.value)?void 0:s.type)===o.value})),x=Vue.toRef((()=>{var t,n,r;return(null==(t=a.value)?void 0:t.nodeId)===h&&(null==(n=a.value)?void 0:n.handleId)===e.id&&(null==(r=a.value)?void 0:r.type)===o.value})),{handlePointerDown:b,handleClick:_}=Wr({nodeId:h,handleId:e.id,isValidConnection:r,type:o}),E=Vue.computed((()=>"string"==typeof e.connectable&&"single"===e.connectable?!g.value.some((t=>{const n=t[`${o.value}Handle`];return t[o.value]===h&&(!n||n===e.id)})):"number"==typeof e.connectable?g.value.filter((t=>{const n=t[`${o.value}Handle`];return t[o.value]===h&&(!n||n===e.id)})).length<e.connectable:"function"==typeof e.connectable?e.connectable(v,g.value):Dr(e.connectable)?e.connectable:c.value));function S(e){const t=_r(e);E.value&&y.value&&(t&&0===e.button||!t)&&b(e)}function N(e){h&&(a.value||y.value)&&E.value&&_(e)}return Vue.onMounted((()=>{var t,n;if(!v.dimensions.width||!v.dimensions.height)return;const r=null==(n=v.handleBounds[o.value])?void 0:n.find((t=>t.id===e.id));if(!s.value||r)return;const i=s.value.querySelector(".vue-flow__transformationpane");if(!(p.value&&m.value&&i&&e.id))return;const a=p.value.getBoundingClientRect(),l=m.value.getBoundingClientRect(),c=window.getComputedStyle(i),{m22:d}=new window.DOMMatrixReadOnly(c.transform),f=u({id:e.id,position:e.position,x:(l.left-a.left)/d,y:(l.top-a.top)/d},Oo(m.value));v.handleBounds[o.value]=[...null!=(t=v.handleBounds[o.value])?t:[],f]})),Vue.onUnmounted((()=>{const t=v.handleBounds[o.value];t&&(v.handleBounds[o.value]=t.filter((t=>t.id!==e.id)))})),t({handleClick:_,handlePointerDown:b,onClick:N,onPointerDown:S}),(t,n)=>(Vue.openBlock(),Vue.createElementBlock("div",{ref_key:"handle",ref:m,"data-id":`${Vue.unref(h)}-${e.id}-${o.value}`,"data-handleid":e.id,"data-nodeid":Vue.unref(h),"data-handlepos":t.position,class:Vue.normalizeClass(["vue-flow__handle",[`vue-flow__handle-${t.position}`,`vue-flow__handle-${e.id}`,Vue.unref(d),Vue.unref(f),o.value,{connectable:E.value,connecting:x.value,connectablestart:y.value,connectableend:w.value,connectionindicator:E.value&&(y.value&&!V.value||w.value&&V.value)}]]),onMousedown:S,onTouchstartPassive:S,onClick:N},[Vue.renderSlot(t.$slots,"default",{id:t.id})],42,si))}})),di=function({sourcePosition:e=wo.Bottom,targetPosition:t=wo.Top,label:n,connectable:o=!0,isValidTargetPos:r,isValidSourcePos:i,data:a}){const l=a.label||n;return[Vue.h(ci,{type:"target",position:t,connectable:o,isValidConnection:r}),"string"!=typeof l&&l?Vue.h(l):Vue.h("div",{innerHTML:l}),Vue.h(ci,{type:"source",position:e,connectable:o,isValidConnection:i})]};di.props=["sourcePosition","targetPosition","label","isValidTargetPos","isValidSourcePos","connectable","data"],di.inheritAttrs=!1,di.compatConfig={MODE:3};const fi=di,hi=function({targetPosition:e=wo.Top,label:t,connectable:n=!0,isValidTargetPos:o,data:r}){const i=r.label||t;return[Vue.h(ci,{type:"target",position:e,connectable:n,isValidConnection:o}),"string"!=typeof i&&i?Vue.h(i):Vue.h("div",{innerHTML:i})]};hi.props=["targetPosition","label","isValidTargetPos","connectable","data"],hi.inheritAttrs=!1,hi.compatConfig={MODE:3};const vi=hi,pi=function({sourcePosition:e=wo.Bottom,label:t,connectable:n=!0,isValidSourcePos:o,data:r}){const i=r.label||t;return["string"!=typeof i&&i?Vue.h(i):Vue.h("div",{innerHTML:i}),Vue.h(ci,{type:"source",position:e,connectable:n,isValidConnection:o})]};pi.props=["sourcePosition","label","isValidSourcePos","connectable","data"],pi.inheritAttrs=!1,pi.compatConfig={MODE:3};const gi=pi,mi=["transform"],yi=["width","height","x","y","rx","ry"],wi=["y"],Vi=Vue.defineComponent(s(u({},{name:"EdgeText",compatConfig:{MODE:3}}),{props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){const t=Vue.ref({x:0,y:0,width:0,height:0}),n=Vue.ref(null),o=Vue.computed((()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`));function r(){if(!n.value)return;const e=n.value.getBBox();e.width===t.value.width&&e.height===t.value.height||(t.value=e)}return Vue.onMounted(r),Vue.watch([()=>e.x,()=>e.y,n,()=>e.label],r),(e,r)=>(Vue.openBlock(),Vue.createElementBlock("g",{transform:o.value,class:"vue-flow__edge-textwrapper"},[e.labelShowBg?(Vue.openBlock(),Vue.createElementBlock("rect",{key:0,class:"vue-flow__edge-textbg",width:`${t.value.width+2*e.labelBgPadding[0]}px`,height:`${t.value.height+2*e.labelBgPadding[1]}px`,x:-e.labelBgPadding[0],y:-e.labelBgPadding[1],style:Vue.normalizeStyle(e.labelBgStyle),rx:e.labelBgBorderRadius,ry:e.labelBgBorderRadius},null,12,yi)):Vue.createCommentVNode("",!0),Vue.createElementVNode("text",Vue.mergeProps(e.$attrs,{ref_key:"el",ref:n,class:"vue-flow__edge-text",y:t.value.height/2,dy:"0.3em",style:e.labelStyle}),[Vue.renderSlot(e.$slots,"default",{},(()=>["string"!=typeof e.label?(Vue.openBlock(),Vue.createBlock(Vue.resolveDynamicComponent(e.label),{key:0})):(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:1},[Vue.createTextVNode(Vue.toDisplayString(e.label),1)],64))]))],16,wi)],8,mi))}})),xi=["id","d","marker-end","marker-start"],bi=["d","stroke-width"],_i=Vue.defineComponent(s(u({},{name:"BaseEdge",inheritAttrs:!1,compatConfig:{MODE:3}}),{props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},style:{},labelStyle:{},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){const n=Vue.createPropsRestProxy(e,["interactionWidth","labelShowBg"]),o=Vue.ref(null),r=Vue.ref(null),i=Vue.ref(null),a=Vue.useAttrs();return t({pathEl:o,interactionEl:r,labelEl:i}),(e,t)=>(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,[Vue.createElementVNode("path",{id:e.id,ref_key:"pathEl",ref:o,d:e.path,style:Vue.normalizeStyle(n.style),class:Vue.normalizeClass(["vue-flow__edge-path",Vue.unref(a).class]),"marker-end":e.markerEnd,"marker-start":e.markerStart},null,14,xi),e.interactionWidth?(Vue.openBlock(),Vue.createElementBlock("path",{key:0,ref_key:"interactionEl",ref:r,fill:"none",d:e.path,"stroke-width":e.interactionWidth,"stroke-opacity":0,class:"vue-flow__edge-interaction"},null,8,bi)):Vue.createCommentVNode("",!0),e.label&&e.labelX&&e.labelY?(Vue.openBlock(),Vue.createBlock(Vi,{key:1,ref_key:"labelEl",ref:i,x:e.labelX,y:e.labelY,label:e.label,"label-show-bg":e.labelShowBg,"label-bg-style":e.labelBgStyle,"label-bg-padding":e.labelBgPadding,"label-bg-border-radius":e.labelBgBorderRadius,"label-style":e.labelStyle},null,8,["x","y","label","label-show-bg","label-bg-style","label-bg-padding","label-bg-border-radius","label-style"])):Vue.createCommentVNode("",!0)],64))}}));function Ei({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,i=n<e?n+r:n-r,a=Math.abs(o-t)/2;return[i,o<t?o+a:o-a,r,a]}function Si({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:a,targetControlY:l}){const u=.125*e+.375*r+.375*a+.125*n,s=.125*t+.375*i+.375*l+.125*o;return[u,s,Math.abs(u-e),Math.abs(s-t)]}function Ni(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function ki({pos:e,x1:t,y1:n,x2:o,y2:r,c:i}){let a,l;switch(e){case wo.Left:a=t-Ni(t-o,i),l=n;break;case wo.Right:a=t+Ni(o-t,i),l=n;break;case wo.Top:a=t,l=n-Ni(n-r,i);break;case wo.Bottom:a=t,l=n+Ni(r-n,i)}return[a,l]}function Ci(e){const{sourceX:t,sourceY:n,sourcePosition:o=wo.Bottom,targetX:r,targetY:i,targetPosition:a=wo.Top,curvature:l=.25}=e,[u,s]=ki({pos:o,x1:t,y1:n,x2:r,y2:i,c:l}),[c,d]=ki({pos:a,x1:r,y1:i,x2:t,y2:n,c:l}),[f,h,v,p]=Si({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:u,sourceControlY:s,targetControlX:c,targetControlY:d});return[`M${t},${n} C${u},${s} ${c},${d} ${r},${i}`,f,h,v,p]}function Mi({pos:e,x1:t,y1:n,x2:o,y2:r}){let i,a;switch(e){case wo.Left:case wo.Right:i=.5*(t+o),a=n;break;case wo.Top:case wo.Bottom:i=t,a=.5*(n+r)}return[i,a]}function Ii(e){const{sourceX:t,sourceY:n,sourcePosition:o=wo.Bottom,targetX:r,targetY:i,targetPosition:a=wo.Top}=e,[l,u]=Mi({pos:o,x1:t,y1:n,x2:r,y2:i}),[s,c]=Mi({pos:a,x1:r,y1:i,x2:t,y2:n}),[d,f,h,v]=Si({sourceX:t,sourceY:n,targetX:r,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:s,targetControlY:c});return[`M${t},${n} C${l},${u} ${s},${c} ${r},${i}`,d,f,h,v]}const Pi={[wo.Left]:{x:-1,y:0},[wo.Right]:{x:1,y:0},[wo.Top]:{x:0,y:-1},[wo.Bottom]:{x:0,y:1}};function Ti(e,t){return Math.sqrt(a(t.x-e.x,2)+a(t.y-e.y,2))}function Bi({source:e,sourcePosition:t=wo.Bottom,target:n,targetPosition:o=wo.Top,center:r,offset:i}){var a,l;const u=Pi[t],s=Pi[o],c={x:e.x+u.x*i,y:e.y+u.y*i},d={x:n.x+s.x*i,y:n.y+s.y*i},f=function({source:e,sourcePosition:t=wo.Bottom,target:n}){return t===wo.Left||t===wo.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}({source:c,sourcePosition:t,target:d}),h=0!==f.x?"x":"y",v=f[h];let p,g,m;const y={x:0,y:0},w={x:0,y:0},[V,x,b,_]=Ei({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(u[h]*s[h]==-1){g=null!=(a=r.x)?a:V,m=null!=(l=r.y)?l:x;const e=[{x:g,y:c.y},{x:g,y:d.y}],t=[{x:c.x,y:m},{x:d.x,y:m}];p=u[h]===v?"x"===h?e:t:"x"===h?t:e}else{const r=[{x:c.x,y:d.y}],a=[{x:d.x,y:c.y}];if(p="x"===h?u.x===v?a:r:u.y===v?r:a,t===o){const t=Math.abs(e[h]-n[h]);if(t<=i){const o=Math.min(i-1,i-t);u[h]===v?y[h]=(c[h]>e[h]?-1:1)*o:w[h]=(d[h]>n[h]?-1:1)*o}}if(t!==o){const e="x"===h?"y":"x",t=u[h]===s[e],n=c[e]>d[e],o=c[e]<d[e];(1===u[h]&&(!t&&n||t&&o)||1!==u[h]&&(!t&&o||t&&n))&&(p="x"===h?r:a)}const l={x:c.x+y.x,y:c.y+y.y},f={x:d.x+w.x,y:d.y+w.y};Math.max(Math.abs(l.x-p[0].x),Math.abs(f.x-p[0].x))>=Math.max(Math.abs(l.y-p[0].y),Math.abs(f.y-p[0].y))?(g=(l.x+f.x)/2,m=p[0].y):(g=p[0].x,m=(l.y+f.y)/2)}return[[e,{x:c.x+y.x,y:c.y+y.y},...p,{x:d.x+w.x,y:d.y+w.y},n],g,m,b,_]}function Oi(e){const{sourceX:t,sourceY:n,sourcePosition:o=wo.Bottom,targetX:r,targetY:i,targetPosition:a=wo.Top,borderRadius:l=5,centerX:u,centerY:s,offset:c=20}=e,[d,f,h,v,p]=Bi({source:{x:t,y:n},sourcePosition:o,target:{x:r,y:i},targetPosition:a,center:{x:u,y:s},offset:c});return[d.reduce(((e,t,n)=>{let o;return o=n>0&&n<d.length-1?function(e,t,n,o){const r=Math.min(Ti(e,t)/2,Ti(t,n)/2,o),{x:i,y:a}=t;if(e.x===i&&i===n.x||e.y===a&&a===n.y)return`L${i} ${a}`;if(e.y===a)return`L ${i+r*(e.x<n.x?-1:1)},${a}Q ${i},${a} ${i},${a+r*(e.y<n.y?1:-1)}`;const l=e.x<n.x?1:-1;return`L ${i},${a+r*(e.y<n.y?-1:1)}Q ${i},${a} ${i+r*l},${a}`}(d[n-1],t,d[n+1],l):`${0===n?"M":"L"}${t.x} ${t.y}`,e+=o}),""),f,h,v,p]}const Di=Vue.defineComponent({name:"StraightEdge",props:["label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup:(e,{attrs:t})=>()=>{const[n,o,r]=function(e){const{sourceX:t,sourceY:n,targetX:o,targetY:r}=e,[i,a,l,u]=Ei({sourceX:t,sourceY:n,targetX:o,targetY:r});return[`M ${t},${n}L ${o},${r}`,i,a,l,u]}(e);return Vue.h(_i,u(u({path:n,labelX:o,labelY:r},t),e))}}),Ai=Vue.defineComponent({name:"SmoothStepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","borderRadius","markerEnd","markerStart","interactionWidth","offset"],compatConfig:{MODE:3},setup:(e,{attrs:t})=>()=>{var n,o;const[r,i,a]=Oi(s(u({},e),{sourcePosition:null!=(n=e.sourcePosition)?n:wo.Bottom,targetPosition:null!=(o=e.targetPosition)?o:wo.Top}));return Vue.h(_i,u(u({path:r,labelX:i,labelY:a},t),e))}}),$i=Vue.defineComponent({name:"StepEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],setup:(e,{attrs:t})=>()=>Vue.h(Ai,s(u(u({},e),t),{borderRadius:0}))}),zi=Vue.defineComponent({name:"BezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","curvature","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup:(e,{attrs:t})=>()=>{var n,o;const[r,i,a]=Ci(s(u({},e),{sourcePosition:null!=(n=e.sourcePosition)?n:wo.Bottom,targetPosition:null!=(o=e.targetPosition)?o:wo.Top}));return Vue.h(_i,u(u({path:r,labelX:i,labelY:a},t),e))}}),Ri=Vue.defineComponent({name:"SimpleBezierEdge",props:["sourcePosition","targetPosition","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","sourceY","sourceX","targetX","targetY","markerEnd","markerStart","interactionWidth"],compatConfig:{MODE:3},setup:(e,{attrs:t})=>()=>{var n,o;const[r,i,a]=Ii(s(u({},e),{sourcePosition:null!=(n=e.sourcePosition)?n:wo.Bottom,targetPosition:null!=(o=e.targetPosition)?o:wo.Top}));return Vue.h(_i,u(u({path:r,labelX:i,labelY:a},t),e))}}),Li={input:gi,default:fi,output:vi},Hi={default:zi,straight:Di,step:$i,smoothstep:Ai,simplebezier:Ri};class Yi{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){var e,t;const n=null==(t=Vue.getCurrentInstance())?void 0:t.appContext.app,o=null!=(e=null==n?void 0:n.config.globalProperties.$vueFlowStorage)?e:Yi.instance;return Yi.instance=null!=o?o:new Yi,n&&(n.config.globalProperties.$vueFlowStorage=Yi.instance),Yi.instance}set(e,t){return this.flows.set(e,t)}get(e){return this.flows.get(e)}remove(e){return this.flows.delete(e)}create(e,t){const n=ai(),o=Vue.reactive(n),r={};for(const[u,s]of Object.entries(o.hooks)){r[`on${u.charAt(0).toUpperCase()+u.slice(1)}`]=s.on}const i={};for(const[u,s]of Object.entries(o.hooks))i[u]=s.trigger;const a=Vue.computed((()=>{const e=new Map;for(const t of o.nodes)e.set(t.id,t);return e})),l=Vue.computed((()=>{const e=new Map;for(const t of o.edges)e.set(t.id,t);return e})),c=function(e,t,n){const o=Vue.computed((()=>e=>t.value.get(e))),r=Vue.computed((()=>e=>n.value.get(e))),i=Vue.computed((()=>{const t=u(u({},Hi),e.edgeTypes),n=Object.keys(t);for(const o of e.edges)o.type&&!n.includes(o.type)&&(t[o.type]=o.type);return t})),a=Vue.computed((()=>{const t=u(u({},Li),e.nodeTypes),n=Object.keys(t);for(const o of e.nodes)o.type&&!n.includes(o.type)&&(t[o.type]=o.type);return t})),l=Vue.computed((()=>e.onlyRenderVisibleElements?Wo(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes)),s=Vue.computed((()=>{if(e.onlyRenderVisibleElements){const n=[];for(const o of e.edges){const r=t.value.get(o.source),i=t.value.get(o.target);yr({sourcePos:r.computedPosition||{x:0,y:0},targetPos:i.computedPosition||{x:0,y:0},sourceWidth:r.dimensions.width,sourceHeight:r.dimensions.height,targetWidth:i.dimensions.width,targetHeight:i.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&n.push(o)}return n}return e.edges})),c=Vue.computed((()=>[...l.value,...s.value])),d=Vue.computed((()=>{const t=[];for(const n of e.nodes)n.selected&&t.push(n);return t})),f=Vue.computed((()=>{const t=[];for(const n of e.edges)n.selected&&t.push(n);return t})),h=Vue.computed((()=>[...d.value,...f.value])),v=Vue.computed((()=>{const t=[];for(const n of e.nodes)n.dimensions.width&&n.dimensions.height&&void 0!==n.handleBounds&&t.push(n);return t})),p=Vue.computed((()=>l.value.length>0&&v.value.length===l.value.length));return{getNode:o,getEdge:r,getElements:c,getEdgeTypes:i,getNodeTypes:a,getEdges:s,getNodes:l,getSelectedElements:h,getSelectedNodes:d,getSelectedEdges:f,getNodesInitialized:v,areNodesInitialized:p}}(o,a,l),d=ui(o,a,l);d.setState(u(u({},o),t));const h=s(u(u(u(u({},r),c),d),function(e,t={}){if(!Vue.isRef(e))return Vue.toRefs(e);const n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(const o in e.value)n[o]=Vue.customRef((()=>({get:()=>e.value[o],set(n){var r;if(null==(r=f(t.replaceRef))||r)if(Array.isArray(e.value)){const t=[...e.value];t[o]=n,e.value=t}else{const t=s(u({},e.value),{[o]:n});Object.setPrototypeOf(t,Object.getPrototypeOf(e.value)),e.value=t}else e.value[o]=n}})));return n}(o)),{nodeLookup:a,edgeLookup:l,emits:i,id:e,vueFlowVersion:"1.39.3",$destroy:()=>{this.remove(e)}});return this.set(e,h),h}getId(){return"vue-flow-"+this.currentId++}}function Gi(e){const t=Yi.getInstance(),n=Vue.getCurrentScope(),o="object"==typeof e,r=o?e:{id:e},i=r.id,a=null!=i?i:null==n?void 0:n.vueFlowId;let l;if(n){const e=Vue.inject(Hr,null);null==e||a&&e.id!==a||(l=e)}if(l||a&&(l=t.get(a)),!l||a&&l.id!==a){const e=null!=i?i:t.getId(),o=t.create(e,r);l=o;(null!=n?n:Vue.effectScope(!0)).run((()=>{Vue.watch(o.applyDefault,((e,t,n)=>{const r=e=>{o.applyNodeChanges(e)},i=e=>{o.applyEdgeChanges(e)};e?(o.onNodesChange(r),o.onEdgesChange(i)):(o.hooks.value.nodesChange.off(r),o.hooks.value.edgesChange.off(i)),n((()=>{o.hooks.value.nodesChange.off(r),o.hooks.value.edgesChange.off(i)}))}),{immediate:!0}),d((()=>{if(l){const e=t.get(l.id);e?e.$destroy():Pr(l.id)}}))}))}else o&&l.setState(r);if(n&&(Vue.provide(Hr,l),n.vueFlowId=l.id),o){const e=Vue.getCurrentInstance();"VueFlow"!==(null==e?void 0:e.type.name)&&l.emits.error(new br(Vr.USEVUEFLOW_OPTIONS))}return l}const Fi=Vue.defineComponent(s(u({},{name:"UserSelection",compatConfig:{MODE:3}}),{props:{userSelectionRect:{}},setup:e=>(e,t)=>(Vue.openBlock(),Vue.createElementBlock("div",{class:"vue-flow__selection vue-flow__container",style:Vue.normalizeStyle({width:`${e.userSelectionRect.width}px`,height:`${e.userSelectionRect.height}px`,transform:`translate(${e.userSelectionRect.x}px, ${e.userSelectionRect.y}px)`})},null,4))})),Xi=["tabIndex"],Ui=Vue.defineComponent(s(u({},{name:"NodesSelection",compatConfig:{MODE:3}}),{setup(e){const{emits:t,viewport:n,getSelectedNodes:o,noPanClassName:r,disableKeyboardA11y:i,userSelectionActive:a}=Gi(),l=ei(),u=Vue.ref(null),s=jr({el:u,onStart(e){t.selectionDragStart(e)},onDrag(e){t.selectionDrag(e)},onStop(e){t.selectionDragStop(e)}});Vue.onMounted((()=>{var e;i.value||null==(e=u.value)||e.focus({preventScroll:!0})}));const c=Vue.computed((()=>Ko(o.value))),d=Vue.computed((()=>({width:`${c.value.width}px`,height:`${c.value.height}px`,top:`${c.value.y}px`,left:`${c.value.x}px`})));function f(e){t.selectionContextMenu({event:e,nodes:o.value})}function h(e){i||Po[e.key]&&l({x:Po[e.key].x,y:Po[e.key].y},e.shiftKey)}return(e,t)=>!Vue.unref(a)&&c.value.width&&c.value.height?(Vue.openBlock(),Vue.createElementBlock("div",{key:0,class:Vue.normalizeClass(["vue-flow__nodesselection vue-flow__container",Vue.unref(r)]),style:Vue.normalizeStyle({transform:`translate(${Vue.unref(n).x}px,${Vue.unref(n).y}px) scale(${Vue.unref(n).zoom})`})},[Vue.createElementVNode("div",{ref_key:"el",ref:u,class:Vue.normalizeClass([{dragging:Vue.unref(s)},"vue-flow__nodesselection-rect"]),style:Vue.normalizeStyle(d.value),tabIndex:Vue.unref(i)?void 0:-1,onContextmenu:f,onKeydown:h},null,46,Xi)],6)):Vue.createCommentVNode("",!0)}}));const ji=Vue.defineComponent(s(u({},{name:"Pane",compatConfig:{MODE:3}}),{props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){const{vueFlowRef:t,nodes:n,viewport:o,emits:r,userSelectionActive:i,removeSelectedElements:a,panOnDrag:l,userSelectionRect:u,elementsSelectable:s,nodesSelectionActive:c,getSelectedEdges:d,getSelectedNodes:f,removeNodes:h,removeEdges:v,selectionMode:p,deleteKeyCode:g,multiSelectionKeyCode:m,multiSelectionActive:y,edgeLookup:w,nodeLookup:V}=Gi(),x=Vue.ref(null),b=Vue.ref(0),_=Vue.ref(0),E=Vue.ref(),S=Vue.ref(new Map),N=Vue.toRef((()=>s.value&&(e.isSelecting||i.value)));let k=!1,C=!1;const M=ko(g,{actInsideInputWithModifier:!1}),I=ko(m);function P(e,t){return n=>{n.target===t&&(null==e||e(n))}}function T(e){k?k=!1:(r.paneClick(e),a(),c.value=!1)}function B(e){var t;Array.isArray(l.value)&&(null==(t=l.value)?void 0:t.includes(2))?e.preventDefault():r.paneContextMenu(e)}function O(e){r.paneScroll(e)}function D(t){var n;0===t.button&&C&&(null==(n=t.target)||n.releasePointerCapture(t.pointerId),!i.value&&u.value&&t.target===x.value&&T(t),b.value>0&&(c.value=!0),i.value=!1,u.value=null,b.value=0,_.value=0,r.selectionEnd(t),e.selectionKeyPressed&&(k=!1),C=!1)}return Vue.watch(M,(e=>{e&&(h(f.value),v(d.value),c.value=!1)})),Vue.watch(I,(e=>{y.value=e})),(l,d)=>(Vue.openBlock(),Vue.createElementBlock("div",{ref_key:"container",ref:x,class:Vue.normalizeClass(["vue-flow__pane vue-flow__container",{selection:l.isSelecting}]),onClick:d[0]||(d[0]=e=>N.value?void 0:P(T,x.value)(e)),onContextmenu:d[1]||(d[1]=e=>P(B,x.value)(e)),onWheelPassive:d[2]||(d[2]=e=>P(O,x.value)(e)),onPointerenter:d[3]||(d[3]=e=>N.value?void 0:Vue.unref(r).paneMouseEnter(e)),onPointerdown:d[4]||(d[4]=n=>N.value?function(n){var o,l,d,f,h;if(E.value=null==(o=t.value)?void 0:o.getBoundingClientRect(),!s.value||!e.isSelecting||0!==n.button||n.target!==x.value||!E.value)return;null==(d=null==(l=n.target)?void 0:l.setPointerCapture)||d.call(l,n.pointerId);const{x:v,y:p}=function(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}(n,E.value);C=!0,k=!1,S.value=new Map;for(const[e,t]of w.value)S.value.set(t.source,(null==(f=S.value.get(t.source))?void 0:f.add(e))||new Set([e])),S.value.set(t.target,(null==(h=S.value.get(t.target))?void 0:h.add(e))||new Set([e]));a(),u.value={width:0,height:0,startX:v,startY:p,x:v,y:p},i.value=!0,c.value=!1,r.selectionStart(n)}(n):Vue.unref(r).paneMouseMove(n)),onPointermove:d[5]||(d[5]=e=>N.value?function(e){if(!E.value||!u.value)return;k=!0;const{x:t,y:a}=Er(e,E.value),{startX:l=0,startY:s=0}=u.value,d={startX:l,startY:s,x:t<l?t:l,y:a<s?a:s,width:Math.abs(t-l),height:Math.abs(a-s)},f=Wo(n.value,d,o.value,p.value===Vo.Partial,!0),h=new Set,v=new Set;for(const n of f){v.add(n.id);const e=S.value.get(n.id);if(e)for(const t of e)h.add(t)}if(b.value!==v.size){b.value=v.size;const e=sr(V.value,v,!0);r.nodesChange(e)}if(_.value!==h.size){_.value=h.size;const e=sr(w.value,h);r.edgesChange(e)}u.value=d,i.value=!0,c.value=!1}(e):Vue.unref(r).paneMouseMove(e)),onPointerup:d[6]||(d[6]=e=>N.value?D(e):void 0),onPointerleave:d[7]||(d[7]=e=>Vue.unref(r).paneMouseLeave(e))},[Vue.renderSlot(l.$slots,"default"),Vue.unref(i)&&Vue.unref(u)?(Vue.openBlock(),Vue.createBlock(Fi,{key:0,"user-selection-rect":Vue.unref(u)},null,8,["user-selection-rect"])):Vue.createCommentVNode("",!0),Vue.unref(c)&&Vue.unref(f).length?(Vue.openBlock(),Vue.createBlock(Ui,{key:1})):Vue.createCommentVNode("",!0)],34))}})),Zi=Vue.defineComponent(s(u({},{name:"Transform",compatConfig:{MODE:3}}),{setup(e){const{viewport:t,fitViewOnInit:n,fitViewOnInitDone:o}=Gi(),r=Vue.computed((()=>!!n.value&&!o.value)),i=Vue.computed((()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`));return(e,t)=>(Vue.openBlock(),Vue.createElementBlock("div",{class:"vue-flow__transformationpane vue-flow__container",style:Vue.normalizeStyle({transform:i.value,opacity:r.value?0:void 0})},[Vue.renderSlot(e.$slots,"default")],4))}})),Ki=Vue.defineComponent(s(u({},{name:"Viewport",compatConfig:{MODE:3}}),{setup(e){const{minZoom:t,maxZoom:n,defaultViewport:o,translateExtent:r,zoomActivationKeyCode:i,selectionKeyCode:l,panActivationKeyCode:u,panOnScroll:s,panOnScrollMode:c,panOnScrollSpeed:d,panOnDrag:f,zoomOnDoubleClick:h,zoomOnPinch:v,zoomOnScroll:p,preventScrolling:g,noWheelClassName:m,noPanClassName:y,emits:w,connectionStartHandle:V,userSelectionActive:x,paneDragging:b,d3Zoom:_,d3Selection:E,d3ZoomHandler:S,viewport:N,viewportRef:k,paneClickDistance:C}=Gi();!function(e){const{emits:t,dimensions:n}=Gi();let o;Vue.onMounted((()=>{const r=e.value,i=()=>{if(!r)return;const e=Oo(r);0!==e.width&&0!==e.height||t.error(new br(Vr.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:e.width||500,height:e.height||500}};i(),window.addEventListener("resize",i),r&&(o=new ResizeObserver((()=>i())),o.observe(r)),Vue.onBeforeUnmount((()=>{window.removeEventListener("resize",i),o&&r&&o.unobserve(r)}))}))}(k);const I=Vue.ref(!1),P=Vue.ref(!1);let T=null,B=!1,O=0,D={x:0,y:0,zoom:0};const A=ko(u),$=ko(l),z=ko(i),R=Vue.toRef((()=>A.value||f.value)),L=Vue.toRef((()=>A.value||s.value)),H=Vue.toRef((()=>$.value||!0===l.value&&!0!==R.value));function Y(e,t){return 2===t&&Array.isArray(e)&&e.includes(2)}function G(e){const t=e.ctrlKey&&Sr()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t}function F(e){return{x:e.x,y:e.y,zoom:e.k}}function X(e,t){return e.target.closest(`.${t}`)}return Vue.onMounted((()=>{var e,i,l;if(!k.value)return void Pr();const u=k.value,f=u.getBoundingClientRect(),V=function(){var e,t,n,o=ho,r=vo,i=yo,a=go,l=mo,u=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],c=250,d=tn,f=M("start","zoom","end"),h=500,v=150,p=0,g=10;function m(e){e.property("__zoom",po).on("wheel.zoom",E,{passive:!1}).on("mousedown.zoom",S).on("dblclick.zoom",N).filter(l).on("touchstart.zoom",k).on("touchmove.zoom",C).on("touchend.zoom touchcancel.zoom",I).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(e,t){return(t=Math.max(u[0],Math.min(u[1],t)))===e.k?e:new uo(t,e.x,e.y)}function w(e,t,n){var o=t[0]-n[0]*e.k,r=t[1]-n[1]*e.k;return o===e.x&&r===e.y?e:new uo(e.k,o,r)}function V(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function x(e,t,n,o){e.on("start.zoom",(function(){b(this,arguments).event(o).start()})).on("interrupt.zoom end.zoom",(function(){b(this,arguments).event(o).end()})).tween("zoom",(function(){var e=this,i=arguments,a=b(e,i).event(o),l=r.apply(e,i),u=null==n?V(l):"function"==typeof n?n.apply(e,i):n,s=Math.max(l[1][0]-l[0][0],l[1][1]-l[0][1]),c=e.__zoom,f="function"==typeof t?t.apply(e,i):t,h=d(c.invert(u).concat(s/c.k),f.invert(u).concat(s/f.k));return function(e){if(1===e)e=f;else{var t=h(e),n=s/t[2];e=new uo(n,u[0]-t[0]*n,u[1]-t[1]*n)}a.zoom(null,e)}}))}function b(e,t,n){return!n&&e.__zooming||new _(e,t)}function _(e,t){this.that=e,this.args=t,this.active=0,this.sourceEvent=null,this.extent=r.apply(e,t),this.taps=0}function E(e,...t){if(o.apply(this,arguments)){var n=b(this,t).event(e),r=this.__zoom,l=Math.max(u[0],Math.min(u[1],r.k*Math.pow(2,a.apply(this,arguments)))),c=Ue(e);if(n.wheel)n.mouse[0][0]===c[0]&&n.mouse[0][1]===c[1]||(n.mouse[1]=r.invert(n.mouse[0]=c)),clearTimeout(n.wheel);else{if(r.k===l)return;n.mouse=[c,r.invert(c)],Dn(this),n.start()}fo(e),n.wheel=setTimeout((function(){n.wheel=null,n.end()}),v),n.zoom("mouse",i(w(y(r,l),n.mouse[0],n.mouse[1]),n.extent,s))}}function S(e,...t){if(!n&&o.apply(this,arguments)){var r=e.currentTarget,a=b(this,t,!0).event(e),l=Xe(e.view).on("mousemove.zoom",(function(e){if(fo(e),!a.moved){var t=e.clientX-c,n=e.clientY-d;a.moved=t*t+n*n>p}a.event(e).zoom("mouse",i(w(a.that.__zoom,a.mouse[0]=Ue(e,r),a.mouse[1]),a.extent,s))}),!0).on("mouseup.zoom",(function(e){l.on("mousemove.zoom mouseup.zoom",null),Je(e.view,a.moved),fo(e),a.event(e).end()}),!0),u=Ue(e,r),c=e.clientX,d=e.clientY;qe(e.view),co(e),a.mouse=[u,this.__zoom.invert(u)],Dn(this),a.start()}}function N(e,...t){if(o.apply(this,arguments)){var n=this.__zoom,a=Ue(e.changedTouches?e.changedTouches[0]:e,this),l=n.invert(a),u=n.k*(e.shiftKey?.5:2),d=i(w(y(n,u),a,l),r.apply(this,t),s);fo(e),c>0?Xe(this).transition().duration(c).call(x,d,a,e):Xe(this).call(m.transform,d,a,e)}}function k(n,...r){if(o.apply(this,arguments)){var i,a,l,u,s=n.touches,c=s.length,d=b(this,r,n.changedTouches.length===c).event(n);for(co(n),a=0;a<c;++a)u=[u=Ue(l=s[a],this),this.__zoom.invert(u),l.identifier],d.touch0?d.touch1||d.touch0[2]===u[2]||(d.touch1=u,d.taps=0):(d.touch0=u,i=!0,d.taps=1+!!e);e&&(e=clearTimeout(e)),i&&(d.taps<2&&(t=u[0],e=setTimeout((function(){e=null}),h)),Dn(this),d.start())}}function C(e,...t){if(this.__zooming){var n,o,r,a,l=b(this,t).event(e),u=e.changedTouches,c=u.length;for(fo(e),n=0;n<c;++n)r=Ue(o=u[n],this),l.touch0&&l.touch0[2]===o.identifier?l.touch0[0]=r:l.touch1&&l.touch1[2]===o.identifier&&(l.touch1[0]=r);if(o=l.that.__zoom,l.touch1){var d=l.touch0[0],f=l.touch0[1],h=l.touch1[0],v=l.touch1[1],p=(p=h[0]-d[0])*p+(p=h[1]-d[1])*p,g=(g=v[0]-f[0])*g+(g=v[1]-f[1])*g;o=y(o,Math.sqrt(p/g)),r=[(d[0]+h[0])/2,(d[1]+h[1])/2],a=[(f[0]+v[0])/2,(f[1]+v[1])/2]}else{if(!l.touch0)return;r=l.touch0[0],a=l.touch0[1]}l.zoom("touch",i(w(o,r,a),l.extent,s))}}function I(e,...o){if(this.__zooming){var r,i,a=b(this,o).event(e),l=e.changedTouches,u=l.length;for(co(e),n&&clearTimeout(n),n=setTimeout((function(){n=null}),h),r=0;r<u;++r)i=l[r],a.touch0&&a.touch0[2]===i.identifier?delete a.touch0:a.touch1&&a.touch1[2]===i.identifier&&delete a.touch1;if(a.touch1&&!a.touch0&&(a.touch0=a.touch1,delete a.touch1),a.touch0)a.touch0[1]=this.__zoom.invert(a.touch0[0]);else if(a.end(),2===a.taps&&(i=Ue(i,this),Math.hypot(t[0]-i[0],t[1]-i[1])<g)){var s=Xe(this).on("dblclick.zoom");s&&s.apply(this,arguments)}}}return m.transform=function(e,t,n,o){var r=e.selection?e.selection():e;r.property("__zoom",po),e!==r?x(e,t,n,o):r.interrupt().each((function(){b(this,arguments).event(o).start().zoom(null,"function"==typeof t?t.apply(this,arguments):t).end()}))},m.scaleBy=function(e,t,n,o){m.scaleTo(e,(function(){return this.__zoom.k*("function"==typeof t?t.apply(this,arguments):t)}),n,o)},m.scaleTo=function(e,t,n,o){m.transform(e,(function(){var e=r.apply(this,arguments),o=this.__zoom,a=null==n?V(e):"function"==typeof n?n.apply(this,arguments):n,l=o.invert(a),u="function"==typeof t?t.apply(this,arguments):t;return i(w(y(o,u),a,l),e,s)}),n,o)},m.translateBy=function(e,t,n,o){m.transform(e,(function(){return i(this.__zoom.translate("function"==typeof t?t.apply(this,arguments):t,"function"==typeof n?n.apply(this,arguments):n),r.apply(this,arguments),s)}),null,o)},m.translateTo=function(e,t,n,o,a){m.transform(e,(function(){var e=r.apply(this,arguments),a=this.__zoom,l=null==o?V(e):"function"==typeof o?o.apply(this,arguments):o;return i(so.translate(l[0],l[1]).scale(a.k).translate("function"==typeof t?-t.apply(this,arguments):-t,"function"==typeof n?-n.apply(this,arguments):-n),e,s)}),o,a)},_.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return 1==++this.active&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(e,t){return this.mouse&&"mouse"!==e&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&"touch"!==e&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&"touch"!==e&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit("zoom"),this},end:function(){return 0==--this.active&&(delete this.that.__zooming,this.emit("end")),this},emit:function(e){var t=Xe(this.that).datum();f.call(e,this.that,new lo(e,{sourceEvent:this.sourceEvent,target:m,type:e,transform:this.that.__zoom,dispatch:f}),t)}},m.wheelDelta=function(e){return arguments.length?(a="function"==typeof e?e:ao(+e),m):a},m.filter=function(e){return arguments.length?(o="function"==typeof e?e:ao(!!e),m):o},m.touchable=function(e){return arguments.length?(l="function"==typeof e?e:ao(!!e),m):l},m.extent=function(e){return arguments.length?(r="function"==typeof e?e:ao([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),m):r},m.scaleExtent=function(e){return arguments.length?(u[0]=+e[0],u[1]=+e[1],m):[u[0],u[1]]},m.translateExtent=function(e){return arguments.length?(s[0][0]=+e[0][0],s[1][0]=+e[1][0],s[0][1]=+e[0][1],s[1][1]=+e[1][1],m):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},m.constrain=function(e){return arguments.length?(i=e,m):i},m.duration=function(e){return arguments.length?(c=+e,m):c},m.interpolate=function(e){return arguments.length?(d=e,m):d},m.on=function(){var e=f.on.apply(f,arguments);return e===f?m:e},m.clickDistance=function(e){return arguments.length?(p=(e=+e)*e,m):Math.sqrt(p)},m.tapDistance=function(e){return arguments.length?(g=+e,m):g},m}().clickDistance(C.value).scaleExtent([t.value,n.value]).translateExtent(r.value),A=Xe(u).call(V),$=A.on("wheel.zoom"),H=so.translate(null!=(e=o.value.x)?e:0,null!=(i=o.value.y)?i:0).scale(Do(null!=(l=o.value.zoom)?l:1,t.value,n.value)),U=[[0,0],[f.width,f.height]],j=V.constrain()(H,U,r.value);V.transform(A,j),V.wheelDelta(G),_.value=V,E.value=A,S.value=$,N.value={x:j.x,y:j.y,zoom:j.k},V.on("start",(e=>{var t;if(!e.sourceEvent)return null;O=e.sourceEvent.button,I.value=!0;const n=F(e.transform);"mousedown"===(null==(t=e.sourceEvent)?void 0:t.type)&&(b.value=!0),D=n,w.viewportChangeStart(n),w.moveStart({event:e,flowTransform:n})})),V.on("end",(e=>{if(!e.sourceEvent)return null;if(I.value=!1,b.value=!1,Y(R.value,null!=O?O:0)&&!B&&w.paneContextMenu(e.sourceEvent),B=!1,t=D,n=e.transform,t.x!==n.x&&!Number.isNaN(n.x)||t.y!==n.y&&!Number.isNaN(n.y)||t.zoom!==n.k&&!Number.isNaN(n.k)){const t=F(e.transform);D=t,w.viewportChangeEnd(t),w.moveEnd({event:e,flowTransform:t})}var t,n})),V.filter((e=>{var t,n,o;const r=z.value||p.value,i=v.value&&e.ctrlKey,a=e.button;if((!0===R.value||Array.isArray(R.value)&&R.value.includes(1))&&1===a&&"mousedown"===e.type&&((null==(t=e.target)?void 0:t.closest(".vue-flow__node"))||(null==(n=e.target)?void 0:n.closest(".vue-flow__edge"))))return!0;if(!(R.value||r||L.value||h.value||v.value))return!1;if(x.value)return!1;if(!h.value&&"dblclick"===e.type)return!1;if(X(e,m.value)&&"wheel"===e.type)return!1;if(X(e,y.value)&&("wheel"!==e.type||L.value&&"wheel"===e.type&&!z.value))return!1;if(!v.value&&e.ctrlKey&&"wheel"===e.type)return!1;if(!r&&!L.value&&!i&&"wheel"===e.type)return!1;if(!v&&"touchstart"===e.type&&(null==(o=e.touches)?void 0:o.length)>1)return e.preventDefault(),!1;if(!R.value&&("mousedown"===e.type||"touchstart"===e.type))return!1;if(Array.isArray(R.value)&&!R.value.includes(a)&&("mousedown"===e.type||"touchstart"===e.type))return!1;const l=Array.isArray(R.value)&&R.value.includes(a)||!a||a<=1;return(!e.ctrlKey||"wheel"===e.type)&&l})),Vue.watch([x,R],(()=>{x.value&&!I.value?V.on("zoom",null):x.value||V.on("zoom",(e=>{N.value={x:e.transform.x,y:e.transform.y,zoom:e.transform.k};const t=F(e.transform);B=Y(R.value,null!=O?O:0),w.viewportChange(t),w.move({event:e,flowTransform:t})}))}),{immediate:!0}),Vue.watch([x,L,c,z,v,g,m],(()=>{!L.value||z.value||x.value?void 0!==$&&A.on("wheel.zoom",(function(e,t){const n=!g.value&&"wheel"===e.type&&!e.ctrlKey,o=z.value||p.value,r=v.value&&e.ctrlKey;if(!o&&!s.value&&!r&&"wheel"===e.type||n||X(e,m.value))return null;e.preventDefault(),$.call(this,e,t)}),{passive:!1}):A.on("wheel.zoom",(e=>{if(X(e,m.value))return!1;const t=z.value||p.value,n=v.value&&e.ctrlKey;if(!(!g.value||L.value||t||n))return!1;e.preventDefault(),e.stopImmediatePropagation();const o=A.property("__zoom").k||1,r=Sr();if(e.ctrlKey&&v.value&&r){const t=Ue(e),n=G(e),r=o*a(2,n);return void V.scaleTo(A,r,t,e)}const i=1===e.deltaMode?20:1;let l=c.value===Eo.Vertical?0:e.deltaX*i,u=c.value===Eo.Horizontal?0:e.deltaY*i;!r&&e.shiftKey&&c.value!==Eo.Vertical&&!l&&u&&(l=u,u=0),V.translateBy(A,-l/o*d.value,-u/o*d.value);const s=F(A.property("__zoom"));T&&clearTimeout(T),P.value?(w.move({event:e,flowTransform:s}),w.viewportChange(s),T=setTimeout((()=>{w.moveEnd({event:e,flowTransform:s}),w.viewportChangeEnd(s),P.value=!1}),150)):(P.value=!0,w.moveStart({event:e,flowTransform:s}),w.viewportChangeStart(s))}),{passive:!1})}),{immediate:!0})})),(e,t)=>(Vue.openBlock(),Vue.createElementBlock("div",{ref_key:"viewportRef",ref:k,class:"vue-flow__viewport vue-flow__container"},[Vue.createVNode(ji,{"is-selecting":H.value,"selection-key-pressed":Vue.unref($),class:Vue.normalizeClass({connecting:!!Vue.unref(V),dragging:Vue.unref(b),draggable:R.value})},{default:Vue.withCtx((()=>[Vue.createVNode(Zi,null,{default:Vue.withCtx((()=>[Vue.renderSlot(e.$slots,"default")])),_:3})])),_:3},8,["is-selecting","selection-key-pressed","class"])],512))}})),Wi=["id"],qi=["id"],Ji=["id"],Qi=Vue.defineComponent(s(u({},{name:"A11yDescriptions",compatConfig:{MODE:3}}),{setup(e){const{id:t,disableKeyboardA11y:n,ariaLiveMessage:o}=Gi();return(e,r)=>(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,[Vue.createElementVNode("div",{id:`${Vue.unref(Co)}-${Vue.unref(t)}`,style:{display:"none"}}," Press enter or space to select a node. "+Vue.toDisplayString(Vue.unref(n)?"":"You can then use the arrow keys to move the node around.")+" You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. ",9,Wi),Vue.createElementVNode("div",{id:`${Vue.unref(Mo)}-${Vue.unref(t)}`,style:{display:"none"}}," Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. ",8,qi),Vue.unref(n)?Vue.createCommentVNode("",!0):(Vue.openBlock(),Vue.createElementBlock("div",{key:0,id:`${Vue.unref("vue-flow__aria-live")}-${Vue.unref(t)}`,"aria-live":"assertive","aria-atomic":"true",style:{position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)","clip-path":"inset(100%)"}},Vue.toDisplayString(Vue.unref(o)),9,Ji))],64))}}));function ea(e,t,n){return n===wo.Left?e-t:n===wo.Right?e+t:e}function ta(e,t,n){return n===wo.Top?e-t:n===wo.Bottom?e+t:e}const na=function({radius:e=10,centerX:t=0,centerY:n=0,position:o=wo.Top,type:r}){return Vue.h("circle",{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${r}`,cx:ea(t,e,o),cy:ta(n,e,o),r:e,stroke:"transparent",fill:"transparent"})};na.props=["radius","centerX","centerY","position","type"],na.compatConfig={MODE:3};const oa=na,ra=Vue.defineComponent({name:"Edge",compatConfig:{MODE:3},props:["id"],setup(e){const{id:t,addSelectedEdges:n,connectionMode:o,edgeUpdaterRadius:r,emits:i,nodesSelectionActive:a,noPanClassName:l,getEdgeTypes:s,removeSelectedEdges:c,findEdge:d,findNode:f,isValidConnection:h,multiSelectionActive:v,disableKeyboardA11y:p,elementsSelectable:g,edgesUpdatable:m,edgesFocusable:y}=Gi(),w=Vue.computed((()=>d(e.id))),V=Zr(w.value,i),x=Vue.inject(Ur),b=Vue.getCurrentInstance(),_=Vue.ref(!1),E=Vue.ref(!1),S=Vue.ref(""),N=Vue.ref(null),k=Vue.ref("source"),C=Vue.ref(null),M=Vue.toRef((()=>void 0===w.value.selectable?g.value:w.value.selectable)),I=Vue.toRef((()=>void 0===w.value.updatable?m.value:w.value.updatable)),P=Vue.toRef((()=>void 0===w.value.focusable?y.value:w.value.focusable));Vue.provide(Fr,e.id),Vue.provide(Xr,C);const T=Vue.computed((()=>w.value.class instanceof Function?w.value.class(w.value):w.value.class)),B=Vue.computed((()=>w.value.style instanceof Function?w.value.style(w.value):w.value.style)),O=Vue.computed((()=>{var e;const t=w.value.type||"default",n=null==x?void 0:x[`edge-${t}`];if(n)return n;let o=null!=(e=w.value.template)?e:s.value[t];if("string"==typeof o&&b){const e=Object.keys(b.appContext.components);e&&e.includes(t)&&(o=Vue.resolveComponent(t,!1))}return o&&"string"!=typeof o?o:(i.error(new br(Vr.EDGE_TYPE_MISSING,o)),!1)})),{handlePointerDown:D}=Wr({nodeId:S,handleId:N,type:k,isValidConnection:h,edgeUpdaterType:k,onEdgeUpdate:function(e,t){V.emit.update({event:e,edge:w.value,connection:t})},onEdgeUpdateEnd:function(e){V.emit.updateEnd({event:e,edge:w.value}),E.value=!1}});return()=>{const n=f(w.value.source),a=f(w.value.target),c="pathOptions"in w.value?w.value.pathOptions:{};if(!n&&!a)return i.error(new br(Vr.EDGE_SOURCE_TARGET_MISSING,w.value.id,w.value.source,w.value.target)),null;if(!n)return i.error(new br(Vr.EDGE_SOURCE_MISSING,w.value.id,w.value.source)),null;if(!a)return i.error(new br(Vr.EDGE_TARGET_MISSING,w.value.id,w.value.target)),null;if(!w.value||w.value.hidden||n.hidden||a.hidden)return null;let d;d=o.value===bo.Strict?n.handleBounds.source:[...n.handleBounds.source||[],...n.handleBounds.target||[]];const h=mr(d,w.value.sourceHandle);let v;v=o.value===bo.Strict?a.handleBounds.target:[...a.handleBounds.target||[],...a.handleBounds.source||[]];const p=mr(v,w.value.targetHandle),g=(null==h?void 0:h.position)||wo.Bottom,m=(null==p?void 0:p.position)||wo.Top,{x:y,y:x}=gr(n,h,g),{x:b,y:S}=gr(a,p,m);return w.value.sourceX=y,w.value.sourceY=x,w.value.targetX=b,w.value.targetY=S,Vue.h("g",{ref:C,key:e.id,"data-id":e.id,class:["vue-flow__edge",`vue-flow__edge-${!1===O.value?"default":w.value.type||"default"}`,l.value,T.value,{updating:_.value,selected:w.value.selected,animated:w.value.animated,inactive:!M.value}],onClick:R,onContextmenu:L,onDblclick:H,onMouseenter:Y,onMousemove:G,onMouseleave:F,onKeyDown:P.value?j:void 0,tabIndex:P.value?0:void 0,"aria-label":null===w.value.ariaLabel?void 0:w.value.ariaLabel||`Edge from ${w.value.source} to ${w.value.target}`,"aria-describedby":P.value?`${Mo}-${t}`:void 0,role:P.value?"button":"img"},[E.value?null:Vue.h(!1===O.value?s.value.default:O.value,u({id:e.id,sourceNode:n,targetNode:a,source:w.value.source,target:w.value.target,type:w.value.type,updatable:I.value,selected:w.value.selected,animated:w.value.animated,label:w.value.label,labelStyle:w.value.labelStyle,labelShowBg:w.value.labelShowBg,labelBgStyle:w.value.labelBgStyle,labelBgPadding:w.value.labelBgPadding,labelBgBorderRadius:w.value.labelBgBorderRadius,data:w.value.data,events:u(u({},w.value.events),V.on),style:B.value,markerStart:`url('#${er(w.value.markerStart,t)}')`,markerEnd:`url('#${er(w.value.markerEnd,t)}')`,sourcePosition:g,targetPosition:m,sourceX:y,sourceY:x,targetX:b,targetY:S,sourceHandleId:w.value.sourceHandle,targetHandleId:w.value.targetHandle,interactionWidth:w.value.interactionWidth},c)),["source"===I.value||!0===I.value?[Vue.h("g",{onMousedown:X,onMouseenter:A,onMouseout:$},Vue.h(oa,{position:g,centerX:y,centerY:x,radius:r.value,type:"source","data-type":"source"}))]:null,"target"===I.value||!0===I.value?[Vue.h("g",{onMousedown:U,onMouseenter:A,onMouseout:$},Vue.h(oa,{position:m,centerX:b,centerY:S,radius:r.value,type:"target","data-type":"target"}))]:null]])};function A(){_.value=!0}function $(){_.value=!1}function z(e,t){var n;0===e.button&&(E.value=!0,S.value=t?w.value.target:w.value.source,N.value=null!=(n=t?w.value.targetHandle:w.value.sourceHandle)?n:"",k.value=t?"target":"source",V.emit.updateStart({event:e,edge:w.value}),D(e))}function R(e){var t;const o={event:e,edge:w.value};M.value&&(a.value=!1,w.value.selected&&v.value?(c([w.value]),null==(t=C.value)||t.blur()):n([w.value])),V.emit.click(o)}function L(e){V.emit.contextMenu({event:e,edge:w.value})}function H(e){V.emit.doubleClick({event:e,edge:w.value})}function Y(e){V.emit.mouseEnter({event:e,edge:w.value})}function G(e){V.emit.mouseMove({event:e,edge:w.value})}function F(e){V.emit.mouseLeave({event:e,edge:w.value})}function X(e){z(e,!0)}function U(e){z(e,!1)}function j(t){var o;if(!p.value&&Io.includes(t.key)&&M.value){"Escape"===t.key?(null==(o=C.value)||o.blur(),c([d(e.id)])):n([d(e.id)])}}}}),ia={[wo.Left]:wo.Right,[wo.Right]:wo.Left,[wo.Top]:wo.Bottom,[wo.Bottom]:wo.Top},aa=Vue.defineComponent({name:"ConnectionLine",compatConfig:{MODE:3},setup(){var e;const{id:t,connectionMode:n,connectionStartHandle:o,connectionEndHandle:r,connectionPosition:i,connectionLineType:a,connectionLineStyle:l,connectionLineOptions:c,connectionStatus:d,viewport:f,findNode:h}=Gi(),v=null==(e=Vue.inject(Ur))?void 0:e["connection-line"],p=Vue.computed((()=>{var e;return h(null==(e=o.value)?void 0:e.nodeId)})),g=Vue.computed((()=>{var e,t;return null!=(e=h(null==(t=r.value)?void 0:t.nodeId))?e:null})),m=Vue.computed((()=>({x:(i.value.x-f.value.x)/f.value.zoom,y:(i.value.y-f.value.y)/f.value.zoom}))),y=Vue.computed((()=>c.value.markerStart?`url(#${er(c.value.markerStart,t)})`:"")),w=Vue.computed((()=>c.value.markerEnd?`url(#${er(c.value.markerEnd,t)})`:""));return()=>{var e,t,i,f,h,V,x,b;if(!p.value||!o.value)return null;const _=o.value.handleId,E=o.value.type,S=p.value.handleBounds;let N=null==S?void 0:S[E];if(n.value===bo.Loose&&(N=N||(null==S?void 0:S["source"===E?"target":"source"])),!N)return null;const k=null!=(e=_?N.find((e=>e.id===_)):N[0])?e:null,C=(null==k?void 0:k.position)||wo.Top,{x:M,y:I}=gr(p.value,k,C);let P=null;g.value&&(null==(h=r.value)?void 0:h.handleId)&&(P=n.value===bo.Strict?(null==(V=g.value.handleBounds["source"===E?"target":"source"])?void 0:V.find((e=>{var t;return e.id===(null==(t=r.value)?void 0:t.handleId)})))||null:(null==(x=[...g.value.handleBounds.source||[],...g.value.handleBounds.target||[]])?void 0:x.find((e=>{var t;return e.id===(null==(t=r.value)?void 0:t.handleId)})))||null);const T=null!=(t=null==(b=r.value)?void 0:b.position)?t:C?ia[C]:null;if(!C||!T)return null;const B=null!=(f=null!=(i=a.value)?i:c.value.type)?f:xo.Bezier;let O="";const D={sourceX:M,sourceY:I,sourcePosition:C,targetX:m.value.x,targetY:m.value.y,targetPosition:T};return B===xo.Bezier?[O]=Ci(D):B===xo.Step?[O]=Oi(s(u({},D),{borderRadius:0})):B===xo.SmoothStep?[O]=Oi(D):B===xo.SimpleBezier?[O]=Ii(D):O=`M${M},${I} ${m.value.x},${m.value.y}`,Vue.h("svg",{class:"vue-flow__edges vue-flow__connectionline vue-flow__container"},Vue.h("g",{class:"vue-flow__connection"},v?Vue.h(v,{sourceX:M,sourceY:I,sourcePosition:C,targetX:m.value.x,targetY:m.value.y,targetPosition:T,sourceNode:p.value,sourceHandle:k,targetNode:g.value,targetHandle:P,markerEnd:w.value,markerStart:y.value,connectionStatus:d.value}):Vue.h("path",{d:O,class:[c.value.class,d,"vue-flow__connection-path"],style:u(u({},l.value),c.value.style),"marker-end":w.value,"marker-start":y.value})))}}}),la=["id","markerWidth","markerHeight","markerUnits","orient"],ua=Vue.defineComponent(s(u({},{name:"MarkerType",compatConfig:{MODE:3}}),{props:{id:{},type:{},color:{default:"none"},width:{default:12.5},height:{default:12.5},markerUnits:{default:"strokeWidth"},orient:{default:"auto-start-reverse"},strokeWidth:{default:1}},setup:e=>(e,t)=>(Vue.openBlock(),Vue.createElementBlock("marker",{id:e.id,class:"vue-flow__arrowhead",viewBox:"-10 -10 20 20",refX:"0",refY:"0",markerWidth:`${e.width}`,markerHeight:`${e.height}`,markerUnits:e.markerUnits,orient:e.orient},[e.type===Vue.unref(_o).ArrowClosed?(Vue.openBlock(),Vue.createElementBlock("polyline",{key:0,style:Vue.normalizeStyle({stroke:e.color,fill:e.color,strokeWidth:e.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",points:"-5,-4 0,0 -5,4 -5,-4"},null,4)):Vue.createCommentVNode("",!0),e.type===Vue.unref(_o).Arrow?(Vue.openBlock(),Vue.createElementBlock("polyline",{key:1,style:Vue.normalizeStyle({stroke:e.color,strokeWidth:e.strokeWidth}),"stroke-linecap":"round","stroke-linejoin":"round",fill:"none",points:"-5,-4 0,0 -5,4"},null,4)):Vue.createCommentVNode("",!0)],8,la))})),sa={class:"vue-flow__marker vue-flow__container"},ca=Vue.defineComponent(s(u({},{name:"MarkerDefinitions",compatConfig:{MODE:3}}),{setup(e){const{id:t,edges:n,connectionLineOptions:o,defaultMarkerColor:r}=Gi(),i=Vue.computed((()=>{const e=new Set,i=[],a=n=>{if(n){const o=er(n,t);e.has(o)||("object"==typeof n?i.push(s(u({},n),{id:o,color:n.color||r.value})):i.push({id:o,color:r.value,type:n}),e.add(o))}};for(const t of[o.value.markerEnd,o.value.markerStart])a(t);for(const t of n.value)for(const e of[t.markerStart,t.markerEnd])a(e);return i.sort(((e,t)=>e.id.localeCompare(t.id)))}));return(e,t)=>(Vue.openBlock(),Vue.createElementBlock("svg",sa,[Vue.createElementVNode("defs",null,[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(i.value,(e=>(Vue.openBlock(),Vue.createBlock(ua,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,"stroke-width":e.strokeWidth,orient:e.orient},null,8,["id","type","color","width","height","markerUnits","stroke-width","orient"])))),128))])]))}})),da=Vue.defineComponent(s(u({},{name:"Edges",compatConfig:{MODE:3}}),{setup(e){const{findNode:t,getEdges:n,elevateEdgesOnSelect:o}=Gi();return(e,r)=>(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,null,[Vue.createVNode(ca),(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(Vue.unref(n),(e=>(Vue.openBlock(),Vue.createElementBlock("svg",{key:e.id,class:"vue-flow__edges vue-flow__container",style:Vue.normalizeStyle({zIndex:Vue.unref(wr)(e,Vue.unref(t),Vue.unref(o))})},[Vue.createVNode(Vue.unref(ra),{id:e.id},null,8,["id"])],4)))),128)),Vue.createVNode(Vue.unref(aa))],64))}})),fa=Vue.defineComponent({name:"Node",compatConfig:{MODE:3},props:["id","resizeObserver"],setup(e){const{id:t,noPanClassName:n,selectNodesOnDrag:o,nodesSelectionActive:r,multiSelectionActive:i,emits:a,removeSelectedNodes:l,addSelectedNodes:s,updateNodeDimensions:c,onUpdateNodeInternals:d,getNodeTypes:f,nodeExtent:h,elevateNodesOnSelect:v,disableKeyboardA11y:p,ariaLiveMessage:g,snapToGrid:m,snapGrid:y,nodeDragThreshold:w,nodesDraggable:V,elementsSelectable:x,nodesConnectable:_,nodesFocusable:E}=Gi(),S=Vue.ref(null);Vue.provide(Gr,S),Vue.provide(Yr,e.id);const N=Vue.inject(Ur),k=Vue.getCurrentInstance(),C=ei(),{node:M,parentNode:I}=Jr(e.id),P=Vue.toRef((()=>void 0===M.draggable?V.value:M.draggable)),T=Vue.toRef((()=>void 0===M.selectable?x.value:M.selectable)),B=Vue.toRef((()=>void 0===M.connectable?_.value:M.connectable)),O=Vue.toRef((()=>void 0===M.focusable?E.value:M.focusable)),D=Vue.toRef((()=>!!M.dimensions.width&&!!M.dimensions.height)),A=Vue.computed((()=>{const e=M.type||"default",t=null==N?void 0:N[`node-${e}`];if(t)return t;let n=M.template||f.value[e];if("string"==typeof n&&k){const t=Object.keys(k.appContext.components);t&&t.includes(e)&&(n=Vue.resolveComponent(e,!1))}return n&&"string"!=typeof n?n:(a.error(new br(Vr.NODE_TYPE_MISSING,n)),!1)})),{emit:$,on:z}=Qr(M,a),R=jr({id:e.id,el:S,disabled:()=>!P.value,selectable:T,dragHandle:()=>M.dragHandle,onStart(e){$.dragStart(e)},onDrag(e){$.drag(e)},onStop(e){$.dragStop(e)},onClick(e){W(e)}}),L=Vue.computed((()=>M.class instanceof Function?M.class(M):M.class)),H=Vue.computed((()=>{const e=(M.style instanceof Function?M.style(M):M.style)||{},t=M.width instanceof Function?M.width(M):M.width,n=M.height instanceof Function?M.height(M):M.height;return t&&(e.width="string"==typeof t?t:`${t}px`),n&&(e.height="string"==typeof n?n:`${n}px`),e})),Y=Vue.toRef((()=>{var e,t;return Number(null!=(t=null!=(e=M.zIndex)?e:H.value.zIndex)?t:0)}));return d((t=>{!t.includes(e.id)&&t.length||F()})),Vue.onMounted((()=>{Vue.watch((()=>M.hidden),((t=!1,n,o)=>{!t&&S.value&&(e.resizeObserver.observe(S.value),o((()=>{S.value&&e.resizeObserver.unobserve(S.value)})))}),{immediate:!0,flush:"post"})})),Vue.watch([()=>M.type,()=>M.sourcePosition,()=>M.targetPosition],(()=>{Vue.nextTick((()=>{c([{id:e.id,nodeElement:S.value,forceUpdate:!0}])}))})),Vue.watch([()=>M.position.x,()=>M.position.y,()=>{var e;return null==(e=I.value)?void 0:e.computedPosition.x},()=>{var e;return null==(e=I.value)?void 0:e.computedPosition.y},()=>{var e;return null==(e=I.value)?void 0:e.computedPosition.z},Y,()=>M.selected,()=>M.dimensions.height,()=>M.dimensions.width,()=>{var e;return null==(e=I.value)?void 0:e.dimensions.height},()=>{var e;return null==(e=I.value)?void 0:e.dimensions.width}],(([e,t,n,o,r,i])=>{const a={x:e,y:t,z:i+(v.value&&M.selected?1e3:0)};var l,u;M.computedPosition=void 0!==n&&void 0!==o?{x:(u=a).x+(l={x:n,y:o,z:r}).x,y:u.y+l.y,z:(l.z>u.z?l.z:u.z)+1}:a}),{flush:"post",immediate:!0}),Vue.watch([()=>M.extent,h],(([e,t],[n,o])=>{e===n&&t===o||G()})),"parent"===M.extent||"object"==typeof M.extent&&"range"in M.extent&&"parent"===M.extent.range?b((()=>D)).toBe(!0).then(G):G(),()=>{var e,o;return M.hidden?null:Vue.h("div",{ref:S,"data-id":M.id,class:["vue-flow__node",`vue-flow__node-${!1===A.value?"default":M.type||"default"}`,{[n.value]:P.value,dragging:null==R?void 0:R.value,draggable:P.value,selected:M.selected,selectable:T.value,parent:M.isParent},L.value],style:u({visibility:D.value?"visible":"hidden",zIndex:null!=(e=M.computedPosition.z)?e:Y.value,transform:`translate(${M.computedPosition.x}px,${M.computedPosition.y}px)`,pointerEvents:T.value||P.value?"all":"none"},H.value),tabIndex:O.value?0:void 0,role:O.value?"button":void 0,"aria-describedby":p.value?void 0:`${Co}-${t}`,"aria-label":M.ariaLabel,onMouseenter:X,onMousemove:U,onMouseleave:j,onContextmenu:Z,onClick:W,onDblclick:K,onKeydown:q},[Vue.h(!1===A.value?f.value.default:A.value,{id:M.id,type:M.type,data:M.data,events:u(u({},M.events),z),selected:M.selected,resizing:M.resizing,dragging:R.value,connectable:B.value,position:M.computedPosition,dimensions:M.dimensions,isValidTargetPos:M.isValidTargetPos,isValidSourcePos:M.isValidSourcePos,parent:M.parentNode,parentNodeId:M.parentNode,zIndex:null!=(o=M.computedPosition.z)?o:Y.value,targetPosition:M.targetPosition,sourcePosition:M.sourcePosition,label:M.label,dragHandle:M.dragHandle,onUpdateNodeInternals:F})])};function G(){const e=M.computedPosition;m.value&&(e.x=y.value[0]*Math.round(e.x/y.value[0]),e.y=y.value[1]*Math.round(e.y/y.value[1]));const{computedPosition:t,position:n}=pr(M,e,a.error,h.value,I.value);M.computedPosition.x===t.x&&M.computedPosition.y===t.y||(M.computedPosition=u(u({},M.computedPosition),t)),M.position.x===n.x&&M.position.y===n.y||(M.position=n)}function F(){S.value&&c([{id:e.id,nodeElement:S.value,forceUpdate:!0}])}function X(e){(null==R?void 0:R.value)||$.mouseEnter({event:e,node:M})}function U(e){(null==R?void 0:R.value)||$.mouseMove({event:e,node:M})}function j(e){(null==R?void 0:R.value)||$.mouseLeave({event:e,node:M})}function Z(e){return $.contextMenu({event:e,node:M})}function K(e){return $.doubleClick({event:e,node:M})}function W(e){T.value&&(!o.value||!P.value||w.value>0)&&Or(M,i.value,s,l,r,!1,S.value),$.click({event:e,node:M})}function q(e){if(!So(e)&&!p.value)if(Io.includes(e.key)&&T.value){const t="Escape"===e.key;Or(M,i.value,s,l,r,t,S.value)}else P.value&&M.selected&&Po[e.key]&&(g.value=`Moved selected node ${e.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~M.position.x}, y: ${~~M.position.y}`,C({x:Po[e.key].x,y:Po[e.key].y},e.shiftKey))}}}),ha={height:"0",width:"0"},va=Vue.defineComponent(s(u({},{name:"EdgeLabelRenderer",compatConfig:{MODE:3}}),{setup(e){const{viewportRef:t}=Gi(),n=Vue.toRef((()=>{var e;return null==(e=t.value)?void 0:e.getElementsByClassName("vue-flow__edge-labels")[0]}));return(e,t)=>(Vue.openBlock(),Vue.createElementBlock("svg",null,[(Vue.openBlock(),Vue.createElementBlock("foreignObject",ha,[(Vue.openBlock(),Vue.createBlock(Vue.Teleport,{to:n.value,disabled:!n.value},[Vue.renderSlot(e.$slots,"default")],8,["to","disabled"]))]))]))}}));const pa={class:"vue-flow__nodes vue-flow__container"},ga=Vue.defineComponent(s(u({},{name:"Nodes",compatConfig:{MODE:3}}),{setup(e){const{getNodes:t,updateNodeDimensions:n,emits:o}=Gi(),r=function(e={includeHiddenNodes:!1}){const{nodes:t}=Gi();return Vue.computed((()=>{if(0===t.value.length)return!1;for(const n of t.value)if((e.includeHiddenNodes||!n.hidden)&&(void 0===(null==n?void 0:n.handleBounds)||0===n.dimensions.width||0===n.dimensions.height))return!1;return!0}))}(),i=Vue.ref();return Vue.watch(r,(e=>{e&&Vue.nextTick((()=>{o.nodesInitialized(t.value)}))}),{immediate:!0}),Vue.onMounted((()=>{i.value=new ResizeObserver((e=>{const t=e.map((e=>({id:e.target.getAttribute("data-id"),nodeElement:e.target,forceUpdate:!0})));Vue.nextTick((()=>n(t)))}))})),Vue.onBeforeUnmount((()=>{var e;return null==(e=i.value)?void 0:e.disconnect()})),(e,n)=>(Vue.openBlock(),Vue.createElementBlock("div",pa,[i.value?(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,{key:0},Vue.renderList(Vue.unref(t),((e,t,n,o)=>{const r=[e.id];if(o&&o.key===e.id&&Vue.isMemoSame(o,r))return o;const a=(Vue.openBlock(),Vue.createBlock(Vue.unref(fa),{id:e.id,key:e.id,"resize-observer":i.value},null,8,["id","resize-observer"]));return a.memo=r,a}),n,0),128)):Vue.createCommentVNode("",!0)]))}}));const ma=Vue.createElementVNode("div",{class:"vue-flow__edge-labels"},null,-1),ya=Vue.defineComponent(s(u({},{name:"VueFlow",compatConfig:{MODE:3}}),{props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:["nodesChange","edgesChange","nodesInitialized","miniMapNodeClick","miniMapNodeDoubleClick","miniMapNodeMouseEnter","miniMapNodeMouseMove","miniMapNodeMouseLeave","connect","connectStart","connectEnd","clickConnectStart","clickConnectEnd","moveStart","move","moveEnd","selectionDragStart","selectionDrag","selectionDragStop","selectionContextMenu","selectionStart","selectionEnd","viewportChangeStart","viewportChange","viewportChangeEnd","paneReady","init","paneScroll","paneClick","paneContextMenu","paneMouseEnter","paneMouseMove","paneMouseLeave","updateNodeInternals","error","edgeContextMenu","edgeMouseEnter","edgeMouseMove","edgeMouseLeave","edgeDoubleClick","edgeClick","edgeUpdateStart","edgeUpdate","edgeUpdateEnd","nodeDoubleClick","nodeClick","nodeMouseEnter","nodeMouseMove","nodeMouseLeave","nodeContextMenu","nodeDragStart","nodeDrag","nodeDragStop","update:modelValue","update:nodes","update:edges"],setup(e,{expose:t,emit:n}){const o=e,r=Vue.useSlots(),i=k(o,"modelValue",n),a=k(o,"nodes",n),l=k(o,"edges",n),u=Gi(o),s=ii({modelValue:i,nodes:a,edges:l},o,u);return function(e,t){Vue.onBeforeMount((()=>{for(const[n,o]of Object.entries(t.value)){const t=t=>{e(n,t)};o.fns.add(t),d((()=>{o.off(t)}))}}))}(n,u.hooks),function(){const e=Gi();Vue.watch((()=>e.viewportHelper.value.viewportInitialized),(t=>{t&&setTimeout((()=>{e.emits.init(e),e.emits.paneReady(e)}),1)}))}(),function(){const{emits:e}=Gi();Vue.onMounted((()=>{if(Tr()){const t=document.querySelector(".vue-flow__pane");t&&"1"!==window.getComputedStyle(t).zIndex&&e.error(new br(Vr.MISSING_STYLES))}}))}(),Vue.provide(Ur,r),Vue.onUnmounted((()=>{s()})),t(u),(e,t)=>(Vue.openBlock(),Vue.createElementBlock("div",{ref:Vue.unref(u).vueFlowRef,class:"vue-flow"},[Vue.createVNode(Ki,null,{default:Vue.withCtx((()=>[Vue.createVNode(da),ma,Vue.createVNode(ga),Vue.renderSlot(e.$slots,"zoom-pane")])),_:3}),Vue.renderSlot(e.$slots,"default"),Vue.createVNode(Qi)],512))}})),wa=Vue.defineComponent(s(u({},{name:"Panel",compatConfig:{MODE:3}}),{props:{position:{}},setup(e){const t=e,{userSelectionActive:n}=Gi(),o=Vue.computed((()=>`${t.position}`.split("-")));return(e,t)=>(Vue.openBlock(),Vue.createElementBlock("div",{class:Vue.normalizeClass(["vue-flow__panel",o.value]),style:Vue.normalizeStyle({pointerEvents:Vue.unref(n)?"none":"all"})},[Vue.renderSlot(e.$slots,"default")],6))}}));function Va(e){const{type:t,id:n,nodeId:o,onConnect:r,onDisconnect:i}=e,{connectionLookup:a}=Gi(),l=qr(),u=Vue.toRef((()=>{var e;return null!=(e=Vue.toValue(o))?e:l})),s=Vue.toRef((()=>Vue.toValue(t))),c=Vue.toRef((()=>{var e;return null!=(e=Vue.toValue(n))?e:null})),d=Vue.ref(null),f=Vue.ref();return Vue.watch((()=>a.value.get(`${u.value}-${s.value}-${c.value}`)),(e=>{(function(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(const n of e.keys())if(!t.has(n))return!1;return!0})(f.value,e)||(f.value=e)}),{immediate:!0}),Vue.watch([f,()=>void 0!==r,()=>void 0!==i],(([e=new Map])=>{d.value&&d.value!==e&&(Rr(d.value,e,i),Rr(e,d.value,r)),d.value=e}),{immediate:!0}),Vue.computed((()=>f.value?Array.from(f.value.values()):[]))}function xa(e){const{findNode:t}=Gi();return Vue.computed({get(){var n,o;const r=Vue.toValue(e);if(!Array.isArray(r)){const e=t(r);return e?{id:e.id,type:e.type,data:null!=(n=e.data)?n:null}:null}const i=[];for(const e of r){const n=t(e);n&&i.push({id:n.id,type:n.type,data:null!=(o=n.data)?o:null})}return i},set(){Pr()}})}export{wo as P,ya as _,wa as a,Va as b,ci as c,xa as d,_i as e,va as f,Oi as g,Gi as u};
