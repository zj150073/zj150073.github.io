var re=Object.defineProperty,le=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var F=(s,o,e)=>o in s?re(s,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[o]=e,b=(s,o)=>{for(var e in o||(o={}))H.call(o,e)&&F(s,e,o[e]);if(E)for(var e of E(o))_.call(o,e)&&F(s,e,o[e]);return s},M=(s,o)=>le(s,ie(o));var R=(s,o)=>{var e={};for(var n in s)H.call(s,n)&&o.indexOf(n)<0&&(e[n]=s[n]);if(s!=null&&E)for(var n of E(s))o.indexOf(n)<0&&_.call(s,n)&&(e[n]=s[n]);return e};import{k as ue,n as A,b4 as J,bJ as ce,d as Q,b3 as de,q as z,t as v,D as pe,x as fe,o as C,g as N,h as L,w as me,e as U,B as T,u as r,y as ge,G as B,z as ye,A as ve,c as V,K as Ce,$ as he,F as be,b as W,_ as Te,T as we,a0 as Ne,v as P,j as X,N as x,aR as j,bK as d,m as I,bw as Se,bv as q,bL as Ee,aC as Me}from"./index-CY8b9gUt.js";import{u as Be,b as ke}from"./index-Dk95E3pd.js";import{E as ze}from"./index-jQ9l5ppr.js";import{E as G,_ as Le}from"./use-form-item-DQojTAwn.js";import{m as xe}from"./el-input-Bg_Q_5wv.js";import{i as Ie,T as K,a as Oe}from"./icon-DaMmPgsT.js";import{E as $e}from"./aria-BUADUvnR.js";const Y=["success","info","warning","error"],l=xe({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:J?document.body:void 0}),De=ue({customClass:{type:String,default:l.customClass},center:{type:Boolean,default:l.center},dangerouslyUseHTMLString:{type:Boolean,default:l.dangerouslyUseHTMLString},duration:{type:Number,default:l.duration},icon:{type:Ie,default:l.icon},id:{type:String,default:l.id},message:{type:A([String,Object,Function]),default:l.message},onClose:{type:A(Function),default:l.onClose},showClose:{type:Boolean,default:l.showClose},type:{type:String,values:Y,default:l.type},plain:{type:Boolean,default:l.plain},offset:{type:Number,default:l.offset},zIndex:{type:Number,default:l.zIndex},grouping:{type:Boolean,default:l.grouping},repeatNum:{type:Number,default:l.repeatNum}}),Fe={destroy:()=>!0},c=ce([]),He=s=>{const o=c.findIndex(t=>t.id===s),e=c[o];let n;return o>0&&(n=c[o-1]),{current:e,prev:n}},_e=s=>{const{prev:o}=He(s);return o?o.vm.exposed.bottom.value:0},Re=(s,o)=>c.findIndex(n=>n.id===s)>0?16:o,Ae=Q({name:"ElMessage"}),Ue=Q(M(b({},Ae),{props:De,emits:Fe,setup(s,{expose:o}){const e=s,{Close:n}=Oe,{ns:t,zIndex:f}=de("message"),{currentZIndex:p,nextZIndex:m}=f,i=z(),u=z(!1),g=z(0);let h;const y=v(()=>e.type?e.type==="error"?"danger":e.type:"info"),se=v(()=>{const a=e.type;return{[t.bm("icon",a)]:a&&K[a]}}),O=v(()=>e.icon||K[e.type]||""),oe=v(()=>_e(e.id)),$=v(()=>Re(e.id,e.offset)+oe.value),ne=v(()=>g.value+$.value),te=v(()=>({top:`${$.value}px`,zIndex:p.value}));function k(){e.duration!==0&&({stop:h}=Ne(()=>{S()},e.duration))}function D(){h==null||h()}function S(){u.value=!1}function ae({code:a}){a===$e.esc&&S()}return pe(()=>{k(),m(),u.value=!0}),fe(()=>e.repeatNum,()=>{D(),k()}),Be(document,"keydown",ae),ke(i,()=>{g.value=i.value.getBoundingClientRect().height}),o({visible:u,bottom:ne,close:S}),(a,Ke)=>(C(),N(we,{name:r(t).b("fade"),onBeforeLeave:a.onClose,onAfterLeave:Ze=>a.$emit("destroy"),persisted:""},{default:L(()=>[me(U("div",{id:a.id,ref_key:"messageRef",ref:i,class:T([r(t).b(),{[r(t).m(a.type)]:a.type},r(t).is("center",a.center),r(t).is("closable",a.showClose),r(t).is("plain",a.plain),a.customClass]),style:ge(r(te)),role:"alert",onMouseenter:D,onMouseleave:k},[a.repeatNum>1?(C(),N(r(ze),{key:0,value:a.repeatNum,type:r(y),class:T(r(t).e("badge"))},null,8,["value","type","class"])):B("v-if",!0),r(O)?(C(),N(r(G),{key:1,class:T([r(t).e("icon"),r(se)])},{default:L(()=>[(C(),N(ye(r(O))))]),_:1},8,["class"])):B("v-if",!0),ve(a.$slots,"default",{},()=>[a.dangerouslyUseHTMLString?(C(),V(he,{key:1},[B(" Caution here, message could've been compromised, never use user's input as message "),U("p",{class:T(r(t).e("content")),innerHTML:a.message},null,10,["innerHTML"])],2112)):(C(),V("p",{key:0,class:T(r(t).e("content"))},Ce(a.message),3))]),a.showClose?(C(),N(r(G),{key:2,class:T(r(t).e("closeBtn")),onClick:be(S,["stop"])},{default:L(()=>[W(r(n))]),_:1},8,["class","onClick"])):B("v-if",!0)],46,["id"]),[[Te,u.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}}));var Ve=Le(Ue,[["__file","message.vue"]]);let Pe=1;const ee=s=>{const o=!s||P(s)||X(s)||x(s)?{message:s}:s,e=b(b({},l),o);if(!e.appendTo)e.appendTo=document.body;else if(P(e.appendTo)){let n=document.querySelector(e.appendTo);Se(n)||(n=document.body),e.appendTo=n}return j(d.grouping)&&!e.grouping&&(e.grouping=d.grouping),I(d.duration)&&e.duration===3e3&&(e.duration=d.duration),I(d.offset)&&e.offset===16&&(e.offset=d.offset),j(d.showClose)&&!e.showClose&&(e.showClose=d.showClose),e},je=s=>{const o=c.indexOf(s);if(o===-1)return;c.splice(o,1);const{handler:e}=s;e.close()},qe=(n,e)=>{var t=n,{appendTo:s}=t,o=R(t,["appendTo"]);const f=`message_${Pe++}`,p=o.onClose,m=document.createElement("div"),i=M(b({},o),{id:f,onClose:()=>{p==null||p(),je(y)},onDestroy:()=>{q(null,m)}}),u=W(Ve,i,x(i.message)||X(i.message)?{default:x(i.message)?i.message:()=>i.message}:null);u.appContext=e||w._context,q(u,m),s.appendChild(m.firstElementChild);const g=u.component,y={id:f,vnode:u,vm:g,handler:{close:()=>{g.exposed.visible.value=!1}},props:u.component.props};return y},w=(s={},o)=>{if(!J)return{close:()=>{}};const e=ee(s);if(e.grouping&&c.length){const t=c.find(({vnode:f})=>{var p;return((p=f.props)==null?void 0:p.message)===e.message});if(t)return t.props.repeatNum+=1,t.props.type=e.type,t.handler}if(I(d.max)&&c.length>=d.max)return{close:()=>{}};const n=qe(e,o);return c.push(n),n.handler};Y.forEach(s=>{w[s]=(o={},e)=>{const n=ee(o);return w(M(b({},n),{type:s}),e)}});function Ge(s){for(const o of c)(!s||s===o.props.type)&&o.handler.close()}w.closeAll=Ge;w._context=null;const Z=Ee(w,"$message"),ns=(s,o)=>{if(o){const{icon:e,type:n="info",dangerouslyUseHTMLString:t=!1,customClass:f="antd",duration:p=2e3,showClose:m=!1,center:i=!1,offset:u=20,appendTo:g=document.body,grouping:h=!1,onClose:y}=o;return Z({message:s,type:n,icon:e,dangerouslyUseHTMLString:t,duration:p,showClose:m,center:i,offset:u,appendTo:g,grouping:h,customClass:f==="antd"?"pure-message":"",onClose:()=>Me(y)?y():null})}else return Z({message:s,customClass:"pure-message"})};export{ns as m};
