import{_ as e}from"./form.vue_vue_type_script_setup_true_lang-CVso2lnB.js";import{t,K as i,a as n,m as o}from"./index-B2iGRBN9.js";import{f as l}from"./system-B7ZtQss2.js";import{u as r}from"./hooks-DEksGQ11.js";import{j as s,C as a,n as p}from"./@pureadmin-f9nW_l6N.js";import{S as u,r as m,J as c,s as d,x as j,F as v,a1 as f,Q as h}from"./@vue-CFXrvzpc.js";import"./index-CAaOogHN.js";import"./element-plus-DsFyl0Kk.js";import"./lodash-es-BgzC0s9P.js";import"./@element-plus-Bqpau_gV.js";import"./@popperjs-D3lHDW-0.js";import"./@ctrl-D2oWfImC.js";import"./dayjs-BWHVJBZs.js";import"./@amap-Bx2D3lnM.js";import"./async-validator-Cuo4gI4y.js";import"./memoize-one-Ds0C_khL.js";import"./normalize-wheel-es-Vn5vHDCm.js";import"./@floating-ui-kghe82LF.js";import"./index-DfPfRVYx.js";import"./index-cFEbqXgc.js";import"./vite-plugin-fake-server-CytHVkXj.js";import"./@faker-js-CRy60TLX.js";import"./version-rocket-chvOQqaV.js";import"./@iconify-icons-CxRB8ffa.js";import"./@vueuse-tP1Y4vdd.js";import"./defu-iUM7Auia.js";import"./framesync-CUhBu5sQ.js";import"./style-value-types-UCYNu-x1.js";import"./popmotion-DRTv1-mp.js";import"./hey-listen-DkH12NBk.js";import"./plus-pro-components-CYEVFP0q.js";import"./sortablejs-DhhifNSC.js";import"./axios-B1L2Kzed.js";import"./vue-i18n-DB-7wkrF.js";import"./@intlify-DfwD9yJy.js";import"./js-cookie-BXEMiIsG.js";import"./pinia-DzAV29mk.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-CGx-uoKe.js";import"./axs-request-CnYniYE7.js";import"./nprogress-L6f6pfEY.js";import"./echarts-D2b6xzX-.js";import"./zrender-CUz1GrA9.js";import"./tslib-ZseNXxlj.js";import"./vxe-table-CPtn8uUL.js";import"./xe-utils-CdBoVBzI.js";import"./dom-zindex-Ckn4mXSH.js";import"./responsive-storage-5vfjqqcs.js";import"./vue-DWYrQbHy.js";import"./@iconify-BUzAfhQo.js";/* empty css                 */import"./vue-tippy-DPYCMIfw.js";function y(){const y=u({title:""}),g=m(),x=m([]),w=m(!0),b=(e,t=!1)=>{switch(e){case 0:return t?"菜单":"primary";case 1:return t?"iframe":"warning";case 2:return t?"外链":"danger";case 3:return t?"按钮":"info"}},k=[{label:"菜单名称",prop:"title",align:"left",cellRenderer:({row:e})=>d(v,null,[d("span",{class:"inline-block mr-1"},[j(r(e.icon),{style:{paddingTop:"1px"}})]),d("span",null,[t(e.title)])])},{label:"菜单类型",prop:"menuType",width:100,cellRenderer:({row:e,props:t})=>{let i;return d(f("el-tag"),{size:t.size,type:b(e.menuType),effect:"plain"},"function"==typeof(n=i=b(e.menuType,!0))||"[object Object]"===Object.prototype.toString.call(n)&&!h(n)?i:{default:()=>[i]});var n}},{label:"路由路径",prop:"path"},{label:"组件路径",prop:"component",formatter:({path:e,component:t})=>s(t)?e:t},{label:"权限标识",prop:"auths"},{label:"排序",prop:"rank",width:100},{label:"隐藏",prop:"showLink",formatter:({showLink:e})=>e?"否":"是",width:100},{label:"操作",fixed:"right",width:210,slot:"operation"}];function T(){return e=this,n=null,o=function*(){w.value=!0;const{data:e}=yield l();let n=e;s(y.title)||(n=n.filter((e=>t(e.title).includes(y.title)))),x.value=i(n),setTimeout((()=>{w.value=!1}),500)},new Promise(((t,i)=>{var l=e=>{try{s(o.next(e))}catch(t){i(t)}},r=e=>{try{s(o.throw(e))}catch(t){i(t)}},s=e=>e.done?t(e.value):Promise.resolve(e.value).then(l,r);s((o=o.apply(e,n)).next())}));var e,n,o}function L(e){if(!e||!e.length)return;const i=[];for(let n=0;n<e.length;n++)e[n].title=t(e[n].title),L(e[n].children),i.push(e[n]);return i}return c((()=>{T()})),{form:y,loading:w,columns:k,dataList:x,onSearch:T,resetForm:function(e){e&&(e.resetFields(),T())},openDialog:function(i="新增",l){var r,s,u,m,c,d,v,f,h,y,w,b,k,S,I,P,_,z,$,O,R;n({title:`${i}菜单`,props:{formInline:{menuType:null!=(r=null==l?void 0:l.menuType)?r:0,higherMenuOptions:L(a(x.value)),parentId:null!=(s=null==l?void 0:l.parentId)?s:0,title:null!=(u=null==l?void 0:l.title)?u:"",name:null!=(m=null==l?void 0:l.name)?m:"",path:null!=(c=null==l?void 0:l.path)?c:"",component:null!=(d=null==l?void 0:l.component)?d:"",rank:null!=(v=null==l?void 0:l.rank)?v:99,redirect:null!=(f=null==l?void 0:l.redirect)?f:"",icon:null!=(h=null==l?void 0:l.icon)?h:"",extraIcon:null!=(y=null==l?void 0:l.extraIcon)?y:"",enterTransition:null!=(w=null==l?void 0:l.enterTransition)?w:"",leaveTransition:null!=(b=null==l?void 0:l.leaveTransition)?b:"",activePath:null!=(k=null==l?void 0:l.activePath)?k:"",auths:null!=(S=null==l?void 0:l.auths)?S:"",frameSrc:null!=(I=null==l?void 0:l.frameSrc)?I:"",frameLoading:null==(P=null==l?void 0:l.frameLoading)||P,keepAlive:null!=(_=null==l?void 0:l.keepAlive)&&_,hiddenTag:null!=(z=null==l?void 0:l.hiddenTag)&&z,fixedTag:null!=($=null==l?void 0:l.fixedTag)&&$,showLink:null==(O=null==l?void 0:l.showLink)||O,showParent:null!=(R=null==l?void 0:l.showParent)&&R}},width:"45%",draggable:!0,fullscreen:p(),fullscreenIcon:!0,closeOnClickModal:!1,contentRenderer:()=>j(e,{ref:g}),beforeSure:(e,{options:n})=>{const l=g.value.getRef(),r=n.props.formInline;function s(){o(`您${i}了菜单名称为${t(r.title)}的这条数据`,{type:"success"}),e(),T()}l.validate((e=>{e&&s()}))}})},handleDelete:function(e){o(`您删除了菜单名称为${t(e.title)}的这条数据`,{type:"success"}),T()},handleSelectionChange:function(e){}}}export{y as useMenu};
