var e=Object.defineProperty,t=Object.defineProperties,l=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,c=Object.prototype.propertyIsEnumerable,o=(t,l,n)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[l]=n,a=(e,t)=>{for(var l in t||(t={}))r.call(t,l)&&o(e,l,t[l]);if(n)for(var l of n(t))c.call(t,l)&&o(e,l,t[l]);return e};import{o as s,c as i,a as p,aY as u,d as h,r as v,b as g,J as d,e as w,D as m,s as f,i as y,P as x,v as C}from"./@vue-CFXrvzpc.js";import{C as b}from"./cropperjs-jYnVaWAX.js";import{a as M}from"./@vueuse-tP1Y4vdd.js";import{l as L}from"./index-B2iGRBN9.js";import{u as B,d as V}from"./vue-tippy-DPYCMIfw.js";import{y as j,_ as S,W as O,h as R,v as H,M as z}from"./@pureadmin-f9nW_l6N.js";import{aR as k}from"./element-plus-DsFyl0Kk.js";const P={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 1024 1024"},D=[p("path",{fill:"currentColor",d:"M168 504.2c1-43.7 10-86.1 26.9-126 17.3-41 42.1-77.7 73.7-109.4S337 212.3 378 195c42.4-17.9 87.4-27 133.9-27s91.5 9.1 133.8 27A341.5 341.5 0 0 1 755 268.8c9.9 9.9 19.2 20.4 27.8 31.4l-60.2 47a8 8 0 0 0 3 14.1l175.7 43c5 1.2 9.9-2.6 9.9-7.7l.8-180.9c0-6.7-7.7-10.5-12.9-6.3l-56.4 44.1C765.8 155.1 646.2 92 511.8 92 282.7 92 96.3 275.6 92 503.8a8 8 0 0 0 8 8.2h60c4.4 0 7.9-3.5 8-7.8m756 7.8h-60c-4.4 0-7.9 3.5-8 7.8-1 43.7-10 86.1-26.9 126-17.3 41-42.1 77.8-73.7 109.4A342.45 342.45 0 0 1 512.1 856a342.24 342.24 0 0 1-243.2-100.8c-9.9-9.9-19.2-20.4-27.8-31.4l60.2-47a8 8 0 0 0-3-14.1l-175.7-43c-5-1.2-9.9 2.6-9.9 7.7l-.7 181c0 6.7 7.7 10.5 12.9 6.3l56.4-44.1C258.2 868.9 377.8 932 512.2 932c229.2 0 415.5-183.7 419.8-411.8a8 8 0 0 0-8-8.2"},null,-1)];const E={render:function(e,t){return s(),i("svg",P,[...D])}},A={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 1024 1024"},I=[p("path",{fill:"currentColor",d:"M400 317.7h73.9V656c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V317.7H624c6.7 0 10.4-7.7 6.3-12.9L518.3 163a8 8 0 0 0-12.6 0l-112 141.7c-4.1 5.3-.4 13 6.3 13M878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8"},null,-1)];const Y={render:function(e,t){return s(),i("svg",A,[...I])}},T={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",class:"icon",viewBox:"0 0 1024 1024"},W=[p("path",{d:"m296.992 216.992-272 272L3.008 512l21.984 23.008 272 272 46.016-46.016L126.016 544h772L680.992 760.992l46.016 46.016 272-272L1020.992 512l-21.984-23.008-272-272-46.048 46.048L898.016 480h-772l216.96-216.992z"},null,-1)];const X={render:function(e,t){return s(),i("svg",T,[...W])}},F={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",class:"icon",viewBox:"0 0 1024 1024"},U=[p("path",{d:"m512 67.008-23.008 21.984-256 256 46.048 46.048L480 190.016v644L279.008 632.96l-46.048 46.08 256 256 23.008 21.984 23.008-21.984 256-256-46.016-46.016L544 834.016v-644l200.992 200.96 46.016-45.984-256-256z"},null,-1)];const q={render:function(e,t){return s(),i("svg",F,[...U])}},J={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 1024 1024"},N=[p("path",{fill:"currentColor",d:"M868 545.5 536.1 163a31.96 31.96 0 0 0-48.3 0L156 545.5a7.97 7.97 0 0 0 6 13.2h81c4.6 0 9-2 12.1-5.5L474 300.9V864c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V300.9l218.9 252.3c3 3.5 7.4 5.5 12.1 5.5h81c6.8 0 10.5-8 6-13.2"},null,-1)];const $={render:function(e,t){return s(),i("svg",J,[...N])}},G={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",class:"icon",viewBox:"0 0 1024 1024"},K=[u('<path d="M956.8 988.8H585.6c-16 0-25.6-9.6-25.6-28.8V576c0-16 9.6-28.8 25.6-28.8h371.2c16 0 25.6 9.6 25.6 28.8v384c0 16-9.6 28.8-25.6 28.8M608 937.6h326.4V598.4H608zm-121.6 44.8C262.4 982.4 144 848 144 595.2c0-19.2 9.6-28.8 25.6-28.8s25.6 12.8 25.6 28.8c0 220.8 96 326.4 288 326.4 16 0 25.6 12.8 25.6 28.8s-6.4 32-22.4 32"></path><path d="M262.4 694.4c-6.4 0-9.6-3.2-16-6.4L160 601.6c-9.6-9.6-9.6-22.4 0-28.8s22.4-9.6 28.8 0l86.4 86.4c9.6 9.6 9.6 22.4 0 28.8-3.2 3.2-6.4 6.4-12.8 6.4"></path><path d="M86.4 694.4c-6.4 0-9.6-3.2-16-6.4-9.6-9.6-9.6-22.4 0-28.8l86.4-86.4c9.6-9.6 22.4-9.6 28.8 0 9.6 9.6 9.6 22.4 0 28.8L99.2 688c-3.2 3.2-6.4 6.4-12.8 6.4m790.4-249.6c-16 0-28.8-12.8-28.8-32 0-224-99.2-336-300.8-336-16 0-28.8-12.8-28.8-32s9.6-32 28.8-32c233.6 0 355.2 137.6 355.2 396.8 0 22.4-9.6 35.2-25.6 35.2"></path><path d="M876.8 448c-6.4 0-9.6-3.2-16-6.4l-86.4-86.4c-9.6-9.6-9.6-22.4 0-28.8s22.4-9.6 28.8 0l86.4 86.4c9.6 9.6 9.6 22.4 0 28.8 0 3.2-6.4 6.4-12.8 6.4"></path><path d="M876.8 448c-6.4 0-9.6-3.2-16-6.4-9.6-9.6-9.6-22.4 0-28.8l86.4-86.4c9.6-9.6 22.4-9.6 28.8 0s9.6 22.4 0 28.8l-86.4 86.4c-3.2 3.2-6.4 6.4-12.8 6.4M288 524.8C156.8 524.8 48 416 48 278.4S156.8 35.2 288 35.2 528 144 528 281.6 419.2 524.8 288 524.8m-3.2-432c-99.2 0-179.2 83.2-179.2 185.6S185.6 464 284.8 464 464 380.8 464 278.4 384 92.8 284.8 92.8"></path>',5)];const Q={render:function(e,t){return s(),i("svg",G,[...K])}},Z={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 1024 1024"},_=[p("path",{fill:"currentColor",d:"M862 465.3h-81c-4.6 0-9 2-12.1 5.5L550 723.1V160c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v563.1L255.1 470.8c-3-3.5-7.4-5.5-12.1-5.5h-81c-6.8 0-10.5 8.1-6 13.2L487.9 861a31.96 31.96 0 0 0 48.3 0L868 478.5c4.5-5.2.8-13.2-6-13.2"},null,-1)];const ee={render:function(e,t){return s(),i("svg",Z,[..._])}},te={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 1024 1024"},le=[p("path",{fill:"currentColor",d:"M872 474H286.9l350.2-304c5.6-4.9 2.2-14-5.2-14h-88.5c-3.9 0-7.6 1.4-10.5 3.9L155 487.8a31.96 31.96 0 0 0 0 48.3L535.1 866c1.5 1.3 3.3 2 5.2 2h91.5c7.4 0 10.8-9.2 5.2-14L286.9 550H872c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8"},null,-1)];const ne={render:function(e,t){return s(),i("svg",te,[...le])}},re={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 1024 1024"},ce=[p("path",{fill:"currentColor",d:"M505.7 661a8 8 0 0 0 12.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8"},null,-1)];const oe={render:function(e,t){return s(),i("svg",re,[...ce])}},ae={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 1024 1024"},se=[p("path",{fill:"currentColor",d:"M869 487.8 491.2 159.9c-2.9-2.5-6.6-3.9-10.5-3.9h-88.5c-7.4 0-10.8 9.2-5.2 14l350.2 304H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h585.1L386.9 854c-5.6 4.9-2.2 14 5.2 14h91.5c1.9 0 3.8-.7 5.2-2L869 536.2a32.07 32.07 0 0 0 0-48.4"},null,-1)];const ie={render:function(e,t){return s(),i("svg",ae,[...se])}},pe={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 1024 1024"},ue=[p("path",{fill:"currentColor",d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32m-44 402H188V494h440z"},null,-1),p("path",{fill:"currentColor",d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8 11 40.7 14 82.7 8.9 124.8-.7 5.4-1.4 10.8-2.4 16.1h74.9c14.8-103.6-11.3-213-81-302.3"},null,-1)];const he={render:function(e,t){return s(),i("svg",pe,[...ue])}},ve={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 1024 1024"},ge=[p("path",{fill:"currentColor",d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8m284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11M696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430"},null,-1)];const de={render:function(e,t){return s(),i("svg",ve,[...ge])}},we={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 1024 1024"},me=[p("path",{fill:"currentColor",d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2-69.6 89.2-95.7 198.6-81.1 302.4h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8"},null,-1),p("path",{fill:"currentColor",d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32m-44 402H396V494h440z"},null,-1)];const fe={render:function(e,t){return s(),i("svg",we,[...me])}},ye={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 1024 1024"},xe=[p("path",{fill:"currentColor",d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8m284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11M696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430"},null,-1)];const Ce={render:function(e,t){return s(),i("svg",ye,[...xe])}},be={aspectRatio:1,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,autoCrop:!0,background:!0,highlight:!0,center:!0,responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,scalable:!0,modal:!0,guides:!0,movable:!0,rotatable:!0},Me={src:{type:String,required:!0},alt:{type:String},circled:{type:Boolean,default:!1},isClose:{type:Boolean,default:!0},realTimePreview:{type:Boolean,default:!0},height:{type:[String,Number],default:"360px"},crossorigin:{type:String,default:void 0},imageStyle:{type:Object,default:()=>({})},options:{type:Object,default:()=>({})}},Le=z(h({name:"ReCropper",props:Me,setup(e,{attrs:n,emit:r}){const c=v(),o=v(),s=v(),i=v(e.circled),p=v(e.isClose),u=v(e.src),C=v(!1),z=v();let P=1,D=1;const A=O(J,80),I=g((()=>a({height:e.height,maxWidth:"100%"},e.imageStyle))),T=g((()=>[n.class,{"re-circled":i.value}])),W=g((()=>["p-[6px]","h-[30px]","w-[30px]","outline-none","rounded-[4px]","cursor-pointer","hover:bg-[rgba(0,0,0,0.06)]"])),F=g((()=>({height:`${e.height}`.replace(/px/,"")+"px"})));function U(){return n=this,c=null,i=function*(){const n=m(o);var c;n&&(s.value=new b(n,a((c=a({},be),t(c,l({ready:()=>{C.value=!0,J(),S(400).then((()=>r("readied",s.value)))},crop(){A()},zoom(){A()},cropmove(){A()}}))),e.options)))},new Promise(((e,t)=>{var l=e=>{try{o(i.next(e))}catch(l){t(l)}},r=e=>{try{o(i.throw(e))}catch(l){t(l)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(l,r);o((i=i.apply(n,c)).next())}));var n,c,i}function J(){e.realTimePreview&&N()}function N(){if(!s.value)return;(i.value?function(){const e=s.value.getCroppedCanvas(),t=document.createElement("canvas"),l=t.getContext("2d"),n=e.width,r=e.height;return t.width=n,t.height=r,l.imageSmoothingEnabled=!0,l.drawImage(e,0,0,n,r),l.globalCompositeOperation="destination-in",l.beginPath(),l.arc(n/2,r/2,Math.min(n,r)/2,0,2*Math.PI,!0),l.fill(),t}():s.value.getCroppedCanvas()).toBlob((e=>{if(!e)return;const t=new FileReader;t.readAsDataURL(e),t.onloadend=t=>{var l;(null==(l=t.target)?void 0:l.result)&&e&&(z.value=t.target.result,r("cropper",{base64:t.target.result,blob:e,info:a({size:e.size},s.value.getData())}))},t.onerror=()=>{r("error")}}))}function G(e,t){var l,n,r,c;"scaleX"===e&&(P=t=-1===P?1:-1),"scaleY"===e&&(D=t=-1===D?1:-1),t&&H(t)?null==(n=null==(l=s.value)?void 0:l[e])||n.call(l,...t):null==(c=null==(r=s.value)?void 0:r[e])||c.call(r,t)}function K(e){const t=new FileReader;return t.readAsDataURL(e),u.value="",t.onload=e=>{var t;u.value=null==(t=e.target)?void 0:t.result},t.onloadend=()=>{U()},!1}d(U),w((()=>{var e;null==(e=s.value)||e.destroy(),C.value=!1,s.value=null,z.value="",P=1,D=1})),j(c,(()=>G("reset")));const Z=h({directives:{tippy:V,longpress:L},setup:()=>()=>f("div",{class:"flex flex-wrap w-[60px] justify-between"},[f(k,{accept:"image/*","show-file-list":!1,"before-upload":K},{default:()=>[y(f(Y,{class:W.value},null),[[x("tippy"),{content:"上传",placement:"left-start"}]])]}),y(f(oe,{class:W.value,onClick:()=>R(z.value,"cropping.png")},null),[[x("tippy"),{content:"下载",placement:"right-start"}]]),y(f(Q,{class:W.value,onClick:()=>{i.value=!i.value,J()}},null),[[x("tippy"),{content:"圆形、矩形裁剪",placement:"left-start"}]]),y(f(E,{class:W.value,onClick:()=>G("reset")},null),[[x("tippy"),{content:"重置",placement:"right-start"}]]),y(f($,{class:W.value},null),[[x("tippy"),{content:"上移（可长按）",placement:"left-start"}],[x("longpress"),()=>G("move",[0,-10]),"0:100"]]),y(f(ee,{class:W.value},null),[[x("tippy"),{content:"下移（可长按）",placement:"right-start"}],[x("longpress"),()=>G("move",[0,10]),"0:100"]]),y(f(ne,{class:W.value},null),[[x("tippy"),{content:"左移（可长按）",placement:"left-start"}],[x("longpress"),()=>G("move",[-10,0]),"0:100"]]),y(f(ie,{class:W.value},null),[[x("tippy"),{content:"右移（可长按）",placement:"right-start"}],[x("longpress"),()=>G("move",[10,0]),"0:100"]]),y(f(X,{class:W.value,onClick:()=>G("scaleX",-1)},null),[[x("tippy"),{content:"水平翻转",placement:"left-start"}]]),y(f(q,{class:W.value,onClick:()=>G("scaleY",-1)},null),[[x("tippy"),{content:"垂直翻转",placement:"right-start"}]]),y(f(he,{class:W.value,onClick:()=>G("rotate",-45)},null),[[x("tippy"),{content:"逆时针旋转",placement:"left-start"}]]),y(f(fe,{class:W.value,onClick:()=>G("rotate",45)},null),[[x("tippy"),{content:"顺时针旋转",placement:"right-start"}]]),y(f(de,{class:W.value},null),[[x("tippy"),{content:"放大（可长按）",placement:"left-start"}],[x("longpress"),()=>G("zoom",.1),"0:100"]]),y(f(Ce,{class:W.value},null),[[x("tippy"),{content:"缩小（可长按）",placement:"right-start"}],[x("longpress"),()=>G("zoom",-.1),"0:100"]])])});return{inSrc:u,props:e,imgElRef:o,tippyElRef:c,getClass:T,getWrapperStyle:F,getImageStyle:I,isReady:C,croppered:N,onContextmenu:function(e){e.preventDefault();const{show:t,setProps:l,destroy:n,state:r}=B(c,{content:Z,arrow:!1,theme:"light",trigger:"manual",interactive:!0,appendTo:"parent",placement:"bottom-end"});if(l({getReferenceClientRect:()=>({width:0,height:0,top:e.clientY,bottom:e.clientY,left:e.clientX,right:e.clientX})}),t(),p.value){if(!r.value.isShown&&!r.value.isVisible)return;M(c,"click",n)}}}},render(){const{inSrc:e,isReady:t,getClass:l,getImageStyle:n,onContextmenu:r,getWrapperStyle:c}=this,{alt:o,crossorigin:a}=this.props;return e?f("div",{ref:"tippyElRef",class:l,style:c,onContextmenu:e=>r(e)},[y(f("img",{ref:"imgElRef",style:n,src:e,alt:o,crossorigin:a},null),[[C,t]])]):null}}));export{Le as R};
