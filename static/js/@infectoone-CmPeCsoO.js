var e=Object.defineProperty,t=Object.defineProperties,n=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(t,n,a)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[n]=a,l=(e,t)=>{for(var n in t||(t={}))r.call(t,n)&&o(e,n,t[n]);if(a)for(var n of a(t))i.call(t,n)&&o(e,n,t[n]);return e},s=(e,a)=>t(e,n(a));import{d as u}from"./dayjs-BWHVJBZs.js";import{d,y as c,z as f,b as g,r as m,A as h,o as b,c as v,a as p,f as y,B as w,C as x,q as k,l as B,j as C,D,s as E,E as O,p as M,F as T,g as Y,G as L,m as S,h as H,H as _,w as I,n as j,I as $,T as G,J as z,K as A,L as P,M as F}from"./@vue-CFXrvzpc.js";typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"&&self;!function(){var e="week",t="year"}();!function(){var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},t=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d\d/,a=/\d\d?/,r=/\d*[^-_:/,()\s\d]+/,i={},o=function(e){return(e=+e)+(e>68?1900:2e3)},l=function(e){return function(t){this[e]=+t}},s=[/[+-]\d\d:?(\d\d)?|Z/,function(e){(this.zone||(this.zone={})).offset=function(e){if(!e||"Z"===e)return 0;var t=e.match(/([+-]|\d\d)/g),n=60*t[1]+(+t[2]||0);return 0===n?0:"+"===t[0]?-n:n}(e)}],u=function(e){var t=i[e];return t&&(t.indexOf?t:t.s.concat(t.f))},d=function(e,t){var n,a=i.meridiem;if(a){for(var r=1;r<=24;r+=1)if(e.indexOf(a(r,0,t))>-1){n=r>12;break}}else n=e===(t?"pm":"PM");return n},c={A:[r,function(e){this.afternoon=d(e,!1)}],a:[r,function(e){this.afternoon=d(e,!0)}],S:[/\d/,function(e){this.milliseconds=100*+e}],SS:[n,function(e){this.milliseconds=10*+e}],SSS:[/\d{3}/,function(e){this.milliseconds=+e}],s:[a,l("seconds")],ss:[a,l("seconds")],m:[a,l("minutes")],mm:[a,l("minutes")],H:[a,l("hours")],h:[a,l("hours")],HH:[a,l("hours")],hh:[a,l("hours")],D:[a,l("day")],DD:[n,l("day")],Do:[r,function(e){var t=i.ordinal,n=e.match(/\d+/);if(this.day=n[0],t)for(var a=1;a<=31;a+=1)t(a).replace(/\[|\]/g,"")===e&&(this.day=a)}],M:[a,l("month")],MM:[n,l("month")],MMM:[r,function(e){var t=u("months"),n=(u("monthsShort")||t.map((function(e){return e.slice(0,3)}))).indexOf(e)+1;if(n<1)throw new Error;this.month=n%12||n}],MMMM:[r,function(e){var t=u("months").indexOf(e)+1;if(t<1)throw new Error;this.month=t%12||t}],Y:[/[+-]?\d+/,l("year")],YY:[n,function(e){this.year=o(e)}],YYYY:[/\d{4}/,l("year")],Z:s,ZZ:s};function f(n){var a,r;i&&i.formats;for(var o=a.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(t,n,a){var i=a&&a.toUpperCase();return n||r[a]||e[a]||r[i].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,t,n){return t||n.slice(1)}))})).match(t),l=o.length,s=0;s<l;s+=1){var u=o[s],d=c[u],f=d&&d[0],g=d&&d[1];o[s]=g?{regex:f,parser:g}:u.replace(/^\[|\]$/g,"")}return function(e){for(var t={},n=0,a=0;n<l;n+=1){var r=o[n];if("string"==typeof r)r.length;else{var i=r.regex,s=r.parser,u=e.slice(a),d=i.exec(u)[0];s.call(t,d),e.replace(d,"")}}return function(e){var t=e.afternoon;if(void 0!==t){var n=e.hours;t?n<12&&(e.hours+=12):12===n&&(e.hours=0),delete e.afternoon}}(t),t}}}();const R=Symbol("CHART_ROWS_KEY"),U=Symbol("CONFIG_KEY"),q=Symbol("EMIT_BAR_EVENT_KEY"),W=Symbol("BAR_CONTAINER_KEY");function N(){const e=_(U);if(!e)throw Error("Failed to inject config!");return e}const Q="YYYY-MM-DD HH:mm";function Z(e=N()){const{chartStart:t,chartEnd:n,barStart:a,barEnd:r,dateFormat:i}=e,o=g((()=>s(t.value))),l=g((()=>s(n.value))),s=(e,t)=>{let n;if(void 0!==t&&"string"!=typeof e&&!(e instanceof Date)&&(n="start"===t?e[a.value]:e[r.value]),"string"==typeof e)n=e;else if(e instanceof Date)return u(e);const o=i.value||Q;return u(n,o,!0)};return{chartStartDayjs:o,chartEndDayjs:l,toDayjs:s,format:(e,t)=>!1===t?e instanceof Date?e:u(e).toDate():("string"==typeof e||e instanceof Date?s(e):e).format(t)}}function X(){const{precision:e}=N(),{chartStartDayjs:t,chartEndDayjs:n}=Z(),a=g((()=>{switch(null==e?void 0:e.value){case"hour":return"day";case"day":case"date":case"week":return"month";case"month":return"year";default:throw new Error("Precision prop incorrect. Must be one of the following: 'hour', 'day', 'date', 'week', 'month'")}})),r=g((()=>{switch(e.value){case"date":return"day";case"week":return"isoWeek";default:return e.value}})),i={hour:"HH",date:"DD.MMM",day:"DD.MMM",week:"WW",month:"MMMM YYYY",year:"YYYY"};return{timeaxisUnits:g((()=>{const o=[],l=[],s=n.value.diff(t.value,"minutes",!0),u=a.value,d=r.value;let c=t.value,f=t.value;for(;f.isSameOrBefore(n.value);){const t=f.endOf(d),a=t.isAfter(n.value)?n.value.diff(f,"minutes",!0)/s*100:t.diff(f,"minutes",!0)/s*100;l.push({label:f.format(i[null==e?void 0:e.value]),value:String(f),date:f.toDate(),width:String(a)+"%"}),f=t.add(1,"isoWeek"===d?"week":d).startOf(d)}for(;c.isSameOrBefore(n.value);){const e=c.endOf(u),t=e.isAfter(n.value)?n.value.diff(c,"minutes",!0)/s*100:e.diff(c,"minutes",!0)/s*100;o.push({label:c.format(i[u]),value:String(c),date:c.toDate(),width:String(t)+"%"}),c=e.add(1,u).startOf(u)}return{upperUnits:o,lowerUnits:l}}))}}const K={class:"g-grid-container"},V=d({__name:"GGanttGrid",props:{highlightedUnits:{}},setup(e){const{colors:t}=N(),{timeaxisUnits:n}=X();return(e,a)=>(b(),v("div",K,[(b(!0),v(T,null,Y(D(n).lowerUnits,(({label:n,value:a,width:r})=>{var i;return b(),v("div",{key:n,class:"g-grid-line",style:k({width:r,background:null!=(i=e.highlightedUnits)&&i.includes(Number(a))?D(t).hoverHighlight:void 0})},null,4)})),128))]))}});function J(){const e=_(R);if(!e)throw Error("Failed to inject getChartRows!");return e}const ee={class:"g-label-column-rows"},te=d({__name:"GGanttLabelColumn",setup(e){const{font:t,colors:n,labelColumnTitle:a,rowHeight:r}=N(),i=J();return(e,o)=>(b(),v("div",{class:"g-label-column",style:k({fontFamily:D(t),color:D(n).text})},[x(e.$slots,"label-column-title",{},(()=>[p("div",{class:"g-label-column-header",style:k({background:D(n).primary})},M(D(a)),5)])),p("div",ee,[(b(!0),v(T,null,Y(D(i)(),(({label:t},a)=>(b(),v("div",{key:`${t}_${a}`,class:"g-label-column-row",style:k({background:a%2==0?D(n).ternary:D(n).quartenary,height:`${D(r)}px`})},[x(e.$slots,"label-column-row",{label:t},(()=>[p("span",null,M(t),1)]))],4)))),128))])],4))}}),ne={class:"g-timeaxis"},ae={class:"g-timeunits-container"},re={class:"g-timeunits-container"},ie=d({__name:"GGanttTimeaxis",setup(e){const{precision:t,colors:n}=N(),{timeaxisUnits:a}=X();return(e,r)=>(b(),v("div",ne,[p("div",ae,[(b(!0),v(T,null,Y(D(a).upperUnits,(({label:t,value:a,date:r,width:i},o)=>(b(),v("div",{key:t,class:"g-upper-timeunit",style:k({background:o%2==0?D(n).primary:D(n).secondary,color:D(n).text,width:i})},[x(e.$slots,"upper-timeunit",{label:t,value:a,date:r},(()=>[O(M(t),1)]))],4)))),128))]),p("div",re,[(b(!0),v(T,null,Y(D(a).lowerUnits,(({label:a,value:r,date:i,width:o},l)=>(b(),v("div",{key:a,class:"g-timeunit",style:k({background:l%2==0?D(n).ternary:D(n).quartenary,color:D(n).text,flexDirection:"hour"===D(t)?"column":"row",alignItems:"hour"===D(t)?"":"center",width:o})},[x(e.$slots,"timeunit",{label:a,value:r,date:i},(()=>[O(M(a),1)])),"hour"===D(t)?(b(),v("div",{key:0,class:"g-timeaxis-hour-pin",style:k({background:D(n).text})},null,4)):B("",!0)],4)))),128))])]))}}),oe=d({__name:"GGanttBarTooltip",props:{bar:{},modelValue:{type:Boolean}},setup(e){const t=e,n={hour:"HH:mm",day:"DD. MMM HH:mm",date:"DD. MMMM YYYY",month:"DD. MMMM YYYY",week:"DD. MMMM YYYY (WW)"},{bar:a}=c(t),{precision:r,font:i,barStart:o,barEnd:l,rowHeight:s}=N(),u=m("0px"),d=m("0px");I((()=>t.bar),(()=>{return t=this,n=null,r=function*(){var e;yield j();const t=(null==(e=null==a?void 0:a.value)?void 0:e.ganttBarConfig.id)||"";if(!t)return;const n=document.getElementById(t),{top:r,left:i}=(null==n?void 0:n.getBoundingClientRect())||{top:0,left:0},o=Math.max(i,10);u.value=r+s.value-10+"px",d.value=`${o}px`},new Promise(((a,i)=>{var o=t=>{try{s(r.next(t))}catch(e){i(e)}},l=t=>{try{s(r.throw(t))}catch(e){i(e)}},s=e=>e.done?a(e.value):Promise.resolve(e.value).then(o,l);s((r=r.apply(t,n)).next())}));var t,n,r}),{deep:!0,immediate:!0});const f=g((()=>{var e,t;return(null==(t=null==(e=null==a?void 0:a.value)?void 0:e.ganttBarConfig.style)?void 0:t.background)||"cadetblue"})),{toDayjs:h}=Z(),C=g((()=>{var e;return null==(e=a.value)?void 0:e[o.value]})),T=g((()=>{var e;return null==(e=a.value)?void 0:e[l.value]})),Y=g((()=>{if(null==a||!a.value)return"";const e=n[r.value];return`${h(C.value).format(e)} â€“ ${h(T.value).format(e)}`}));return(e,t)=>(b(),y(G,{to:"body"},[E($,{name:"g-fade",mode:"out-in"},{default:w((()=>[e.modelValue?(b(),v("div",{key:0,class:"g-gantt-tooltip",style:k({top:u.value,left:d.value,fontFamily:D(i)})},[p("div",{class:"g-gantt-tooltip-color-dot",style:k({background:f.value})},null,4),x(e.$slots,"default",{bar:D(a),barStart:C.value,barEnd:T.value},(()=>[O(M(Y.value),1)]))],4)):B("",!0)])),_:3})]))}});function le(e=N()){const{dateFormat:t,chartSize:n}=e,{chartStartDayjs:a,chartEndDayjs:r,toDayjs:i,format:o}=Z(e),l=g((()=>r.value.diff(a.value,"minutes")));return{mapTimeToPosition:e=>{const t=n.width.value||0,r=i(e).diff(a.value,"minutes",!0);return Math.ceil(r/l.value*t)},mapPositionToTime:e=>{const r=e/(n.width.value||0)*l.value;return o(a.value.add(r,"minutes"),t.value)}}}const se=d({__name:"GGanttCurrentTime",setup(e){const{mapTimeToPosition:t}=le(),n=m(u()),{colors:a,dateFormat:r,currentTimeLabel:i}=N(),o=g((()=>{const e=r.value||"YYYY-MM-DD HH:mm";return t(u(n.value,e).format(e))}));return(e,t)=>(b(),v("div",{class:"g-grid-current-time",style:k({left:`${o.value}px`})},[p("div",{class:"g-grid-current-time-marker",style:k({border:`1px dashed ${D(a).markerCurrentTime}`})},null,4),p("span",{class:"g-grid-current-time-text",style:k({color:D(a).markerCurrentTime})},[x(e.$slots,"current-time-label",{},(()=>[O(M(D(i)),1)]))],4)],4))}});var ue;const de=typeof window<"u";function ce(e){var t;const n=function(e){return"function"==typeof e?e():D(e)}(e);return null!=(t=null==n?void 0:n.$el)?t:n}de&&(null==(ue=null==window?void 0:window.navigator)?void 0:ue.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);const fe=de?window:void 0;function ge(e,t=!1){const n=m(),a=()=>n.value=Boolean(e());return a(),function(e,t=!0){F()?z(e):t?e():j(e)}(a,t),n}const me=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},he="__vueuse_ssr_handlers__";me[he]=me[he]||{};var be,ve,pe=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,xe=(e,t)=>{var n={};for(var a in e)ye.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&pe)for(var a of pe(e))t.indexOf(a)<0&&we.call(e,a)&&(n[a]=e[a]);return n};function ke(e,t,n={}){const a=n,{window:r=fe}=a,i=xe(a,["window"]);let o;const l=ge((()=>r&&"ResizeObserver"in r)),s=()=>{o&&(o.disconnect(),o=void 0)},u=I((()=>ce(e)),(e=>{s(),l.value&&r&&e&&(o=new ResizeObserver(t),o.observe(e,i))}),{immediate:!0,flush:"post"}),d=()=>{s(),u()};return function(e){!!A()&&P(e)}(d),{isSupported:l,stop:d}}(ve=be||(be={})).UP="UP",ve.RIGHT="RIGHT",ve.DOWN="DOWN",ve.LEFT="LEFT",ve.NONE="NONE";var Be=Object.defineProperty,Ce=Object.getOwnPropertySymbols,De=Object.prototype.hasOwnProperty,Ee=Object.prototype.propertyIsEnumerable,Oe=(e,t,n)=>t in e?Be(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;((e,t)=>{for(var n in t||(t={}))De.call(t,n)&&Oe(e,n,t[n]);if(Ce)for(var n of Ce(t))Ee.call(t,n)&&Oe(e,n,t[n])})({linear:function(e){return e}},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});const Me={default:{primary:"#eeeeee",secondary:"#E0E0E0",ternary:"#F5F5F5",quartenary:"#ededed",hoverHighlight:"rgba(204, 216, 219, 0.5)",markerCurrentTime:"#000",text:"#404040",background:"white"},creamy:{primary:"#ffe8d9",secondary:"#fcdcc5",ternary:"#fff6f0",quartenary:"#f7ece6",hoverHighlight:"rgba(230, 221, 202, 0.5)",markerCurrentTime:"#000",text:"#542d05",background:"white"},crimson:{primary:"#a82039",secondary:"#c41238",ternary:"#db4f56",quartenary:"#ce5f64",hoverHighlight:"rgba(196, 141, 141, 0.5)",markerCurrentTime:"#000",text:"white",background:"white"},dark:{primary:"#404040",secondary:"#303030",ternary:"#353535",quartenary:"#383838",hoverHighlight:"rgba(159, 160, 161, 0.5)",markerCurrentTime:"#fff",text:"white",background:"#525252",toast:"#1f1f1f"},flare:{primary:"#e08a38",secondary:"#e67912",ternary:"#5e5145",quartenary:"#665648",hoverHighlight:"rgba(196, 141, 141, 0.5)",markerCurrentTime:"#000",text:"white",background:"white"},fuchsia:{primary:"#de1d5a",secondary:"#b50b41",ternary:"#ff7da6",quartenary:"#f2799f",hoverHighlight:"rgba(196, 141, 141, 0.5)",markerCurrentTime:"#000",text:"white",background:"white"},grove:{primary:"#3d9960",secondary:"#288542",ternary:"#72b585",quartenary:"#65a577",hoverHighlight:"rgba(160, 219, 171, 0.5)",markerCurrentTime:"#000",text:"white",background:"white"},"material-blue":{primary:"#0D47A1",secondary:"#1565C0",ternary:"#42a5f5",quartenary:"#409fed",hoverHighlight:"rgba(110, 165, 196, 0.5)",markerCurrentTime:"#000",text:"white",background:"white"},sky:{primary:"#b5e3ff",secondary:"#a1d6f7",ternary:"#d6f7ff",quartenary:"#d0edf4",hoverHighlight:"rgba(193, 202, 214, 0.5)",markerCurrentTime:"#000",text:"#022c47",background:"white"},slumber:{primary:"#2a2f42",secondary:"#2f3447",ternary:"#35394d",quartenary:"#2c3044",hoverHighlight:"rgba(179, 162, 127, 0.5)",markerCurrentTime:"#fff",text:"#ffe0b3",background:"#38383b",toast:"#1f1f1f"},vue:{primary:"#258a5d",secondary:"#41B883",ternary:"#35495E",quartenary:"#2a3d51",hoverHighlight:"rgba(160, 219, 171, 0.5)",markerCurrentTime:"#000",text:"white",background:"white"}},Te={class:"g-gantt-rows-container"},Ye=d({__name:"GGanttChart",props:{chartStart:{},chartEnd:{},precision:{default:"day"},barStart:{},barEnd:{},currentTime:{type:Boolean},currentTimeLabel:{default:""},dateFormat:{type:[String,Boolean],default:Q},width:{default:"100%"},hideTimeaxis:{type:Boolean,default:!1},colorScheme:{default:"default"},grid:{type:Boolean,default:!1},pushOnOverlap:{type:Boolean,default:!1},noOverlap:{type:Boolean,default:!1},rowHeight:{default:40},highlightedUnits:{default:()=>[]},font:{default:"inherit"},labelColumnTitle:{default:""},labelColumnWidth:{default:"150px"}},emits:["click-bar","mousedown-bar","mouseup-bar","dblclick-bar","mouseenter-bar","mouseleave-bar","dragstart-bar","drag-bar","dragend-bar","contextmenu-bar"],setup(e,{emit:t}){const n=e,{width:a,font:r,colorScheme:i}=c(n),o=f(),u=g((()=>"string"!=typeof i.value?i.value:Me[i.value]||Me.default)),d=m(!1),O=m(!1),M=m(void 0);let T;const Y=m(null),L=function(e,t={width:0,height:0},n={}){const a=m(t.width),r=m(t.height);return ke(e,(([e])=>{a.value=e.contentRect.width,r.value=e.contentRect.height}),n),I((()=>ce(e)),(e=>{a.value=e?t.width:0,r.value=e?t.height:0})),{width:a,height:r}}(Y);return h(R,(()=>{var e;const t=null==(e=o.default)?void 0:e.call(o),n=[];return t&&t.forEach((e=>{var t;if(null!=(t=e.props)&&t.bars){const{label:t,bars:a}=e.props;n.push({label:t,bars:a})}else Array.isArray(e.children)&&e.children.forEach((e=>{var t;const a=e;if(null!=(t=null==a?void 0:a.props)&&t.bars){const{label:e,bars:t}=a.props;n.push({label:e,bars:t})}}))})),n})),h(U,s(l({},c(n)),{colors:u,chartSize:L})),h(q,((e,n,a,r)=>{switch(e.type){case"click":t("click-bar",{bar:n,e:e,datetime:a});break;case"mousedown":t("mousedown-bar",{bar:n,e:e,datetime:a});break;case"mouseup":t("mouseup-bar",{bar:n,e:e,datetime:a});break;case"dblclick":t("dblclick-bar",{bar:n,e:e,datetime:a});break;case"mouseenter":(e=>{T&&clearTimeout(T),T=setTimeout((()=>{d.value=!0}),800),M.value=e})(n),t("mouseenter-bar",{bar:n,e:e});break;case"mouseleave":clearTimeout(T),d.value=!1,t("mouseleave-bar",{bar:n,e:e});break;case"dragstart":O.value=!0,t("dragstart-bar",{bar:n,e:e});break;case"drag":t("drag-bar",{bar:n,e:e});break;case"dragend":O.value=!1,t("dragend-bar",{bar:n,e:e,movedBars:r});break;case"contextmenu":t("contextmenu-bar",{bar:n,e:e,datetime:a})}})),(e,t)=>(b(),v("div",null,[p("div",{class:C([{"labels-in-column":!!e.labelColumnTitle}])},[e.labelColumnTitle?(b(),y(te,{key:0,style:k({width:e.labelColumnWidth})},{"label-column-title":w((()=>[x(e.$slots,"label-column-title")])),"label-column-row":w((({label:t})=>[x(e.$slots,"label-column-row",{label:t})])),_:3},8,["style"])):B("",!0),p("div",{ref_key:"ganttChart",ref:Y,class:C(["g-gantt-chart",{"with-column":e.labelColumnTitle}]),style:k({width:D(a),background:u.value.background,fontFamily:D(r)})},[e.hideTimeaxis?B("",!0):(b(),y(ie,{key:0},{"upper-timeunit":w((({label:t,value:n,date:a})=>[x(e.$slots,"upper-timeunit",{label:t,value:n,date:a})])),timeunit:w((({label:t,value:n,date:a})=>[x(e.$slots,"timeunit",{label:t,value:n,date:a})])),_:3})),e.grid?(b(),y(V,{key:1,"highlighted-units":e.highlightedUnits},null,8,["highlighted-units"])):B("",!0),e.currentTime?(b(),y(se,{key:2},{"current-time-label":w((()=>[x(e.$slots,"current-time-label")])),_:3})):B("",!0),p("div",Te,[x(e.$slots,"default")])],6)],2),E(oe,{"model-value":d.value||O.value,bar:M.value},{default:w((()=>[x(e.$slots,"bar-tooltip",{bar:M.value})])),_:3},8,["model-value","bar"])]))}});function Le(e,t=()=>null,n=()=>null,a=N()){const{barStart:r,barEnd:i,pushOnOverlap:o}=a,l=m(!1);let s,u=0;const{mapPositionToTime:d}=le(a),{toDayjs:c}=Z(a),f=()=>{var t;const n=document.getElementById(e.ganttBarConfig.id),a=null==(t=null==n?void 0:n.closest(".g-gantt-row-bars-container"))?void 0:t.getBoundingClientRect();return{barElement:n,barContainer:a}},g=n=>{const{barElement:a,barContainer:o}=f();if(!a||!o)return;const l=a.getBoundingClientRect().width,s=n.clientX-o.left-u,c=s+l;v(s,c)||(e[r.value]=d(s),e[i.value]=d(c),t(n,e))},h=n=>{const{barElement:a,barContainer:i}=f();if(!a||!i)return;const o=n.clientX-i.left,l=d(o);c(l).isSameOrAfter(c(e,"end"))||(e[r.value]=l,t(n,e))},b=n=>{const{barElement:a,barContainer:r}=f();if(!a||!r)return;const o=n.clientX-r.left,l=d(o);c(l).isSameOrBefore(c(e,"start"))||(e[i.value]=l,t(n,e))},v=(t,n)=>{if(!o.value)return!1;const a=e.ganttBarConfig.dragLimitLeft,r=e.ganttBarConfig.dragLimitRight;return t&&null!=a&&t<a||n&&null!=r&&n>r},p=t=>{l.value=!1,document.body.style.cursor="",window.removeEventListener("mousemove",s),window.removeEventListener("mouseup",p),n(t,e)};return{isDragging:l,initDrag:t=>{const n=document.getElementById(e.ganttBarConfig.id);if(n){switch(u=t.clientX-(n.getBoundingClientRect().left||0),t.target.className){case"g-gantt-bar-handle-left":document.body.style.cursor="ew-resize",s=h;break;case"g-gantt-bar-handle-right":document.body.style.cursor="ew-resize",s=b;break;default:s=g}l.value=!0,window.addEventListener("mousemove",s),window.addEventListener("mouseup",p)}}}}function Se(){const e=_(q);if(!e)throw Error("Failed to inject emitBarEvent!");return e}const He=["id"],_e={class:"g-gantt-bar-label"},Ie=["innerHTML"],je=p("div",{class:"g-gantt-bar-handle-left"},null,-1),$e=p("div",{class:"g-gantt-bar-handle-right"},null,-1),Ge=d({__name:"GGanttBar",props:{bar:{}},setup(e){const t=e,n=Se(),a=N(),{rowHeight:r}=a,{bar:i}=c(t),{mapTimeToPosition:o,mapPositionToTime:u}=le(),{initDragOfBar:d,initDragOfBundle:f}=function(){const e=N(),t=J(),n=Se(),{pushOnOverlap:a,barStart:r,barEnd:i,noOverlap:o,dateFormat:u}=e,d=new Map,{toDayjs:c,format:f}=Z(),g=(e,t)=>{n(s(l({},e),{type:"drag"}),t),m(t)},m=e=>{if(null==a||!a.value)return;let t=e,{overlapBar:n,overlapType:o}=h(t);for(;n;){y(n);const e=c(t[r.value]),a=c(t[i.value]),l=c(n[r.value]),s=c(n[i.value]);let d;switch(o){case"left":d=s.diff(e,"minutes",!0),n[i.value]=f(t[r.value],u.value),n[r.value]=f(l.subtract(d,"minutes"),u.value);break;case"right":d=a.diff(l,"minutes",!0),n[r.value]=f(a,u.value),n[i.value]=f(s.add(d,"minutes"),u.value);break;default:return}n&&("left"===o||"right"===o)&&b(n,d,o),t=n,({overlapBar:n,overlapType:o}=h(n))}},h=e=>{var n,a;let o,l,s;const u=null!=(a=null==(n=t().find((t=>t.bars.includes(e))))?void 0:n.bars)?a:[],d=c(e[r.value]),f=c(e[i.value]);return{overlapBar:u.find((t=>{if(t===e)return!1;const n=c(t[r.value]),a=c(t[i.value]);return o=d.isBetween(n,a),l=f.isBetween(n,a),s=n.isBetween(d,f)||a.isBetween(d,f),o||l||s})),overlapType:o?"left":l?"right":s?"between":null}},b=(e,n,a)=>{y(e),e.ganttBarConfig.bundle&&t().forEach((t=>{t.bars.forEach((t=>{t.ganttBarConfig.bundle===e.ganttBarConfig.bundle&&t!==e&&(y(t),v(t,n,a))}))}))},v=(e,t,n)=>{switch(n){case"left":e[r.value]=f(c(e,"start").subtract(t,"minutes"),u.value),e[i.value]=f(c(e,"end").subtract(t,"minutes"),u.value);break;case"right":e[r.value]=f(c(e,"start").add(t,"minutes"),u.value),e[i.value]=f(c(e,"end").add(t,"minutes"),u.value)}m(e)},p=(e,t)=>{w();const a=s(l({},e),{type:"dragend"});n(a,t,void 0,new Map(d)),d.clear()},y=e=>{if(!d.has(e)){const t=e[r.value],n=e[i.value];d.set(e,{oldStart:t,oldEnd:n})}},w=()=>{if(a.value||!o.value)return;let e=!1;d.forEach(((t,n)=>{const{overlapBar:a}=h(n);null!=a&&(e=!0)})),e&&d.forEach((({oldStart:e,oldEnd:t},n)=>{n[r.value]=e,n[i.value]=t}))};return{initDragOfBar:(t,a)=>{const{initDrag:r}=Le(t,g,p,e);n(s(l({},a),{type:"dragstart"}),t),r(a),y(t)},initDragOfBundle:(a,r)=>{const i=a.ganttBarConfig.bundle;null!=i&&(t().forEach((t=>{t.bars.forEach((t=>{if(t.ganttBarConfig.bundle===i){const n=t===a?p:()=>null,{initDrag:i}=Le(t,g,n,e);i(r),y(t)}}))})),n(s(l({},r),{type:"dragstart"}),a))}}}(),{setDragLimitsOfGanttBar:h}=function(){const{pushOnOverlap:e}=N(),t=J(),n=e=>{const n=[];return null!=e&&t().forEach((t=>{t.bars.forEach((t=>{t.ganttBarConfig.bundle===e&&n.push(t)}))})),n},a=(e,t=0,n)=>{const a=e.ganttBarConfig.bundle?[{bar:e,gapDistance:t}]:[];let i=e,o=r(i,n);if("left"===n)for(;o;){const e=document.getElementById(i.ganttBarConfig.id),n=document.getElementById(o.ganttBarConfig.id),l=n.offsetLeft+n.offsetWidth;if(t+=e.offsetLeft-l,o.ganttBarConfig.immobile)return{gapDistanceSoFar:t,bundleBarsAndGapDist:a};o.ganttBarConfig.bundle&&a.push({bar:o,gapDistance:t}),i=o,o=r(o,"left")}if("right"===n)for(;o;){const e=document.getElementById(i.ganttBarConfig.id),n=document.getElementById(o.ganttBarConfig.id),l=e.offsetLeft+e.offsetWidth;if(t+=n.offsetLeft-l,o.ganttBarConfig.immobile)return{gapDistanceSoFar:t,bundleBarsAndGapDist:a};o.ganttBarConfig.bundle&&a.push({bar:o,gapDistance:t}),i=o,o=r(o,"right")}return{gapDistanceSoFar:null,bundleBarsAndGapDist:a}},r=(e,n)=>{var a,r;const i=document.getElementById(e.ganttBarConfig.id),o=null!=(r=null==(a=t().find((t=>t.bars.includes(e))))?void 0:a.bars)?r:[];let l=[];return l="left"===n?o.filter((e=>{const t=document.getElementById(e.ganttBarConfig.id);return t&&t.offsetLeft<i.offsetLeft&&!1!==e.ganttBarConfig.pushOnOverlap})):o.filter((e=>{const t=document.getElementById(e.ganttBarConfig.id);return t&&t.offsetLeft>i.offsetLeft&&!1!==e.ganttBarConfig.pushOnOverlap})),l.length>0?l.reduce(((e,t)=>{const n=document.getElementById(e.ganttBarConfig.id),a=document.getElementById(t.ganttBarConfig.id);return Math.abs(n.offsetLeft-i.offsetLeft)<Math.abs(a.offsetLeft-i.offsetLeft)?e:t}),l[0]):null};return{setDragLimitsOfGanttBar:t=>{if(e.value&&!1!==t.ganttBarConfig.pushOnOverlap){for(const e of["left","right"]){const r=e,{gapDistanceSoFar:i,bundleBarsAndGapDist:o}=a(t,0,r);let l=i;const s=o;if(!s)continue;for(let e=0;e<s.length;e++){const t=s[e].bar,i=s[e].gapDistance;n(t.ganttBarConfig.bundle).filter((e=>e!==t)).forEach((e=>{const t=a(e,i,r),n=t.gapDistanceSoFar,o=t.bundleBarsAndGapDist;null!=n&&(!l||n<l)&&(l=n),o.forEach((e=>{s.find((t=>t.bar===e.bar))||s.push(e)}))}))}const u=document.getElementById(t.ganttBarConfig.id);null!=l&&"left"===r?t.ganttBarConfig.dragLimitLeft=u.offsetLeft-l:null!=l&&"right"===r&&(t.ganttBarConfig.dragLimitRight=u.offsetLeft+u.offsetWidth+l)}n(t.ganttBarConfig.bundle).forEach((e=>{e.ganttBarConfig.dragLimitLeft=t.ganttBarConfig.dragLimitLeft,e.ganttBarConfig.dragLimitRight=t.ganttBarConfig.dragLimitRight}))}}}}(),y=m(!1),w=g((()=>i.value.ganttBarConfig));function E(e){null!=w.value.bundle?f(i.value,e):d(i.value,e),y.value=!0}const O=_(W),Y=e=>{var t;e.preventDefault(),"mousedown"===e.type&&(h(i.value),!w.value.immobile&&(window.addEventListener("mousemove",E,{once:!0}),window.addEventListener("mouseup",(()=>{window.removeEventListener("mousemove",E),y.value=!1}),{once:!0})));const a=null==(t=null==O?void 0:O.value)?void 0:t.getBoundingClientRect();if(!a)return;const r=u(e.clientX-a.left);n(e,i.value,r)},{barStart:L,barEnd:S,width:H,chartStart:j,chartEnd:$,chartSize:G}=a,A=m(0),P=m(0);return z((()=>{I([i,H,j,$,G.width],(()=>{A.value=o(i.value[L.value]),P.value=o(i.value[S.value])}),{deep:!0,immediate:!0})})),(e,t)=>(b(),v("div",{id:w.value.id,class:C(["g-gantt-bar",w.value.class||""]),style:k(s(l({},w.value.style),{position:"absolute",top:.1*D(r)+"px",left:`${A.value}px`,width:P.value-A.value+"px",height:.8*D(r)+"px",zIndex:y.value?3:2})),onMousedown:Y,onClick:Y,onDblclick:Y,onMouseenter:Y,onMouseleave:Y,onContextmenu:Y},[p("div",_e,[x(e.$slots,"default",{bar:D(i)},(()=>[p("div",null,M(w.value.label||""),1),w.value.html?(b(),v("div",{key:0,innerHTML:w.value.html},null,8,Ie)):B("",!0)]))]),w.value.hasHandles?(b(),v(T,{key:0},[je,$e],64)):B("",!0)],46,He))}}),ze=d({__name:"GGanttRow",props:{label:{},bars:{},highlightOnHover:{type:Boolean}},emits:["drop"],setup(e,{emit:t}){const n=e,{rowHeight:a,colors:r,labelColumnTitle:i}=N(),{highlightOnHover:o}=c(n),l=m(!1),s=g((()=>({height:`${a.value}px`,background:(null==o?void 0:o.value)&&l.value?r.value.hoverHighlight:null}))),{mapPositionToTime:u}=le(),d=m(null);h(W,d);const f=e=>!e||/^\s*$/.test(e);return(e,n)=>(b(),v("div",{class:"g-gantt-row",style:k(s.value),onDragover:n[0]||(n[0]=H((e=>l.value=!0),["prevent"])),onDragleave:n[1]||(n[1]=e=>l.value=!1),onDrop:n[2]||(n[2]=e=>(e=>{var n;const a=null==(n=d.value)?void 0:n.getBoundingClientRect();if(!a)return;const r=e.clientX-a.left,i=u(r);t("drop",{e:e,datetime:i})})(e)),onMouseover:n[3]||(n[3]=e=>l.value=!0),onMouseleave:n[4]||(n[4]=e=>l.value=!1)},[f(e.label)||D(i)?B("",!0):(b(),v("div",{key:0,class:"g-gantt-row-label",style:k({background:D(r).primary,color:D(r).text})},[x(e.$slots,"label",{},(()=>[O(M(e.label),1)]))],4)),p("div",S({ref_key:"barContainer",ref:d,class:"g-gantt-row-bars-container"},e.$attrs),[E(L,{name:"bar-transition",tag:"div"},{default:w((()=>[(b(!0),v(T,null,Y(e.bars,(t=>(b(),y(Ge,{key:t.ganttBarConfig.id,bar:t},{default:w((()=>[x(e.$slots,"bar-label",{bar:t})])),_:2},1032,["bar"])))),128))])),_:3})],16)],36))}});function Ae(e,t="top"){if(!e||typeof document>"u")return;const n=document.head,a=document.createElement("style");"top"===t&&n.firstChild?n.insertBefore(a,n.firstChild):n.appendChild(a),a.appendChild(document.createTextNode(e))}Ae('\n.g-gantt-chart {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  overflow-x: hidden;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n          user-select: none;\n  font-feature-settings: "tnum";\n  font-variant-numeric: tabular-nums;\n  border-radius: 5px;\n}\n.with-column {\n  border-top-left-radius: 0px;\n  border-bottom-left-radius: 0px;\n  border-top-right-radius: 5px;\n  border-bottom-right-radius: 5px;\n}\n.g-gantt-rows-container {\n  position: relative;\n}\n.labels-in-column {\n  display: flex;\n  flex-direction: row;\n}\n',"top"),Ae("\n.g-gantt-row {\n  width: 100%;\n  transition: background 0.4s;\n  position: relative;\n}\n.g-gantt-row > .g-gantt-row-bars-container {\n  position: relative;\n  border-top: 1px solid #eaeaea;\n  width: 100%;\n  border-bottom: 1px solid #eaeaea;\n}\n.g-gantt-row-label {\n  position: absolute;\n  top: 0;\n  left: 0px;\n  padding: 0px 8px;\n  display: flex;\n  align-items: center;\n  height: 60%;\n  min-height: 20px;\n  font-size: 0.8em;\n  font-weight: bold;\n  border-bottom-right-radius: 6px;\n  background: #f2f2f2;\n  z-index: 3;\n  box-shadow: 0px 1px 4px 0px rgba(0, 0, 0, 0.6);\n}\n.bar-transition-leave-active,\n.bar-transition-enter-active {\n  transition: all 0.2s;\n}\n.bar-transition-enter-from,\n.bar-transition-leave-to {\n  transform: scale(0.8);\n  opacity: 0;\n}\n","top"),Ae("\n.g-grid-container {\n  position: absolute;\n  top: 0;\n  left: 0%;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  justify-content: space-between;\n}\n.g-grid-line {\n  width: 1px;\n  height: 100%;\n  border-left: 1px solid #eaeaea;\n}\n","top"),Ae('\n.g-label-column {\n  display: flex;\n  align-items: center;\n  flex-direction: column;\n  color: rgb(64, 64, 64);\n  font-feature-settings: "tnum";\n  font-variant-numeric: tabular-nums;\n  font-size: 0.9em;\n}\n.g-label-column-header {\n  width: 100%;\n  height: 80px;\n  min-height: 80px;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-top-left-radius: 5px;\n}\n.g-label-column-rows {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  border-bottom-left-radius: 5px;\n}\n.g-label-column-row {\n  width: 100%;\n  height: 100%;\n  display: flex;\n  padding: 0.1rem 0.3rem;\n  overflow: hidden;\n  white-space: normal;\n  box-sizing: border-box;\n  text-align: center;\n  align-items: center;\n  justify-content: center;\n}\n.g-label-column-row:last-child {\n  border-bottom-left-radius: 5px;\n}\n',"top"),Ae("\n.g-timeaxis {\n  position: sticky;\n  top: 0;\n  width: 100%;\n  height: 80px;\n  background: white;\n  z-index: 4;\n  display: flex;\n  flex-direction: column;\n}\n.g-timeunits-container {\n  display: flex;\n  width: 100%;\n  height: 50%;\n}\n.g-timeunit {\n  height: 100%;\n  font-size: 65%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n.g-upper-timeunit {\n  display: flex;\n  height: 100%;\n  justify-content: center;\n  align-items: center;\n}\n.g-timeaxis-hour-pin {\n  width: 1px;\n  height: 10px;\n}\n","top"),Ae('\n.g-gantt-tooltip {\n  position: fixed;\n  background: black;\n  color: white;\n  z-index: 4;\n  font-size: 0.85em;\n  padding: 5px;\n  border-radius: 3px;\n  transition: opacity 0.2s;\n  display: flex;\n  align-items: center;\n  font-feature-settings: "tnum";\n  font-variant-numeric: tabular-nums;\n}\n.g-gantt-tooltip:before {\n  content: "";\n  position: absolute;\n  top: 0;\n  left: 10%;\n  width: 0;\n  height: 0;\n  border: 10px solid transparent;\n  border-bottom-color: black;\n  border-top: 0;\n  margin-left: -5px;\n  margin-top: -5px;\n}\n.g-gantt-tooltip-color-dot {\n  width: 8px;\n  height: 8px;\n  border-radius: 100%;\n  margin-right: 4px;\n}\n.g-fade-enter-active,\n.g-fade-leave-active {\n  transition: opacity 0.3s ease;\n}\n.g-fade-enter-from,\n.g-fade-leave-to {\n  opacity: 0;\n}\n',"top"),Ae("\n.g-grid-current-time {\n  position: absolute;\n  height: 100%;\n  display: flex;\n  z-index: 5;\n}\n.g-grid-current-time-marker {\n  width: 0px;\n  height: calc(100% - 2px);\n  display: flex;\n}\n.g-grid-current-time-text {\n  font-size: x-small;\n}\n","top"),Ae("\n.g-gantt-bar {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background: cadetblue;\n  overflow: hidden;\n}\n.g-gantt-bar-label {\n  width: 100%;\n  height: 100%;\n  box-sizing: border-box;\n  padding: 0 14px 0 14px; /* 14px is the width of the handle */\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.g-gantt-bar-label > * {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n.g-gantt-bar-handle-left,\n.g-gantt-bar-handle-right {\n  position: absolute;\n  width: 10px;\n  height: 100%;\n  background: white;\n  opacity: 0.7;\n  border-radius: 0px;\n  cursor: ew-resize;\n  top: 0;\n}\n.g-gantt-bar-handle-left {\n  left: 0;\n}\n.g-gantt-bar-handle-right {\n  right: 0;\n}\n.g-gantt-bar-label img {\n  pointer-events: none;\n}\n","top");export{ze as J,Ye as z};
