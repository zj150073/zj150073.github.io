import{f as e}from"./mock-DrFkdOeP.js";import{m as a}from"./index-B2iGRBN9.js";import{A as l}from"./@pureadmin-f9nW_l6N.js";import{k as t}from"./@iconify-icons-CxRB8ffa.js";import{d as s,r as o,S as r,a1 as i,o as f,f as d,B as u,s as m,a as p,D as n,E as c}from"./@vue-CFXrvzpc.js";const _={class:"el-upload__text"},y=s({__name:"form",setup(s){const y=o(),v=o(),x=r({fileList:[],date:""});return(s,o)=>{const r=i("IconifyIconOffline"),b=i("el-upload"),k=i("el-form-item"),w=i("el-date-picker"),L=i("el-button"),g=i("el-form");return f(),d(g,{ref_key:"formRef",ref:y,model:x,"label-width":"82px"},{default:u((()=>[m(k,{label:"附件",prop:"fileList",rules:[{required:!0,message:"附件不能为空"}]},{default:u((()=>[m(b,{ref_key:"uploadRef",ref:v,"file-list":x.fileList,"onUpdate:fileList":o[0]||(o[0]=e=>x.fileList=e),drag:"",multiple:"",action:"#",class:"!w-[200px]","auto-upload":!1},{default:u((()=>[p("div",_,[m(r,{icon:n(t),width:"26",class:"m-auto mb-2"},null,8,["icon"]),c(" 可点击或拖拽上传 ")])])),_:1},8,["file-list"])])),_:1}),m(k,{label:"日期",prop:"date",rules:[{required:!0,message:"日期不能为空"}]},{default:u((()=>[m(w,{modelValue:x.date,"onUpdate:modelValue":o[1]||(o[1]=e=>x.date=e),type:"datetime",class:"!w-[200px]",placeholder:"请选择日期时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])])),_:1}),m(k,null,{default:u((()=>[m(L,{type:"primary",text:"",bg:"",onClick:o[2]||(o[2]=t=>{var s;(s=y.value)&&s.validate((t=>{if(!t)return!1;{const t=l({files:x.fileList.map((e=>({raw:e.raw}))),date:x.date});e(t).then((({success:e})=>{e?a("提交成功",{type:"success"}):a("提交失败")})).catch((e=>{a(`提交异常 ${e}`,{type:"error"})}))}}))})},{default:u((()=>[c(" 提交 ")])),_:1}),m(L,{text:"",bg:"",onClick:o[3]||(o[3]=e=>{var a;(a=y.value)&&a.resetFields()})},{default:u((()=>[c("重置")])),_:1})])),_:1})])),_:1},8,["model"])}}});export{y as _};
