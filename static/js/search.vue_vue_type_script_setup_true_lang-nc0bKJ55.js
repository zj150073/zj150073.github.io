var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,u=(l,a,o)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[a]=o,n=(e,l)=>{for(var a in l||(l={}))r.call(l,a)&&u(e,a,l[a]);if(o)for(var a of o(l))t.call(l,a)&&u(e,a,l[a]);return e},s=(e,o)=>l(e,a(o));import{_ as p}from"./_plugin-vue_export-helper-DGnNDdBR.js";import{u as c,f as i,g as d,a as V,P as f,r as m,s as h,c as v,d as b,b as y}from"./plus-form-BERDGb7o.js";import{T as P}from"./orderBy-C8pHj69P.js";const w=p(Vue.defineComponent(s(n({},{name:"PlusSearch"}),{__name:"index",props:{modelValue:{default:()=>({})},defaultValues:{default:()=>({})},columns:{default:()=>[]},hasFooter:{type:Boolean,default:!0},hasReset:{type:Boolean,default:!0},hasUnfold:{type:Boolean,default:!0},searchText:{default:""},resetText:{default:""},searchLoading:{type:Boolean,default:!1},inline:{type:Boolean,default:!0},showNumber:{default:2},labelPosition:{default:void 0},rowProps:{default:()=>({gutter:20})},colProps:{default:()=>({xs:24,sm:12,md:8,lg:8,xl:6})}},emits:["update:modelValue","search","change","reset","collapse"],setup(e,{expose:l,emit:a}){const o=e,r=a,{t:t}=c(),u=Vue.ref(),p=Vue.ref(!1),w=Vue.ref({}),x=Vue.useSlots(),g=i(x,y()),k=i(x,d()),_=i(x,V()),B=Vue.computed((()=>{const e=o.columns.filter((e=>!0!==Vue.unref(e.hideInSearch))).map((e=>s(n({},e),{hideInForm:!1}))).map((e=>s(n({},e),{order:(null==e?void 0:e.order)?Vue.unref(e.order):0})));return P(e,["order"],["desc"])})),C=Vue.computed((()=>o.hasUnfold&&!p.value?B.value.slice(0,o.showNumber):B.value));Vue.watch((()=>o.modelValue),(e=>{w.value=e}),{immediate:!0});const S=(e,l)=>{return a=this,o=null,t=function*(){r("update:modelValue",e),r("change",e,l)},new Promise(((e,l)=>{var r=e=>{try{n(t.next(e))}catch(a){l(a)}},u=e=>{try{n(t.throw(e))}catch(a){l(a)}},n=l=>l.done?e(l.value):Promise.resolve(l.value).then(r,u);n((t=t.apply(a,o)).next())}));var a,o,t},T=()=>{r("search",w.value)},E=()=>{w.value=n({},o.defaultValues),r("update:modelValue",w.value),r("reset",w.value)},N=e=>{e.preventDefault(),p.value=!p.value,r("collapse",p.value)};return l({plusFormInstance:u,handleReset:E,handleSearch:T,handleUnfold:N}),(e,l)=>(Vue.openBlock(),Vue.createBlock(Vue.unref(f),Vue.mergeProps({ref_key:"plusFormInstance",ref:u},e.$attrs,{modelValue:w.value,"onUpdate:modelValue":l[0]||(l[0]=e=>w.value=e),inline:e.inline,"label-position":e.labelPosition,"row-props":e.rowProps,"col-props":e.colProps,columns:C.value,class:"plus-search","has-footer":!1,onChange:S}),Vue.createSlots({"search-footer":Vue.withCtx((()=>[e.hasFooter?(Vue.openBlock(),Vue.createBlock(Vue.unref(ElementPlus.ElFormItem),{key:0,class:"plus-search__button__wrapper",label:"top"===e.labelPosition?"placeholder":""},{default:Vue.withCtx((()=>[Vue.renderSlot(e.$slots,"footer",{isShowUnfold:p.value,handleReset:E,handleSearch:T,handleUnfold:N},(()=>[e.hasReset?(Vue.openBlock(),Vue.createBlock(Vue.unref(ElementPlus.ElButton),{key:0,icon:Vue.unref(m),onClick:E},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(e.resetText||Vue.unref(t)("plus.search.resetText")),1)])),_:1},8,["icon"])):Vue.createCommentVNode("v-if",!0),Vue.createVNode(Vue.unref(ElementPlus.ElButton),{type:"primary",loading:e.searchLoading,icon:Vue.unref(h),onClick:T},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(e.searchText||Vue.unref(t)("plus.search.searchText")),1)])),_:1},8,["loading","icon"]),e.hasUnfold&&B.value.length>e.showNumber?(Vue.openBlock(),Vue.createBlock(Vue.unref(ElementPlus.ElLink),{key:1,class:"plus-search__unfold",type:"primary",underline:!1,href:"javaScript:;",onClick:N},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(p.value?Vue.unref(t)("plus.search.retract"):Vue.unref(t)("plus.search.expand"))+" ",1),Vue.createVNode(Vue.unref(ElementPlus.ElIcon),null,{default:Vue.withCtx((()=>[p.value?(Vue.openBlock(),Vue.createBlock(Vue.unref(v),{key:0})):(Vue.openBlock(),Vue.createBlock(Vue.unref(b),{key:1}))])),_:1})])),_:1})):Vue.createCommentVNode("v-if",!0)]))])),_:3},8,["label"])):Vue.createCommentVNode("v-if",!0)])),_:2},[Vue.renderList(Vue.unref(g),((l,a)=>({name:a,fn:Vue.withCtx((l=>[Vue.renderSlot(e.$slots,a,Vue.normalizeProps(Vue.guardReactiveProps(l)))]))}))),Vue.renderList(Vue.unref(k),((l,a)=>({name:a,fn:Vue.withCtx((l=>[Vue.renderSlot(e.$slots,a,Vue.normalizeProps(Vue.guardReactiveProps(l)))]))}))),Vue.renderList(Vue.unref(_),((l,a)=>({name:a,fn:Vue.withCtx((l=>[Vue.renderSlot(e.$slots,a,Vue.normalizeProps(Vue.guardReactiveProps(l)))]))}))),e.$slots["tooltip-icon"]?{name:"tooltip-icon",fn:Vue.withCtx((()=>[Vue.renderSlot(e.$slots,"tooltip-icon")])),key:"0"}:void 0]),1040,["modelValue","inline","label-position","row-props","col-props","columns"]))}})),[["__file","index.vue"]]),x=Vue.defineComponent({__name:"search",setup(e){const l=Vue.ref({status:"0",time:(new Date).toString()}),a=[{label:"名称",prop:"name",valueType:"copy",tooltip:"名称最多显示6个字符"},{label:"状态",prop:"status",valueType:"select",options:[{label:"未解决",value:"0",color:"red"},{label:"已解决",value:"1",color:"blue"},{label:"解决中",value:"2",color:"yellow"},{label:"失败",value:"3",color:"red"}]},{label:"时间",prop:"time",valueType:"date-picker"},{label:"数量",prop:"number",valueType:"input-number",fieldProps:{precision:2,step:2}},{label:"城市",prop:"city",valueType:"cascader",options:[{value:"0",label:"陕西",children:[{value:"0-0",label:"西安",children:[{value:"0-0-0",label:"新城区"},{value:"0-0-1",label:"高新区"},{value:"0-0-2",label:"灞桥区"}]}]},{value:"1",label:"山西",children:[{value:"1-0",label:"太原",children:[{value:"1-0-0",label:"小店区"},{value:"1-0-1",label:"古交市"},{value:"1-0-2",label:"万柏林区"}]}]}]},{label:"地区",prop:"place",tooltip:"请精确到门牌号",fieldProps:{placeholder:"请精确到门牌号"}},{label:"到期时间",prop:"endTime",valueType:"date-picker",fieldProps:{type:"datetimerange",startPlaceholder:"请选择",endPlaceholder:"请选择"}},{label:"奖励",prop:"price"},{label:"提成",prop:"percentage"}],o=e=>{},r=e=>{},t=()=>{};return(e,u)=>(Vue.openBlock(),Vue.createBlock(Vue.unref(w),{modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=e=>l.value=e),columns:a,"show-number":2,"label-width":"80","label-position":"right",onChange:o,onSearch:r,onReset:t},null,8,["modelValue"]))}});export{x as _};
