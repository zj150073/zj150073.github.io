import{r as e,a,m as t,aV as n,L as i,bk as r}from"./index-CgRj-jQH.js";import{d as o}from"./system-Bp0iG7kK.js";function l(){const l=e({username:""}),s=a([]),m=a(!0),p=e({total:0,pageSize:10,currentPage:1,background:!0}),u=[{label:"序号",prop:"id",minWidth:60},{label:"用户名",prop:"username",minWidth:100},{label:"登录 IP",prop:"ip",minWidth:140},{label:"登录地点",prop:"address",minWidth:140},{label:"操作系统",prop:"system",minWidth:100},{label:"浏览器类型",prop:"browser",minWidth:100},{label:"登录时间",prop:"loginTime",minWidth:180,formatter:({loginTime:e})=>n(e).format("YYYY-MM-DD HH:mm:ss")},{label:"操作",fixed:"right",slot:"operation"}];function d(){return e=this,a=null,t=function*(){m.value=!0;const{data:e}=yield o(r(l));s.value=e.list,p.total=e.total,p.pageSize=e.pageSize,p.currentPage=e.currentPage,setTimeout((()=>{m.value=!1}),500)},new Promise(((n,i)=>{var r=e=>{try{l(t.next(e))}catch(a){i(a)}},o=e=>{try{l(t.throw(e))}catch(a){i(a)}},l=e=>e.done?n(e.value):Promise.resolve(e.value).then(r,o);l((t=t.apply(e,a)).next())}));var e,a,t}return t((()=>{d()})),{form:l,loading:m,columns:u,dataList:s,pagination:p,onSearch:d,resetForm:e=>{e&&(e.resetFields(),d())},handleOffline:function(e){i(`${e.username}已被强制下线`,{type:"success"}),d()},handleSizeChange:function(e){},handleCurrentChange:function(e){},handleSelectionChange:function(e){}}}export{l as useRole};
