var U=(k,f,t)=>new Promise((s,m)=>{var $=n=>{try{w(t.next(n))}catch(_){m(_)}},b=n=>{try{w(t.throw(n))}catch(_){m(_)}},w=n=>n.done?s(n.value):Promise.resolve(n.value).then($,b);w((t=t.apply(k,f)).next())});import{M as i}from"./motion-Bq-5x0bO.js";import{m as h}from"./message-DjDt0P0I.js";import{u as g,a as B}from"./verifyCode-C1vsxQ9n.js";import{d as E,l as C,v as N,r as y,o as T,g as z,h as o,b as l,u as e,e as F,f as V,t as c,$ as S,as as D}from"./index-DygeQ5pz.js";const M={class:"w-full flex justify-between"},q=E({__name:"LoginRegist",setup(k){const f=C(!1),t=C(!1),s=N({username:"",phone:"",verifyCode:"",password:"",repeatPassword:""}),m=C(),{isDisabled:$,text:b}=g(),w=[{validator:(d,a,u)=>{a===""?u(new Error(window.$i18n("请输入确认密码"))):s.password!==a?u(new Error(window.$i18n("两次密码不一致!"))):u()},trigger:"blur"}],n=d=>U(this,null,function*(){t.value=!0,d&&(yield d.validate(a=>{a?f.value?setTimeout(()=>{h("注册成功",{type:"success"}),t.value=!1},2e3):(t.value=!1,h("请勾选隐私政策",{type:"warning"})):t.value=!1}))});function _(){g().end(),D().SET_CURRENTPAGE(0)}return(d,a)=>{const u=y("el-input"),p=y("el-form-item"),v=y("el-button"),R=y("el-checkbox"),P=y("el-form");return T(),z(P,{ref_key:"ruleFormRef",ref:m,model:e(s),rules:e(B),size:"large"},{default:o(()=>[l(e(i),null,{default:o(()=>[l(p,{prop:"username"},{default:o(()=>[l(u,{modelValue:e(s).username,"onUpdate:modelValue":a[0]||(a[0]=r=>e(s).username=r),clearable:"",placeholder:d.$i18n("账号")},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),l(e(i),{delay:100},{default:o(()=>[l(p,{prop:"phone"},{default:o(()=>[l(u,{modelValue:e(s).phone,"onUpdate:modelValue":a[1]||(a[1]=r=>e(s).phone=r),clearable:"",placeholder:d.$i18n("手机号")},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),l(e(i),{delay:150},{default:o(()=>[l(p,{prop:"verifyCode"},{default:o(()=>[F("div",M,[l(u,{modelValue:e(s).verifyCode,"onUpdate:modelValue":a[2]||(a[2]=r=>e(s).verifyCode=r),clearable:"",placeholder:d.$i18n("验证码")},null,8,["modelValue","placeholder"]),l(v,{disabled:e($),class:"ml-2",onClick:a[3]||(a[3]=r=>e(g)().start(e(m),"phone"))},{default:o(()=>[V(c(e(b)),1)]),_:1},8,["disabled"])])]),_:1})]),_:1}),l(e(i),{delay:200},{default:o(()=>[l(p,{prop:"password"},{default:o(()=>[l(u,{modelValue:e(s).password,"onUpdate:modelValue":a[4]||(a[4]=r=>e(s).password=r),clearable:"","show-password":"",placeholder:d.$i18n("密码")},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),l(e(i),{delay:250},{default:o(()=>[l(p,{rules:w,prop:"repeatPassword"},{default:o(()=>[l(u,{modelValue:e(s).repeatPassword,"onUpdate:modelValue":a[5]||(a[5]=r=>e(s).repeatPassword=r),clearable:"","show-password":"",placeholder:d.$i18n("确认密码")},null,8,["modelValue","placeholder"])]),_:1})]),_:1}),l(e(i),{delay:300},{default:o(()=>[l(p,null,{default:o(()=>[l(R,{modelValue:e(f),"onUpdate:modelValue":a[6]||(a[6]=r=>S(f)?f.value=r:null)},{default:o(()=>[V(c(d.$i18n("我已仔细阅读并接受")),1)]),_:1},8,["modelValue"]),l(v,{link:"",type:"primary"},{default:o(()=>[V(c(d.$i18n("《隐私政策》")),1)]),_:1})]),_:1})]),_:1}),l(e(i),{delay:350},{default:o(()=>[l(p,null,{default:o(()=>[l(v,{class:"w-full",size:"default",type:"primary",loading:e(t),onClick:a[7]||(a[7]=r=>n(e(m)))},{default:o(()=>[V(c(d.$i18n("确定")),1)]),_:1},8,["loading"])]),_:1})]),_:1}),l(e(i),{delay:400},{default:o(()=>[l(p,null,{default:o(()=>[l(v,{class:"w-full",size:"default",onClick:_},{default:o(()=>[V(c(d.$i18n("返回")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])}}});export{q as _};
