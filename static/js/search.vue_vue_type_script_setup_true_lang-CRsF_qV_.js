var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,t=(l,a,o)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[a]=o,n=(e,l)=>{for(var a in l||(l={}))s.call(l,a)&&t(e,a,l[a]);if(o)for(var a of o(l))r.call(l,a)&&t(e,a,l[a]);return e},u=(e,o)=>l(e,a(o));import{_ as p}from"./_plugin-vue_export-helper-DGnNDdBR.js";import{u as d,f as i,g as c,a as h,P as f,b as m}from"./plus-form-DEkdpNN5.js";import{d as v,a as b,aW as y,p as _,u as P,n as g,f as w,b as x,ap as j,l as T,w as V,S as k,aq as S,bj as O,dn as U,dh as $,dp as B,h as C,t as F,j as I,i as R,dq as D,dr as N,ds as q,dt as E,du as L,a5 as W}from"./index-CgRj-jQH.js";import{o as Y}from"./orderBy-9wRnOgeJ.js";const z=p(v(u(n({},{name:"PlusSearch"}),{__name:"index",props:{modelValue:{default:()=>({})},defaultValues:{default:()=>({})},columns:{default:()=>[]},hasFooter:{type:Boolean,default:!0},hasReset:{type:Boolean,default:!0},hasUnfold:{type:Boolean,default:!0},searchText:{default:""},resetText:{default:""},searchLoading:{type:Boolean,default:!1},inline:{type:Boolean,default:!0},showNumber:{default:2},labelPosition:{default:void 0},rowProps:{default:()=>({gutter:20})},colProps:{default:()=>({xs:24,sm:12,md:8,lg:8,xl:6})}},emits:["update:modelValue","search","change","reset","collapse"],setup(e,{expose:l,emit:a}){const o=e,s=a,{t:r}=d(),t=b(),p=b(!1),v=b({}),z=y(),A=i(z,m()),G=i(z,c()),H=i(z,h()),J=_((()=>{const e=o.columns.filter((e=>!0!==P(e.hideInSearch))).map((e=>u(n({},e),{hideInForm:!1}))).map((e=>u(n({},e),{order:(null==e?void 0:e.order)?P(e.order):0})));return Y(e,["order"],["desc"])})),K=_((()=>o.hasUnfold&&!p.value?J.value.slice(0,o.showNumber):J.value));g((()=>o.modelValue),(e=>{v.value=e}),{immediate:!0});const M=(e,l)=>{return a=this,o=null,r=function*(){s("update:modelValue",e),s("change",e,l)},new Promise(((e,l)=>{var s=e=>{try{n(r.next(e))}catch(a){l(a)}},t=e=>{try{n(r.throw(e))}catch(a){l(a)}},n=l=>l.done?e(l.value):Promise.resolve(l.value).then(s,t);n((r=r.apply(a,o)).next())}));var a,o,r},Q=()=>{s("search",v.value)},X=()=>{v.value=n({},o.defaultValues),s("update:modelValue",v.value),s("reset",v.value)},Z=e=>{e.preventDefault(),p.value=!p.value,s("collapse",p.value)};return l({plusFormInstance:t,handleReset:X,handleSearch:Q,handleUnfold:Z}),(e,l)=>(w(),x(P(f),W({ref_key:"plusFormInstance",ref:t},e.$attrs,{modelValue:v.value,"onUpdate:modelValue":l[0]||(l[0]=e=>v.value=e),inline:e.inline,"label-position":e.labelPosition,"row-props":e.rowProps,"col-props":e.colProps,columns:K.value,class:"plus-search","has-footer":!1,onChange:M}),j({"search-footer":V((()=>[e.hasFooter?(w(),x(P(U),{key:0,class:"plus-search__button__wrapper",label:"top"===e.labelPosition?"placeholder":""},{default:V((()=>[k(e.$slots,"footer",{isShowUnfold:p.value,handleReset:X,handleSearch:Q,handleUnfold:Z},(()=>[e.hasReset?(w(),x(P($),{key:0,icon:P(B),onClick:X},{default:V((()=>[C(F(e.resetText||P(r)("plus.search.resetText")),1)])),_:1},8,["icon"])):I("v-if",!0),R(P($),{type:"primary",loading:e.searchLoading,icon:P(D),onClick:Q},{default:V((()=>[C(F(e.searchText||P(r)("plus.search.searchText")),1)])),_:1},8,["loading","icon"]),e.hasUnfold&&J.value.length>e.showNumber?(w(),x(P(N),{key:1,class:"plus-search__unfold",type:"primary",underline:!1,href:"javaScript:;",onClick:Z},{default:V((()=>[C(F(p.value?P(r)("plus.search.retract"):P(r)("plus.search.expand"))+" ",1),R(P(q),null,{default:V((()=>[p.value?(w(),x(P(E),{key:0})):(w(),x(P(L),{key:1}))])),_:1})])),_:1})):I("v-if",!0)]))])),_:3},8,["label"])):I("v-if",!0)])),_:2},[T(P(A),((l,a)=>({name:a,fn:V((l=>[k(e.$slots,a,S(O(l)))]))}))),T(P(G),((l,a)=>({name:a,fn:V((l=>[k(e.$slots,a,S(O(l)))]))}))),T(P(H),((l,a)=>({name:a,fn:V((l=>[k(e.$slots,a,S(O(l)))]))}))),e.$slots["tooltip-icon"]?{name:"tooltip-icon",fn:V((()=>[k(e.$slots,"tooltip-icon")])),key:"0"}:void 0]),1040,["modelValue","inline","label-position","row-props","col-props","columns"]))}})),[["__file","index.vue"]]),A=v({__name:"search",setup(e){const l=b({status:"0",time:(new Date).toString()}),a=[{label:"名称",prop:"name",valueType:"copy",tooltip:"名称最多显示6个字符"},{label:"状态",prop:"status",valueType:"select",options:[{label:"未解决",value:"0",color:"red"},{label:"已解决",value:"1",color:"blue"},{label:"解决中",value:"2",color:"yellow"},{label:"失败",value:"3",color:"red"}]},{label:"时间",prop:"time",valueType:"date-picker"},{label:"数量",prop:"number",valueType:"input-number",fieldProps:{precision:2,step:2}},{label:"城市",prop:"city",valueType:"cascader",options:[{value:"0",label:"陕西",children:[{value:"0-0",label:"西安",children:[{value:"0-0-0",label:"新城区"},{value:"0-0-1",label:"高新区"},{value:"0-0-2",label:"灞桥区"}]}]},{value:"1",label:"山西",children:[{value:"1-0",label:"太原",children:[{value:"1-0-0",label:"小店区"},{value:"1-0-1",label:"古交市"},{value:"1-0-2",label:"万柏林区"}]}]}]},{label:"地区",prop:"place",tooltip:"请精确到门牌号",fieldProps:{placeholder:"请精确到门牌号"}},{label:"到期时间",prop:"endTime",valueType:"date-picker",fieldProps:{type:"datetimerange",startPlaceholder:"请选择",endPlaceholder:"请选择"}},{label:"奖励",prop:"price"},{label:"提成",prop:"percentage"}],o=e=>{},s=e=>{},r=()=>{};return(e,t)=>(w(),x(P(z),{modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value=e),columns:a,"show-number":2,"label-width":"80","label-position":"right",onChange:o,onSearch:s,onReset:r},null,8,["modelValue"]))}});export{A as _};
