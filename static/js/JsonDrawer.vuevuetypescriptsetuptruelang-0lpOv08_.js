import{an as T,ao as K,d as W,h as N,H as Q,Y as Z,r as tt,c as et,o as nt,b as ot}from"./index-CRBBsR8x.js";var F={exports:{}};(function(A,R){(function(_,g){g()})(T,function(){function _(e,n){return typeof n=="undefined"?n={autoBom:!1}:typeof n!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e}function g(e,n,d){var i=new XMLHttpRequest;i.open("GET",e),i.responseType="blob",i.onload=function(){s(i.response,n,d)},i.onerror=function(){console.error("could not download file")},i.send()}function b(e){var n=new XMLHttpRequest;n.open("HEAD",e,!1);try{n.send()}catch(d){}return 200<=n.status&&299>=n.status}function l(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(d){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(n)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof T=="object"&&T.global===T?T:void 0,t=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!t?function(e,n,d){var i=a.URL||a.webkitURL,v=document.createElement("a");n=n||e.name||"download",v.download=n,v.rel="noopener",typeof e=="string"?(v.href=e,v.origin===location.origin?l(v):b(v.href)?g(e,n,d):l(v,v.target="_blank")):(v.href=i.createObjectURL(e),setTimeout(function(){i.revokeObjectURL(v.href)},4e4),setTimeout(function(){l(v)},0))}:"msSaveOrOpenBlob"in navigator?function(e,n,d){if(n=n||e.name||"download",typeof e!="string")navigator.msSaveOrOpenBlob(_(e,d),n);else if(b(e))g(e,n,d);else{var i=document.createElement("a");i.href=e,i.target="_blank",setTimeout(function(){l(i)})}}:function(e,n,d,i){if(i=i||open("","_blank"),i&&(i.document.title=i.document.body.innerText="downloading..."),typeof e=="string")return g(e,n,d);var v=e.type==="application/octet-stream",m=/constructor/i.test(a.HTMLElement)||a.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||v&&m||t)&&typeof FileReader!="undefined"){var y=new FileReader;y.onloadend=function(){var x=y.result;x=h?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=x:location=x,i=null},y.readAsDataURL(e)}else{var w=a.URL||a.webkitURL,S=w.createObjectURL(e);i?i.location=S:location.href=S,i=null,setTimeout(function(){w.revokeObjectURL(S)},4e4)}});a.saveAs=s.saveAs=s,A.exports=s})})(F);var rt=F.exports,U={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */(function(A,R){(function(g,b){A.exports=b()})(T,function(){return function(){var _={686:function(l,a,t){t.d(a,{default:function(){return q}});var s=t(279),e=t.n(s),n=t(370),d=t.n(n),i=t(817),v=t.n(i);function m(f){try{return document.execCommand(f)}catch(r){return!1}}var h=function(r){var o=v()(r);return m("cut"),o},y=h;function w(f){var r=document.documentElement.getAttribute("dir")==="rtl",o=document.createElement("textarea");o.style.fontSize="12pt",o.style.border="0",o.style.padding="0",o.style.margin="0",o.style.position="absolute",o.style[r?"right":"left"]="-9999px";var u=window.pageYOffset||document.documentElement.scrollTop;return o.style.top="".concat(u,"px"),o.setAttribute("readonly",""),o.value=f,o}var S=function(r,o){var u=w(r);o.container.appendChild(u);var c=v()(u);return m("copy"),u.remove(),c},x=function(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},u="";return typeof r=="string"?u=S(r,o):r instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(r==null?void 0:r.type)?u=S(r.value,o):(u=v()(r),m("copy")),u},M=x;function O(f){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?O=function(o){return typeof o}:O=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},O(f)}var B=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=r.action,u=o===void 0?"copy":o,c=r.container,p=r.target,E=r.text;if(u!=="copy"&&u!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(p!==void 0)if(p&&O(p)==="object"&&p.nodeType===1){if(u==="copy"&&p.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(u==="cut"&&(p.hasAttribute("readonly")||p.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(E)return M(E,{container:c});if(p)return u==="cut"?y(p):M(p,{container:c})},H=B;function C(f){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?C=function(o){return typeof o}:C=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},C(f)}function J(f,r){if(!(f instanceof r))throw new TypeError("Cannot call a class as a function")}function P(f,r){for(var o=0;o<r.length;o++){var u=r[o];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(f,u.key,u)}}function $(f,r,o){return r&&P(f.prototype,r),o&&P(f,o),f}function I(f,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(r&&r.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),r&&k(f,r)}function k(f,r){return k=Object.setPrototypeOf||function(u,c){return u.__proto__=c,u},k(f,r)}function V(f){var r=X();return function(){var u=j(f),c;if(r){var p=j(this).constructor;c=Reflect.construct(u,arguments,p)}else c=u.apply(this,arguments);return Y(this,c)}}function Y(f,r){return r&&(C(r)==="object"||typeof r=="function")?r:z(f)}function z(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function X(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(f){return!1}}function j(f){return j=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},j(f)}function D(f,r){var o="data-clipboard-".concat(f);if(r.hasAttribute(o))return r.getAttribute(o)}var G=function(f){I(o,f);var r=V(o);function o(u,c){var p;return J(this,o),p=r.call(this),p.resolveOptions(c),p.listenClick(u),p}return $(o,[{key:"resolveOptions",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof c.action=="function"?c.action:this.defaultAction,this.target=typeof c.target=="function"?c.target:this.defaultTarget,this.text=typeof c.text=="function"?c.text:this.defaultText,this.container=C(c.container)==="object"?c.container:document.body}},{key:"listenClick",value:function(c){var p=this;this.listener=d()(c,"click",function(E){return p.onClick(E)})}},{key:"onClick",value:function(c){var p=c.delegateTarget||c.currentTarget,E=this.action(p)||"copy",L=H({action:E,container:this.container,target:this.target(p),text:this.text(p)});this.emit(L?"success":"error",{action:E,text:L,trigger:p,clearSelection:function(){p&&p.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(c){return D("action",c)}},{key:"defaultTarget",value:function(c){var p=D("target",c);if(p)return document.querySelector(p)}},{key:"defaultText",value:function(c){return D("text",c)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(c){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return M(c,p)}},{key:"cut",value:function(c){return y(c)}},{key:"isSupported",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],p=typeof c=="string"?[c]:c,E=!!document.queryCommandSupported;return p.forEach(function(L){E=E&&!!document.queryCommandSupported(L)}),E}}]),o}(e()),q=G},828:function(l){var a=9;if(typeof Element!="undefined"&&!Element.prototype.matches){var t=Element.prototype;t.matches=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector}function s(e,n){for(;e&&e.nodeType!==a;){if(typeof e.matches=="function"&&e.matches(n))return e;e=e.parentNode}}l.exports=s},438:function(l,a,t){var s=t(828);function e(i,v,m,h,y){var w=d.apply(this,arguments);return i.addEventListener(m,w,y),{destroy:function(){i.removeEventListener(m,w,y)}}}function n(i,v,m,h,y){return typeof i.addEventListener=="function"?e.apply(null,arguments):typeof m=="function"?e.bind(null,document).apply(null,arguments):(typeof i=="string"&&(i=document.querySelectorAll(i)),Array.prototype.map.call(i,function(w){return e(w,v,m,h,y)}))}function d(i,v,m,h){return function(y){y.delegateTarget=s(y.target,v),y.delegateTarget&&h.call(i,y)}}l.exports=n},879:function(l,a){a.node=function(t){return t!==void 0&&t instanceof HTMLElement&&t.nodeType===1},a.nodeList=function(t){var s=Object.prototype.toString.call(t);return t!==void 0&&(s==="[object NodeList]"||s==="[object HTMLCollection]")&&"length"in t&&(t.length===0||a.node(t[0]))},a.string=function(t){return typeof t=="string"||t instanceof String},a.fn=function(t){var s=Object.prototype.toString.call(t);return s==="[object Function]"}},370:function(l,a,t){var s=t(879),e=t(438);function n(m,h,y){if(!m&&!h&&!y)throw new Error("Missing required arguments");if(!s.string(h))throw new TypeError("Second argument must be a String");if(!s.fn(y))throw new TypeError("Third argument must be a Function");if(s.node(m))return d(m,h,y);if(s.nodeList(m))return i(m,h,y);if(s.string(m))return v(m,h,y);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function d(m,h,y){return m.addEventListener(h,y),{destroy:function(){m.removeEventListener(h,y)}}}function i(m,h,y){return Array.prototype.forEach.call(m,function(w){w.addEventListener(h,y)}),{destroy:function(){Array.prototype.forEach.call(m,function(w){w.removeEventListener(h,y)})}}}function v(m,h,y){return e(document.body,m,h,y)}l.exports=n},817:function(l){function a(t){var s;if(t.nodeName==="SELECT")t.focus(),s=t.value;else if(t.nodeName==="INPUT"||t.nodeName==="TEXTAREA"){var e=t.hasAttribute("readonly");e||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),e||t.removeAttribute("readonly"),s=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var n=window.getSelection(),d=document.createRange();d.selectNodeContents(t),n.removeAllRanges(),n.addRange(d),s=n.toString()}return s}l.exports=a},279:function(l){function a(){}a.prototype={on:function(t,s,e){var n=this.e||(this.e={});return(n[t]||(n[t]=[])).push({fn:s,ctx:e}),this},once:function(t,s,e){var n=this;function d(){n.off(t,d),s.apply(e,arguments)}return d._=s,this.on(t,d,e)},emit:function(t){var s=[].slice.call(arguments,1),e=((this.e||(this.e={}))[t]||[]).slice(),n=0,d=e.length;for(n;n<d;n++)e[n].fn.apply(e[n].ctx,s);return this},off:function(t,s){var e=this.e||(this.e={}),n=e[t],d=[];if(n&&s)for(var i=0,v=n.length;i<v;i++)n[i].fn!==s&&n[i].fn._!==s&&d.push(n[i]);return d.length?e[t]=d:delete e[t],this}},l.exports=a,l.exports.TinyEmitter=a}},g={};function b(l){if(g[l])return g[l].exports;var a=g[l]={exports:{}};return _[l](a,a.exports,b),a.exports}return function(){b.n=function(l){var a=l&&l.__esModule?function(){return l.default}:function(){return l};return b.d(a,{a}),a}}(),function(){b.d=function(l,a){for(var t in a)b.o(a,t)&&!b.o(l,t)&&Object.defineProperty(l,t,{enumerable:!0,get:a[t]})}}(),function(){b.o=function(l,a){return Object.prototype.hasOwnProperty.call(l,a)}}(),b(686)}().default})})(U);var it=U.exports;const at=K(it),st=W({__name:"JsonDrawer",props:{formData:{type:Object,default:()=>({})}},setup(A,{expose:R}){let _=N(null);const g=A;let b=()=>{_.value.format().then(()=>{$ajmerMessage("代码格式化成功",{type:"success"})}).catch(n=>{$ajmerMessage(n.message,{type:"error"})})},l=()=>new Promise((n,d)=>{_.value.format().then(()=>{n({code:200,message:"格式化成功"})}).catch(i=>{d({code:400,message:i.message})})}),a=()=>{_.value.updatePrice("",!0),$ajmerMessage("清空成功",{type:"success"})},t=()=>{const n=new Blob([g.formData.code],{type:"text/plain;charset=utf-8"});rt.saveAs(n,`${+new Date}.json`)},s=()=>{document.getElementById("copyJson").click()},e=N();return Q(()=>{e.value=new at("#copyJson",{text:()=>{if(g.formData.code)return $ajmerMessage("代码已复制到剪切板，可粘贴。",{type:"success"}),g.formData.code}}),e.value.on("error",n=>{$ajmerMessage("代码为空，无法复制",{type:"error"})})}),Z(()=>{e.value&&e.value.destroy()}),R({clear:a,format:b,exportJson:t,copyJson:s,refreshJson:l}),(n,d)=>{const i=tt("AjmerCode");return nt(),et("div",null,[ot(i,{ref_key:"reCodeRefs",ref:_,modelValue:g.formData.code,"onUpdate:modelValue":d[0]||(d[0]=v=>g.formData.code=v)},null,8,["modelValue"])])}}});export{at as C,rt as F,st as _};
