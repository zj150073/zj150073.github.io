var e=Object.defineProperty,l=Object.defineProperties,o=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,u=(l,o,t)=>o in l?e(l,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[o]=t,n=(e,l)=>{for(var o in l||(l={}))a.call(l,o)&&u(e,o,l[o]);if(t)for(var o of t(l))r.call(l,o)&&u(e,o,l[o]);return e},i=(e,t)=>l(e,o(t));import{_ as d,b as s}from"./_plugin-vue_export-helper-DGnNDdBR.js";/* empty css                   */import{u as p,f as c,g as V,a as f,P as m,b as v}from"./plus-form-BERDGb7o.js";const h={class:"plus-dialog-body"};const b=d(Vue.defineComponent(i(n({},{name:"PlusDialog",inheritAttrs:!1}),{__name:"index",props:{modelValue:{type:Boolean,default:!1},confirmText:{default:""},cancelText:{default:""},confirmLoading:{type:Boolean,default:!1},hasFooter:{type:Boolean,default:!0},footerAlign:{default:"right"},top:{default:"15vh"},width:{default:"460px"},title:{default:""}},emits:["update:modelValue","cancel","confirm"],setup(e,{emit:l}){const o=e,t=l,a=Vue.computed((()=>({justifyContent:"left"===o.footerAlign?"flex-start":"center"===o.footerAlign?"center":"flex-end"}))),r=Vue.ref(!1),{t:u}=p();Vue.watchEffect((()=>{r.value=o.modelValue}));const n=()=>{t("confirm")},i=()=>{t("update:modelValue",!1),t("cancel")};return(e,l)=>(Vue.openBlock(),Vue.createBlock(Vue.unref(ElementPlus.ElDialog),Vue.mergeProps({modelValue:r.value,"onUpdate:modelValue":l[0]||(l[0]=e=>r.value=e),top:e.top,width:e.width,title:e.title||Vue.unref(u)("plus.dialog.title"),"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":!1,"before-close":i,class:"plus-dialog"},e.$attrs),Vue.createSlots({default:Vue.withCtx((()=>[Vue.createElementVNode("div",h,[Vue.renderSlot(e.$slots,"default")])])),_:2},[e.$slots.header?{name:"header",fn:Vue.withCtx((()=>[Vue.renderSlot(e.$slots,"header")])),key:"0"}:void 0,e.hasFooter?{name:"footer",fn:Vue.withCtx((()=>[Vue.createElementVNode("div",{class:"plus-dialog-footer",style:Vue.normalizeStyle(a.value)},[Vue.renderSlot(e.$slots,"footer",{},(()=>[Vue.createVNode(Vue.unref(ElementPlus.ElButton),{onClick:i},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(e.cancelText||Vue.unref(u)("plus.dialog.cancelText")),1)])),_:1}),Vue.createVNode(Vue.unref(ElementPlus.ElButton),{type:"primary",loading:e.confirmLoading,onClick:n},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(e.confirmText||Vue.unref(u)("plus.dialog.confirmText")),1)])),_:1},8,["loading"])]))],4)])),key:"1"}:void 0]),1040,["modelValue","top","width","title"]))}})),[["__file","index.vue"]]);const g=d(Vue.defineComponent(i(n({},{name:"PlusDialogForm"}),{__name:"index",props:{modelValue:{default:()=>({})},visible:{type:Boolean,default:!1},dialog:{default:()=>({})},form:{default:()=>({})},hasErrorTip:{type:Boolean,default:!0}},emits:["update:modelValue","update:visible","confirm","change","cancel","confirmError"],setup(e,{expose:l,emit:o}){const t=e,a=o,{t:r}=p(),u=Vue.ref(),n=Vue.computed((()=>{var e;return null==(e=u.value)?void 0:e.formInstance})),i=Vue.ref({}),d=Vue.ref(!1),h=Vue.useSlots(),g=c(h,v()),y=c(h,V()),x=c(h,f());Vue.watch((()=>t.visible),(e=>{d.value=e}),{immediate:!0}),Vue.watch((()=>t.modelValue),(e=>{i.value=e}),{immediate:!0});const w=(e,l)=>{a("update:modelValue",e),a("change",e,l)},P=()=>{return e=this,l=null,o=function*(){var e,l,o;try{(yield null==(e=n.value)?void 0:e.validate())&&a("confirm",i.value)}catch(u){if(t.hasErrorTip){ElementPlus.ElMessage.closeAll();const e=s(u)&&Object.values(u),t=e?null==(o=null==(l=e[0])?void 0:l[0])?void 0:o.message:void 0;ElementPlus.ElMessage.warning(t||r("plus.form.errorTip"))}a("confirmError",u)}},new Promise(((t,a)=>{var r=e=>{try{n(o.next(e))}catch(l){a(l)}},u=e=>{try{n(o.throw(e))}catch(l){a(l)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,u);n((o=o.apply(e,l)).next())}));var e,l,o},C=()=>{d.value=!1,a("update:visible",d.value),a("cancel")};return l({handleConfirm:P,handleCancel:C,formInstance:n}),(e,l)=>(Vue.openBlock(),Vue.createBlock(Vue.unref(b),Vue.mergeProps({modelValue:d.value,"onUpdate:modelValue":l[1]||(l[1]=e=>d.value=e),width:"800px",top:"10vh",title:Vue.unref(r)("plus.dialogForm.title")},e.dialog,{onCancel:C,onConfirm:P}),Vue.createSlots({default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(m),Vue.mergeProps({ref_key:"formInstance",ref:u,modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=e=>i.value=e),"has-footer":!1,"footer-align":"right"},e.form,{onChange:w}),Vue.createSlots({_:2},[e.$slots["form-footer"]?{name:"footer",fn:Vue.withCtx((l=>[Vue.renderSlot(e.$slots,"form-footer",Vue.normalizeProps(Vue.guardReactiveProps(l)))])),key:"0"}:void 0,e.$slots["form-group-header"]?{name:"group-header",fn:Vue.withCtx((l=>[Vue.renderSlot(e.$slots,"form-group-header",Vue.normalizeProps(Vue.guardReactiveProps(l)))])),key:"1"}:void 0,Vue.renderList(Vue.unref(g),((l,o)=>({name:o,fn:Vue.withCtx((l=>[Vue.renderSlot(e.$slots,o,Vue.normalizeProps(Vue.guardReactiveProps(l)))]))}))),Vue.renderList(Vue.unref(y),((l,o)=>({name:o,fn:Vue.withCtx((l=>[Vue.renderSlot(e.$slots,o,Vue.normalizeProps(Vue.guardReactiveProps(l)))]))}))),Vue.renderList(Vue.unref(x),((l,o)=>({name:o,fn:Vue.withCtx((l=>[Vue.renderSlot(e.$slots,o,Vue.normalizeProps(Vue.guardReactiveProps(l)))]))}))),e.$slots["tooltip-icon"]?{name:"tooltip-icon",fn:Vue.withCtx((()=>[Vue.renderSlot(e.$slots,"tooltip-icon")])),key:"2"}:void 0]),1040,["modelValue"])])),_:2},[e.$slots["dialog-header"]?{name:"header",fn:Vue.withCtx((()=>[Vue.renderSlot(e.$slots,"dialog-header")])),key:"0"}:void 0,e.$slots["dialog-footer"]?{name:"footer",fn:Vue.withCtx((()=>[Vue.renderSlot(e.$slots,"dialog-footer",Vue.normalizeProps(Vue.guardReactiveProps({handleConfirm:P,handleCancel:C})))])),key:"1"}:void 0]),1040,["modelValue","title"]))}})),[["__file","index.vue"]]),y=Vue.defineComponent({__name:"dialog",setup(e){const l=[{label:"名称",width:120,prop:"name",valueType:"copy",tooltip:"名称最多显示6个字符"},{label:"状态",width:120,prop:"status",valueType:"select",options:[{label:"未解决",value:"0",color:"red"},{label:"已解决",value:"1",color:"blue"},{label:"解决中",value:"2",color:"yellow"},{label:"失败",value:"3",color:"red"}]},{label:"是否显示",width:100,prop:"switch",valueType:"switch"},{label:"时间",prop:"time",valueType:"date-picker"},{label:"数量",prop:"number",valueType:"input-number",fieldProps:{precision:2,step:2}},{label:"城市",prop:"city",valueType:"cascader",options:[{value:"0",label:"陕西",children:[{value:"0-0",label:"西安",children:[{value:"0-0-0",label:"新城区"},{value:"0-0-1",label:"高新区"},{value:"0-0-2",label:"灞桥区"}]}]},{value:"1",label:"山西",children:[{value:"1-0",label:"太原",children:[{value:"1-0-0",label:"小店区"},{value:"1-0-1",label:"古交市"},{value:"1-0-2",label:"万柏林区"}]}]}]},{label:"地区",prop:"place",tooltip:"请精确到门牌号",fieldProps:{placeholder:"请精确到门牌号"}},{label:"要求",prop:"demand",valueType:"checkbox",options:[{label:"四六级",value:"0"},{label:"计算机二级证书",value:"1"},{label:"普通话证书",value:"2"}]},{label:"梦想",prop:"gift",valueType:"radio",options:[{label:"诗",value:"0"},{label:"远方",value:"1"},{label:"美食",value:"2"}]},{label:"到期时间",prop:"endTime",valueType:"date-picker",fieldProps:{type:"datetimerange",startPlaceholder:"请选择开始时间",endPlaceholder:"请选择结束时间"}},{label:"说明",prop:"desc",valueType:"textarea",fieldProps:{maxlength:10,showWordLimit:!0,autosize:{minRows:2,maxRows:4}}}],o=Vue.ref(!1),t=Vue.ref({}),a=()=>{o.value=!0};return(e,r)=>{const u=Vue.resolveComponent("el-button");return Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.createVNode(u,{onClick:a},{default:Vue.withCtx((()=>[Vue.createTextVNode("打开弹窗表单")])),_:1}),Vue.createVNode(Vue.unref(g),{visible:o.value,"onUpdate:visible":r[0]||(r[0]=e=>o.value=e),modelValue:t.value,"onUpdate:modelValue":r[1]||(r[1]=e=>t.value=e),form:{columns:l}},null,8,["visible","modelValue","form"])])}}});export{y as _};
