import{a as q,g as z,h as R}from"./tree-gRJJFaDd.js";import{d as S,h as d,p as V,ac as j,L as P,r as t,z as A,o as B,w as l,b as r,u,e as N,s as D,g as E}from"./index-DzEhiz7G.js";const Q={class:"each-item"},I=S({name:"user",__name:"index",setup(U){let y=d({}),c=d([]),k=d([{label:"用户名称",prop:"username",type:"input",width:"550px"},{label:"状态",prop:"status",type:"select",placeholder:"请选择状态",width:"550px",options:[{value:0,label:"停用"},{value:1,label:"启用"}]}]),_=V({pagination:{pageSize:5,pageSizes:[5,100,150,200],paginationLayout:"total, sizes, prev, pager, next"},requestConfig:{pagingBackEnd:["page","size","list"],request:q,queryParam:y.value,checkRequestSuccess:e=>e.code===200,onPageLoadSuccess:()=>{}},tableOptions:{columns:[{label:"用户头像",prop:"avatar",width:"70"},{label:"用户名称",prop:"username",width:"150px"},{label:"用户昵称",prop:"nickname",width:""},{label:"性别",prop:"sex",width:""},{label:"部门",prop:"dept",width:""},{label:"手机号",prop:"phone",width:""},{label:"状态",prop:"status",width:""},{label:"创建时间",prop:"createTime",width:""}],rowkey:"id",height:"",size:"small",border:!0,stripe:!0,serialNumber:!0,highlightCurrentRow:!0,hidePagination:!0,hideSetting:!0,lazy:!1,treeProps:{children:"children",hasChildren:"hasChildren",checkStrictly:!1},showSummary:!1,sumText:"求和",tableLayout:"auto",headerDragend:(e,a,i,o)=>{},sortChange:e=>{},load:(e,a,i)=>{setTimeout(()=>{i([{date:"2016-05-11",name:"81",state:"California",city:"Los Angeles",address:"No. 189, Grove St, Los Angeles",zip:"CA 90036"}])},1e3)},summaryMethod:e=>{const{columns:a,data:i}=e,o=[];return a.forEach((g,s)=>{if(s===0){o[s]=j("div",{},["求和"]);return}const h=i.map(n=>Number(n[g.property]));o[s]="N/A",h.every(n=>Number.isNaN(n))?o[s]="N/A":o[s]=`${h.reduce((n,f)=>{const b=Number(f);return Number.isNaN(b)?n:n+f},0)}`}),o}}}),v=d([]),w=d(null),m=d(null);const C=e=>{_.requestConfig.queryParam.dept=e.id,m.value.reloadTable()};z().then(e=>{v.value=R(e.data),_.requestConfig.queryParam.dept=e.data[0].id,P(()=>{w.value.setCurrentKey(e.data[0].id),m.value.reloadTable()})});let T=()=>{m.value.reloadTable()};return(e,a)=>{const i=t("el-tree"),o=t("el-button"),g=t("el-date-picker"),s=t("ajmerQuery"),h=t("el-header"),n=t("el-avatar"),f=t("ajmerTable"),b=t("el-main"),x=t("el-container"),L=t("ajmerLeftRight");return B(),A(L,{class:"bg-bg_color"},{left:l(()=>[r(i,{ref_key:"treeRefs",ref:w,"node-key":"id",class:"elTreeplatform",data:u(v),"default-expand-all":"","expand-on-click-node":!1,props:{children:"children",label:"name"},onNodeClick:C},null,8,["data"])]),right:l(()=>[r(x,null,{default:l(()=>[r(h,null,{default:l(()=>[r(s,{config:u(k),search:u(y)},{outBtns:l(()=>[r(o,{class:"theme-two",onClick:a[0]||(a[0]=p=>u(T)())},{default:l(()=>a[2]||(a[2]=[E(" 搜索 ")])),_:1})]),queryItems:l(()=>[N("div",Q,[a[3]||(a[3]=N("label",null,"时间范围",-1)),r(g,{modelValue:u(c),"onUpdate:modelValue":a[1]||(a[1]=p=>D(c)?c.value=p:c=p),style:{width:"350px"},type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])])]),_:1},8,["config","search"])]),_:1}),r(b,null,{default:l(()=>[r(f,{ref_key:"tableRefs",ref:m,config:u(_)},{avatar:l(p=>[r(n,{size:30,src:p.row.avatar},null,8,["src"])]),_:1},8,["config"])]),_:1})]),_:1})]),_:1})}}});export{I as default};
