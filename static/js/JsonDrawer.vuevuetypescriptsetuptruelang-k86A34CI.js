import{ao as R,ap as Z,d as Q,h as U,I as ee,Z as te,r as ne,c as re,o as oe,b as ie}from"./index-BRSvTpE-.js";var L={exports:{}},ae=L.exports,B;function ue(){return B||(B=1,function(T,k){(function(_,g){g()})(ae,function(){function _(t,n){return typeof n=="undefined"?n={autoBom:!1}:typeof n!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),n={autoBom:!n}),n.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\uFEFF",t],{type:t.type}):t}function g(t,n,d){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){s(i.response,n,d)},i.onerror=function(){console.error("could not download file")},i.send()}function b(t){var n=new XMLHttpRequest;n.open("HEAD",t,!1);try{n.send()}catch(d){}return 200<=n.status&&299>=n.status}function l(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(d){var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof R=="object"&&R.global===R?R:void 0,e=a.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype&&!e?function(t,n,d){var i=a.URL||a.webkitURL,v=document.createElement("a");n=n||t.name||"download",v.download=n,v.rel="noopener",typeof t=="string"?(v.href=t,v.origin===location.origin?l(v):b(v.href)?g(t,n,d):l(v,v.target="_blank")):(v.href=i.createObjectURL(t),setTimeout(function(){i.revokeObjectURL(v.href)},4e4),setTimeout(function(){l(v)},0))}:"msSaveOrOpenBlob"in navigator?function(t,n,d){if(n=n||t.name||"download",typeof t!="string")navigator.msSaveOrOpenBlob(_(t,d),n);else if(b(t))g(t,n,d);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout(function(){l(i)})}}:function(t,n,d,i){if(i=i||open("","_blank"),i&&(i.document.title=i.document.body.innerText="downloading..."),typeof t=="string")return g(t,n,d);var v=t.type==="application/octet-stream",m=/constructor/i.test(a.HTMLElement)||a.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||v&&m||e)&&typeof FileReader!="undefined"){var y=new FileReader;y.onloadend=function(){var x=y.result;x=h?x:x.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=x:location=x,i=null},y.readAsDataURL(t)}else{var w=a.URL||a.webkitURL,S=w.createObjectURL(t);i?i.location=S:location.href=S,i=null,setTimeout(function(){w.revokeObjectURL(S)},4e4)}});a.saveAs=s.saveAs=s,T.exports=s})}(L)),L.exports}var ce=ue(),M={exports:{}};/*!
 * clipboard.js v2.0.11
 * https://clipboardjs.com/
 *
 * Licensed MIT © Zeno Rocha
 */var se=M.exports,H;function fe(){return H||(H=1,function(T,k){(function(g,b){T.exports=b()})(se,function(){return function(){var _={686:function(l,a,e){e.d(a,{default:function(){return W}});var s=e(279),t=e.n(s),n=e(370),d=e.n(n),i=e(817),v=e.n(i);function m(f){try{return document.execCommand(f)}catch(o){return!1}}var h=function(o){var r=v()(o);return m("cut"),r},y=h;function w(f){var o=document.documentElement.getAttribute("dir")==="rtl",r=document.createElement("textarea");r.style.fontSize="12pt",r.style.border="0",r.style.padding="0",r.style.margin="0",r.style.position="absolute",r.style[o?"right":"left"]="-9999px";var u=window.pageYOffset||document.documentElement.scrollTop;return r.style.top="".concat(u,"px"),r.setAttribute("readonly",""),r.value=f,r}var S=function(o,r){var u=w(o);r.container.appendChild(u);var c=v()(u);return m("copy"),u.remove(),c},x=function(o){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},u="";return typeof o=="string"?u=S(o,r):o instanceof HTMLInputElement&&!["text","search","url","tel","password"].includes(o==null?void 0:o.type)?u=S(o.value,r):(u=v()(o),m("copy")),u},D=x;function C(f){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?C=function(r){return typeof r}:C=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},C(f)}var $=function(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=o.action,u=r===void 0?"copy":r,c=o.container,p=o.target,E=o.text;if(u!=="copy"&&u!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(p!==void 0)if(p&&C(p)==="object"&&p.nodeType===1){if(u==="copy"&&p.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(u==="cut"&&(p.hasAttribute("readonly")||p.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(E)return D(E,{container:c});if(p)return u==="cut"?y(p):D(p,{container:c})},I=$;function A(f){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?A=function(r){return typeof r}:A=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},A(f)}function J(f,o){if(!(f instanceof o))throw new TypeError("Cannot call a class as a function")}function N(f,o){for(var r=0;r<o.length;r++){var u=o[r];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(f,u.key,u)}}function q(f,o,r){return o&&N(f.prototype,o),r&&N(f,r),f}function V(f,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(o&&o.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),o&&F(f,o)}function F(f,o){return F=Object.setPrototypeOf||function(u,c){return u.__proto__=c,u},F(f,o)}function z(f){var o=G();return function(){var u=O(f),c;if(o){var p=O(this).constructor;c=Reflect.construct(u,arguments,p)}else c=u.apply(this,arguments);return X(this,c)}}function X(f,o){return o&&(A(o)==="object"||typeof o=="function")?o:Y(f)}function Y(f){if(f===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function G(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(f){return!1}}function O(f){return O=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},O(f)}function P(f,o){var r="data-clipboard-".concat(f);if(o.hasAttribute(r))return o.getAttribute(r)}var K=function(f){V(r,f);var o=z(r);function r(u,c){var p;return J(this,r),p=o.call(this),p.resolveOptions(c),p.listenClick(u),p}return q(r,[{key:"resolveOptions",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof c.action=="function"?c.action:this.defaultAction,this.target=typeof c.target=="function"?c.target:this.defaultTarget,this.text=typeof c.text=="function"?c.text:this.defaultText,this.container=A(c.container)==="object"?c.container:document.body}},{key:"listenClick",value:function(c){var p=this;this.listener=d()(c,"click",function(E){return p.onClick(E)})}},{key:"onClick",value:function(c){var p=c.delegateTarget||c.currentTarget,E=this.action(p)||"copy",j=I({action:E,container:this.container,target:this.target(p),text:this.text(p)});this.emit(j?"success":"error",{action:E,text:j,trigger:p,clearSelection:function(){p&&p.focus(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(c){return P("action",c)}},{key:"defaultTarget",value:function(c){var p=P("target",c);if(p)return document.querySelector(p)}},{key:"defaultText",value:function(c){return P("text",c)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(c){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return D(c,p)}},{key:"cut",value:function(c){return y(c)}},{key:"isSupported",value:function(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],p=typeof c=="string"?[c]:c,E=!!document.queryCommandSupported;return p.forEach(function(j){E=E&&!!document.queryCommandSupported(j)}),E}}]),r}(t()),W=K},828:function(l){var a=9;if(typeof Element!="undefined"&&!Element.prototype.matches){var e=Element.prototype;e.matches=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector}function s(t,n){for(;t&&t.nodeType!==a;){if(typeof t.matches=="function"&&t.matches(n))return t;t=t.parentNode}}l.exports=s},438:function(l,a,e){var s=e(828);function t(i,v,m,h,y){var w=d.apply(this,arguments);return i.addEventListener(m,w,y),{destroy:function(){i.removeEventListener(m,w,y)}}}function n(i,v,m,h,y){return typeof i.addEventListener=="function"?t.apply(null,arguments):typeof m=="function"?t.bind(null,document).apply(null,arguments):(typeof i=="string"&&(i=document.querySelectorAll(i)),Array.prototype.map.call(i,function(w){return t(w,v,m,h,y)}))}function d(i,v,m,h){return function(y){y.delegateTarget=s(y.target,v),y.delegateTarget&&h.call(i,y)}}l.exports=n},879:function(l,a){a.node=function(e){return e!==void 0&&e instanceof HTMLElement&&e.nodeType===1},a.nodeList=function(e){var s=Object.prototype.toString.call(e);return e!==void 0&&(s==="[object NodeList]"||s==="[object HTMLCollection]")&&"length"in e&&(e.length===0||a.node(e[0]))},a.string=function(e){return typeof e=="string"||e instanceof String},a.fn=function(e){var s=Object.prototype.toString.call(e);return s==="[object Function]"}},370:function(l,a,e){var s=e(879),t=e(438);function n(m,h,y){if(!m&&!h&&!y)throw new Error("Missing required arguments");if(!s.string(h))throw new TypeError("Second argument must be a String");if(!s.fn(y))throw new TypeError("Third argument must be a Function");if(s.node(m))return d(m,h,y);if(s.nodeList(m))return i(m,h,y);if(s.string(m))return v(m,h,y);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function d(m,h,y){return m.addEventListener(h,y),{destroy:function(){m.removeEventListener(h,y)}}}function i(m,h,y){return Array.prototype.forEach.call(m,function(w){w.addEventListener(h,y)}),{destroy:function(){Array.prototype.forEach.call(m,function(w){w.removeEventListener(h,y)})}}}function v(m,h,y){return t(document.body,m,h,y)}l.exports=n},817:function(l){function a(e){var s;if(e.nodeName==="SELECT")e.focus(),s=e.value;else if(e.nodeName==="INPUT"||e.nodeName==="TEXTAREA"){var t=e.hasAttribute("readonly");t||e.setAttribute("readonly",""),e.select(),e.setSelectionRange(0,e.value.length),t||e.removeAttribute("readonly"),s=e.value}else{e.hasAttribute("contenteditable")&&e.focus();var n=window.getSelection(),d=document.createRange();d.selectNodeContents(e),n.removeAllRanges(),n.addRange(d),s=n.toString()}return s}l.exports=a},279:function(l){function a(){}a.prototype={on:function(e,s,t){var n=this.e||(this.e={});return(n[e]||(n[e]=[])).push({fn:s,ctx:t}),this},once:function(e,s,t){var n=this;function d(){n.off(e,d),s.apply(t,arguments)}return d._=s,this.on(e,d,t)},emit:function(e){var s=[].slice.call(arguments,1),t=((this.e||(this.e={}))[e]||[]).slice(),n=0,d=t.length;for(n;n<d;n++)t[n].fn.apply(t[n].ctx,s);return this},off:function(e,s){var t=this.e||(this.e={}),n=t[e],d=[];if(n&&s)for(var i=0,v=n.length;i<v;i++)n[i].fn!==s&&n[i].fn._!==s&&d.push(n[i]);return d.length?t[e]=d:delete t[e],this}},l.exports=a,l.exports.TinyEmitter=a}},g={};function b(l){if(g[l])return g[l].exports;var a=g[l]={exports:{}};return _[l](a,a.exports,b),a.exports}return function(){b.n=function(l){var a=l&&l.__esModule?function(){return l.default}:function(){return l};return b.d(a,{a}),a}}(),function(){b.d=function(l,a){for(var e in a)b.o(a,e)&&!b.o(l,e)&&Object.defineProperty(l,e,{enumerable:!0,get:a[e]})}}(),function(){b.o=function(l,a){return Object.prototype.hasOwnProperty.call(l,a)}}(),b(686)}().default})}(M)),M.exports}var le=fe();const de=Z(le),ve=Q({__name:"JsonDrawer",props:{formData:{type:Object,default:()=>({})}},setup(T,{expose:k}){let _=U(null);const g=T;let b=()=>{_.value.format().then(()=>{$ajmerMessage("代码格式化成功",{type:"success"})}).catch(n=>{$ajmerMessage(n.message,{type:"error"})})},l=()=>new Promise((n,d)=>{_.value.format().then(()=>{n({code:200,message:"格式化成功"})}).catch(i=>{d({code:400,message:i.message})})}),a=()=>{_.value.updatePrice("",!0),$ajmerMessage("清空成功",{type:"success"})},e=()=>{const n=new Blob([g.formData.code],{type:"text/plain;charset=utf-8"});ce.saveAs(n,`${+new Date}.json`)},s=()=>{document.getElementById("copyJson").click()},t=U();return ee(()=>{t.value=new de("#copyJson",{text:()=>{if(g.formData.code)return $ajmerMessage("代码已复制到剪切板，可粘贴。",{type:"success"}),g.formData.code}}),t.value.on("error",n=>{$ajmerMessage("代码为空，无法复制",{type:"error"})})}),te(()=>{t.value&&t.value.destroy()}),k({clear:a,format:b,exportJson:e,copyJson:s,refreshJson:l}),(n,d)=>{const i=ne("AjmerCode");return oe(),re("div",null,[ie(i,{ref_key:"reCodeRefs",ref:_,modelValue:g.formData.code,"onUpdate:modelValue":d[0]||(d[0]=v=>g.formData.code=v)},null,8,["modelValue"])])}}});export{de as C,ce as F,ve as _};
