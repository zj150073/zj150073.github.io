var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,a=(t,o,s)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[o]=s,r=(e,t)=>{for(var o in t||(t={}))i.call(t,o)&&a(e,o,t[o]);if(s)for(var o of s(t))n.call(t,o)&&a(e,o,t[o]);return e},l=(e,s)=>t(e,o(s));import{L as p,S as c,B as d,M as u}from"./@logicflow-DLieDi3r.js";import{d as m,r as y,J as f,D as g,c as x,a as v,F as w,g as b,P as j,o as h,h as _,i as k,q as F,j as P,l as z,p as T,f as q,B as D,a1 as E,E as L,s as O,aC as A,aD as G}from"./@vue-CFXrvzpc.js";import{_ as M}from"./index-B2iGRBN9.js";import{S as C}from"./vue-json-pretty-DAWMADQc.js";import{M as I}from"./@pureadmin-f9nW_l6N.js";import"./@amap-Bx2D3lnM.js";import"./preact-CO_KVIKf.js";import"./lodash-es-BgzC0s9P.js";import"./vite-plugin-fake-server-CytHVkXj.js";import"./@faker-js-CRy60TLX.js";import"./version-rocket-chvOQqaV.js";import"./@iconify-icons-CxRB8ffa.js";import"./@vueuse-tP1Y4vdd.js";import"./defu-iUM7Auia.js";import"./framesync-CUhBu5sQ.js";import"./style-value-types-UCYNu-x1.js";import"./popmotion-DRTv1-mp.js";import"./hey-listen-DkH12NBk.js";import"./element-plus-DsFyl0Kk.js";import"./@element-plus-Bqpau_gV.js";import"./@popperjs-D3lHDW-0.js";import"./@ctrl-D2oWfImC.js";import"./dayjs-BWHVJBZs.js";import"./async-validator-Cuo4gI4y.js";import"./memoize-one-Ds0C_khL.js";import"./normalize-wheel-es-Vn5vHDCm.js";import"./@floating-ui-kghe82LF.js";import"./plus-pro-components-CYEVFP0q.js";import"./sortablejs-DhhifNSC.js";import"./axios-B1L2Kzed.js";import"./vue-i18n-DB-7wkrF.js";import"./@intlify-DfwD9yJy.js";import"./js-cookie-BXEMiIsG.js";import"./pinia-DzAV29mk.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-CGx-uoKe.js";import"./axs-request-CnYniYE7.js";import"./nprogress-L6f6pfEY.js";import"./echarts-D2b6xzX-.js";import"./zrender-CUz1GrA9.js";import"./tslib-ZseNXxlj.js";import"./vxe-table-CPtn8uUL.js";import"./xe-utils-CdBoVBzI.js";import"./dom-zindex-Ckn4mXSH.js";import"./responsive-storage-5vfjqqcs.js";import"./vue-DWYrQbHy.js";import"./@iconify-BUzAfhQo.js";/* empty css                 */import"./vue-tippy-DPYCMIfw.js";const S={flowElementList:[{incoming:[],outgoing:["Flow_33inf2k"],dockers:[],type:2,properties:{a:"efrwe",b:"wewe",name:"开始",x:280,y:200,text:{x:280,y:200,value:"开始"},logicFlowType:"bpmn:startEvent"},key:"Event_1d42u4p"},{incoming:["Flow_379e0o9"],outgoing:[],dockers:[],type:3,properties:{a:"efrwe",b:"wewe",name:"结束",x:920,y:200,text:{x:920,y:200,value:"结束"},logicFlowType:"bpmn:endEvent"},key:"Event_08p8i6q"},{incoming:["Flow_0pfouf0"],outgoing:["Flow_3918lhh"],dockers:[],type:6,properties:{a:"efrwe",b:"wewe",name:"网关",x:580,y:200,text:{x:580,y:200,value:"网关"},logicFlowType:"bpmn:exclusiveGateway"},key:"Gateway_1fngqgj"},{incoming:["Flow_33inf2k"],outgoing:["Flow_0pfouf0"],dockers:[],type:4,properties:{a:"efrwe",b:"wewe",name:"用户",x:420,y:200,text:{x:420,y:200,value:"用户"},logicFlowType:"bpmn:userTask"},key:"Activity_2mgtaia"},{incoming:["Flow_3918lhh"],outgoing:["Flow_379e0o9"],dockers:[],type:5,properties:{a:"efrwe",b:"wewe",name:"服务",x:760,y:200,text:{x:760,y:200,value:"服务"},logicFlowType:"bpmn:serviceTask"},key:"Activity_1sp8qc8"},{incoming:["Event_1d42u4p"],outgoing:["Activity_2mgtaia"],type:1,dockers:[],properties:{name:"边",text:{x:331,y:200,value:"边"},startPoint:{x:298,y:200},endPoint:{x:370,y:200},pointsList:[{x:298,y:200},{x:370,y:200}],logicFlowType:"bpmn:sequenceFlow"},key:"Flow_33inf2k"},{incoming:["Activity_2mgtaia"],outgoing:["Gateway_1fngqgj"],type:1,dockers:[],properties:{name:"边2",text:{x:507,y:200,value:"边2"},startPoint:{x:470,y:200},endPoint:{x:555,y:200},pointsList:[{x:470,y:200},{x:555,y:200}],logicFlowType:"bpmn:sequenceFlow"},key:"Flow_0pfouf0"},{incoming:["Gateway_1fngqgj"],outgoing:["Activity_1sp8qc8"],type:1,dockers:[],properties:{name:"边3",text:{x:664,y:200,value:"边3"},startPoint:{x:605,y:200},endPoint:{x:710,y:200},pointsList:[{x:605,y:200},{x:710,y:200}],logicFlowType:"bpmn:sequenceFlow"},key:"Flow_3918lhh"},{incoming:["Activity_1sp8qc8"],outgoing:["Event_08p8i6q"],type:1,dockers:[],properties:{name:"边4",text:{x:871,y:200,value:"边4"},startPoint:{x:810,y:200},endPoint:{x:902,y:200},pointsList:[{x:810,y:200},{x:902,y:200}],logicFlowType:"bpmn:sequenceFlow"},key:"Flow_379e0o9"}]},B=[{type:"bpmn:startEvent",text:"开始",class:"bpmn-start"},{type:"bpmn:endEvent",text:"结束",class:"bpmn-end"},{type:"bpmn:exclusiveGateway",text:"网关",class:"bpmn-exclusiveGateway"},{type:"bpmn:userTask",text:"用户",class:"bpmn-user"}],N={class:"control-container"},V=["title","onMouseenter"],J=["disabled","onClick"],$=M(m({__name:"Control",props:{lf:{default:null},catTurboData:{type:Boolean}},emits:["catData"],setup(e,{emit:t}){const o=e,s=t,i=y(),n=y(),a=y(-1),r=y([{icon:"icon-zoom-out-hs",text:"缩小",size:"18",disabled:!1},{icon:"icon-enlarge-hs",text:"放大",size:"18",disabled:!1},{icon:"icon-full-screen-hs",text:"适应",size:"15",disabled:!1},{icon:"icon-previous-hs",text:"上一步",size:"15",disabled:!0},{icon:"icon-next-step-hs",text:"下一步",size:"17",disabled:!0},{icon:"icon-download-hs",text:"下载图片",size:"17",disabled:!1},{icon:"icon-watch-hs",text:"查看数据",size:"17",disabled:!1}]);return f((()=>{o.lf.on("history:change",(({data:{undoAble:e,redoAble:t}})=>{g(r)[3].disabled=g(i).disabled=!e,g(r)[4].disabled=g(n).disabled=!t}))})),(e,t)=>{const i=j("tippy");return h(),x("div",N,[v("ul",null,[(h(!0),x(w,null,b(r.value,((e,n)=>(h(),x("li",{key:n,title:e.text,class:"dark:text-bg_color",onMouseenter:_((e=>(e=>{a.value=e})(n)),["prevent"]),onMouseleave:t[0]||(t[0]=_((e=>a.value=-1),["prevent"]))},[k((h(),x("button",{ref_for:!0,ref:"controlButton"+n,disabled:e.disabled,style:F({cursor:!1===e.disabled?"pointer":"not-allowed",color:!1===e.disabled?"":"#00000040",background:"transparent"}),onClick:e=>((e,t)=>{["zoom","zoom","resetZoom","undo","redo","getSnapshot"].forEach(((e,i)=>{const n=o.lf;1===t&&n.zoom(!0),6===t&&s("catData"),t===i&&n[e]()}))})(0,n)},[v("span",{class:P("iconfont "+e.icon),style:F({fontSize:`${e.size}px`})},null,6)],12,J)),[[i,{content:e.text}]])],40,V)))),128))])])}}}),[["__scopeId","data-v-f166168f"]]),H={class:"node-panel"},K=["onMousedown"],U={key:0,class:"shape"},Y={class:"node-label"},Z=M(m({__name:"NodePanel",props:{lf:{default:null},nodeList:{default:null}},setup(e){const t=e,o=y({a:"efrwe",b:"wewe"});return(e,s)=>(h(),x("div",H,[(h(!0),x(w,null,b(e.nodeList,(e=>(h(),x("div",{key:e.text,class:"node-item dark:text-bg_color",onMousedown:s=>(e=>{t.lf.dnd.startDrag({type:e.type,properties:g(o)})})(e)},[v("div",{class:P(["node-item-icon",e.class])},["user"===e.type||"time"===e.type?(h(),x("div",U)):z("",!0)],2),v("span",Y,T(e.text),1)],40,K)))),128))]))}}),[["__scopeId","data-v-b709e35e"]]),Q=m({__name:"DataDialog",props:{graphData:Object},setup:e=>(t,o)=>(h(),q(g(C),{path:"res",deep:3,showLength:!0,data:e.graphData},null,8,["data"]))}),R=I($),W=I(Z),X=I(Q),ee=1;function te(e){const t={nodes:[],edges:[]},o=e.flowElementList;return o&&o.length>0&&o.forEach((e=>{if(e.type===ee){const o=function(e){const{incoming:t,outgoing:o,properties:s,key:i}=e,{text:n,startPoint:a,endPoint:r,pointsList:l,logicFlowType:p}=s,c={id:i,type:p,sourceNodeId:t[0],targetNodeId:o[0],text:n,startPoint:a,endPoint:r,pointsList:l,properties:{}},d=["startPoint","endPoint","pointsList","text","logicFlowType"];return Object.keys(e.properties).forEach((t=>{-1===d.indexOf(t)&&(c.properties[t]=e.properties[t])})),c}(e);t.edges.push(o)}else{const o=function(e){const{properties:t,key:o}=e,{x:s,y:i,text:n,logicFlowType:a}=t,r={id:o,type:a,x:s,y:i,text:n,properties:{}},l=["x","y","text","logicFlowType"];return Object.keys(e.properties).forEach((t=>{-1===l.indexOf(t)&&(r.properties[t]=e.properties[t])})),r}(e);t.nodes.push(o)}})),t}const oe={class:"card-header"},se={class:"font-medium"},ie={class:"logic-flow-view"},ne=(e=>(A("data-v-cc282f2a"),e=e(),G(),e))((()=>v("div",{id:"turbo"},null,-1))),ae=M(m(l(r({},{name:"FlowChart"}),{__name:"index",setup(e){const t=y(null),o=y(null),s=y(!1),i=y({grid:!0,background:{color:"#f7f9ff"},keyboard:{enabled:!0}}),n=B;function a(){p.use(c),p.use(d),p.use(u);const e=new p(l(r({},g(i)),{container:document.querySelector("#turbo")}));t.value=e,g(t).setDefaultEdgeType("bpmn:sequenceFlow"),function(){const e=te(S);t.value.render(e)}()}function m(){o.value=g(t).getGraphData(),s.value=!0}return f((()=>{a()})),(e,i)=>{const a=E("el-link"),r=E("el-scrollbar"),l=E("el-dialog"),p=E("el-card");return h(),q(p,{shadow:"never"},{header:D((()=>[v("div",oe,[v("span",se,[L(" 流程图组件，采用开源的 "),O(a,{href:"https://site.logic-flow.cn/docs/#/zh/guide/start",target:"_blank",style:{margin:"0 4px 5px","font-size":"16px"}},{default:D((()=>[L(" LogicFlow ")])),_:1})])]),O(a,{class:"mt-2",href:"https://github.com/pure-admin/vue-pure-admin/blob/main/src/views/flow-chart",target:"_blank"},{default:D((()=>[L(" 代码位置 src/views/flow-chart ")])),_:1})])),default:D((()=>[v("div",ie,[t.value?(h(),q(g(R),{key:0,class:"demo-control",lf:t.value,catTurboData:!1,onCatData:m},null,8,["lf"])):z("",!0),t.value?(h(),q(g(W),{key:1,lf:t.value,nodeList:g(n)},null,8,["lf","nodeList"])):z("",!0),ne,O(l,{modelValue:s.value,"onUpdate:modelValue":i[0]||(i[0]=e=>s.value=e),class:"flow-dialog",title:"数据",width:"50%"},{default:D((()=>[O(r,null,{default:D((()=>[O(g(X),{graphData:o.value},null,8,["graphData"])])),_:1})])),_:1},8,["modelValue"])])])),_:1})}}})),[["__scopeId","data-v-cc282f2a"]]);export{ae as default};
