import{C as e,Z as a,m as l}from"./index-DK9WUj9J.js";import{b as t}from"./data-7xVGzIsj.js";function r(r,o,u){const n=Vue.ref(t),i=e(n.value),s=Vue.ref([1,3,4]),c=Vue.reactive({sexValue:"",searchDate:""}),v=[{value:0,label:"男"},{value:1,label:"女"}],p=Vue.reactive({pageSize:5,currentPage:1,layout:"prev, pager, next",total:n.value.length,background:!0,small:!0}),h=()=>{const{clearSelection:e}=u.value.getTableRef();e()};return Vue.watch(s,(()=>{return e=this,a=null,l=function*(){yield Vue.nextTick();const{toggleRowSelection:e}=u.value.getTableRef();s.value.forEach((a=>{n.value.forEach((l=>{l.id===a&&e(l)}))}))},new Promise(((t,r)=>{var o=e=>{try{n(l.next(e))}catch(a){r(a)}},u=e=>{try{n(l.throw(e))}catch(a){r(a)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,u);n((l=l.apply(e,a)).next())}));var e,a,l}),{immediate:!0}),{searchForm:c,sexOptions:v,columns:[{type:"selection",reserveSelection:!0,align:"left"},{label:"ID",prop:"id",width:50},{label:"姓名",prop:"name"},{label:"性别",prop:"sex"},{label:"地址",prop:"address"},{label:"日期",prop:"date",minWidth:120}],pagination:p,selectValue:s,tableData:n,onSure:()=>{r.value.blur(),l(`当前选中的数据为：${JSON.stringify(s.value)}`,{type:"success"})},onClear:h,onReset:()=>{o.value.resetFields(),h(),n.value=i,p.total=n.value.length},onSearch:()=>{if(n.value=i,!a(c.sexValue)){let e=v.map((e=>e.value===Number(c.sexValue)&&e.label)).filter(Boolean)[0];n.value=n.value.filter((a=>a.sex===e))}a(c.searchDate)||(n.value=n.value.filter((e=>e.date===c.searchDate))),p.total=n.value.length},removeTag:({id:e})=>{var a;const{toggleRowSelection:l}=u.value.getTableRef();l(null==(a=n.value.filter((a=>a.id==e)))?void 0:a[0],!1)},handleSelectionChange:e=>{const a=[];e.forEach((e=>{a.push({label:e.name,id:e.id})})),s.value=a}}}export{r as useColumns};
