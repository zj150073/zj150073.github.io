var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,l=(e,t)=>{for(var a in t||(t={}))s.call(t,a)&&i(e,a,t[a]);if(r)for(var a of r(t))o.call(t,a)&&i(e,a,t[a]);return e},n=(e,r)=>t(e,a(r));import{d as p,r as u,J as m,c,a as v,s as j,B as d,D as f,i as g,v as y,F as h,l as b,a1 as x,P as w,o as z,E as _,g as P,f as k,n as O}from"./@vue-CFXrvzpc.js";import{i as S,m as C}from"./index-B2iGRBN9.js";import L from"./ListCard-CUiDDQUT.js";import{_ as D}from"./ListDialogForm.vue_vue_type_script_setup_true_lang-B0wvPYrO.js";import{u as I}from"./hooks-DEksGQ11.js";import{ah as V}from"./@iconify-icons-CxRB8ffa.js";import{aY as q}from"./element-plus-DsFyl0Kk.js";import"./vite-plugin-fake-server-CytHVkXj.js";import"./@faker-js-CRy60TLX.js";import"./version-rocket-chvOQqaV.js";import"./@pureadmin-f9nW_l6N.js";import"./vue-DWYrQbHy.js";import"./@vueuse-tP1Y4vdd.js";import"./defu-iUM7Auia.js";import"./framesync-CUhBu5sQ.js";import"./style-value-types-UCYNu-x1.js";import"./popmotion-DRTv1-mp.js";import"./hey-listen-DkH12NBk.js";import"./plus-pro-components-CYEVFP0q.js";import"./sortablejs-DhhifNSC.js";import"./@element-plus-Bqpau_gV.js";import"./lodash-es-BgzC0s9P.js";import"./axios-B1L2Kzed.js";import"./vue-i18n-DB-7wkrF.js";import"./@intlify-DfwD9yJy.js";import"./js-cookie-BXEMiIsG.js";import"./pinia-DzAV29mk.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-CGx-uoKe.js";import"./axs-request-CnYniYE7.js";import"./@amap-Bx2D3lnM.js";import"./nprogress-L6f6pfEY.js";import"./echarts-D2b6xzX-.js";import"./zrender-CUz1GrA9.js";import"./tslib-ZseNXxlj.js";import"./vxe-table-CPtn8uUL.js";import"./xe-utils-CdBoVBzI.js";import"./dom-zindex-Ckn4mXSH.js";import"./responsive-storage-5vfjqqcs.js";import"./@iconify-BUzAfhQo.js";/* empty css                 */import"./vue-tippy-DPYCMIfw.js";import"./@popperjs-D3lHDW-0.js";import"./@ctrl-D2oWfImC.js";import"./dayjs-BWHVJBZs.js";import"./async-validator-Cuo4gI4y.js";import"./memoize-one-Ds0C_khL.js";import"./normalize-wheel-es-Vn5vHDCm.js";import"./@floating-ui-kghe82LF.js";const M={class:"w-full flex justify-between mb-4"},U=p(n(l({},{name:"CardList"}),{__name:"index",setup(e){const t=u({current:1,pageSize:12,total:0}),a=u([]),r=u(!0),s=()=>{return e=this,s=null,o=function*(){try{const{data:e}=yield(e=>S({method:"post",url:"/get-card-list",data:e},{token:"",apiPrefix:""}))();a.value=e.list,t.value=n(l({},t.value),{total:e.list.length})}catch(e){}finally{setTimeout((()=>{r.value=!1}),500)}},new Promise(((t,a)=>{var r=e=>{try{l(o.next(e))}catch(t){a(t)}},i=e=>{try{l(o.throw(e))}catch(t){a(t)}},l=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,i);l((o=o.apply(e,s)).next())}));var e,s,o};m((()=>{s()}));const o=u(!1),i=u(l({},{name:"",status:"",description:"",type:"",mark:""})),p=u(""),U=e=>{t.value.pageSize=e,t.value.current=1},$=e=>{t.value.current=e},A=e=>{q.confirm(e?`确认删除后${e.name}的所有产品信息将被清空, 且无法恢复`:"","提示",{type:"warning"}).then((()=>{C("删除成功",{type:"success"})})).catch((()=>{}))},E=e=>{o.value=!0,O((()=>{i.value=n(l({},e),{status:(null==e?void 0:e.isSetup)?"1":"0"})}))};return(e,s)=>{const l=x("el-button"),n=x("IconifyIconOffline"),u=x("el-icon"),m=x("el-input"),O=x("el-empty"),S=x("el-col"),C=x("el-row"),q=x("el-pagination"),F=w("loading");return z(),c("div",null,[v("div",M,[j(l,{icon:f(I)(f(V)),onClick:s[0]||(s[0]=e=>o.value=!0)},{default:d((()=>[_(" 新建产品 ")])),_:1},8,["icon"]),j(m,{modelValue:p.value,"onUpdate:modelValue":s[1]||(s[1]=e=>p.value=e),style:{width:"300px"},placeholder:"请输入产品名称",clearable:""},{suffix:d((()=>[j(u,{class:"el-input__icon"},{default:d((()=>[g(j(n,{icon:"ri:search-line"},null,512),[[y,0===p.value.length]])])),_:1})])),_:1},8,["modelValue"])]),g((z(),c("div",{"element-loading-svg":'\n        <path class="path" d="\n          M 30 15\n          L 28 17\n          M 25.61 25.61\n          A 15 15, 0, 0, 1, 15 30\n          A 15 15, 0, 1, 1, 27.99 7.5\n          L 15 15\n        " style="stroke-width: 4px; fill: rgba(0, 0, 0, 0)"/>\n      ',"element-loading-svg-view-box":"-10, -10, 50, 50"},[g(j(O,{description:`${p.value} 产品不存在`},null,8,["description"]),[[y,0===a.value.slice(t.value.pageSize*(t.value.current-1),t.value.pageSize*t.value.current).filter((e=>e.name.toLowerCase().includes(p.value.toLowerCase()))).length]]),t.value.total>0?(z(),c(h,{key:0},[j(C,{gutter:16},{default:d((()=>[(z(!0),c(h,null,P(a.value.slice(t.value.pageSize*(t.value.current-1),t.value.pageSize*t.value.current).filter((e=>e.name.toLowerCase().includes(p.value.toLowerCase()))),((e,t)=>(z(),k(S,{key:t,xs:24,sm:12,md:8,lg:6,xl:4},{default:d((()=>[j(L,{product:e,onDeleteItem:A,onManageProduct:E},null,8,["product"])])),_:2},1024)))),128))])),_:1}),j(q,{currentPage:t.value.current,"onUpdate:currentPage":s[2]||(s[2]=e=>t.value.current=e),class:"float-right","page-size":t.value.pageSize,total:t.value.total,"page-sizes":[12,24,36],background:!0,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:U,onCurrentChange:$},null,8,["currentPage","page-size","total"])],64)):b("",!0)])),[[F,r.value]]),j(D,{visible:o.value,"onUpdate:visible":s[3]||(s[3]=e=>o.value=e),data:i.value},null,8,["visible","data"])])}}}));export{U as default};
