import{_ as e}from"./form.vue_vue_type_script_setup_true_lang-BbKNP50p.js";import{t as l,Z as n,aI as t,l as o,C as i,f as r,m as a}from"./index-DK9WUj9J.js";import{f as u}from"./system-CZHEA98f.js";import{u as s}from"./hooks-D3PhPGWW.js";import"./index-C3WTS9yW.js";import"./index-Cal8pD8i.js";import"./index-Br4_uCXc.js";function d(){const d=Vue.reactive({title:""}),p=Vue.ref(),c=Vue.ref([]),f=Vue.ref(!0),v=(e,l=!1)=>{switch(e){case 0:return l?"菜单":"primary";case 1:return l?"iframe":"warning";case 2:return l?"外链":"danger";case 3:return l?"按钮":"info"}},m=[{label:"菜单名称",prop:"title",align:"left",cellRenderer:({row:e})=>Vue.createVNode(Vue.Fragment,null,[Vue.createVNode("span",{class:"inline-block mr-1"},[Vue.h(s(e.icon),{style:{paddingTop:"1px"}})]),Vue.createVNode("span",null,[l(e.title)])])},{label:"菜单类型",prop:"menuType",width:100,cellRenderer:({row:e,props:l})=>{let n;return Vue.createVNode(Vue.resolveComponent("el-tag"),{size:l.size,type:v(e.menuType),effect:"plain"},"function"==typeof(t=n=v(e.menuType,!0))||"[object Object]"===Object.prototype.toString.call(t)&&!Vue.isVNode(t)?n:{default:()=>[n]});var t}},{label:"路由路径",prop:"path"},{label:"组件路径",prop:"component",formatter:({path:e,component:l})=>n(l)?e:l},{label:"权限标识",prop:"auths"},{label:"排序",prop:"rank",width:100},{label:"隐藏",prop:"showLink",formatter:({showLink:e})=>e?"否":"是",width:100},{label:"操作",fixed:"right",width:210,slot:"operation"}];function h(){return e=this,o=null,i=function*(){f.value=!0;const{data:e}=yield u();let o=e;n(d.title)||(o=o.filter((e=>l(e.title).includes(d.title)))),c.value=t(o),setTimeout((()=>{f.value=!1}),500)},new Promise(((l,n)=>{var t=e=>{try{a(i.next(e))}catch(l){n(l)}},r=e=>{try{a(i.throw(e))}catch(l){n(l)}},a=e=>e.done?l(e.value):Promise.resolve(e.value).then(t,r);a((i=i.apply(e,o)).next())}));var e,o,i}function g(e){if(!e||!e.length)return;const n=[];for(let t=0;t<e.length;t++)e[t].title=l(e[t].title),g(e[t].children),n.push(e[t]);return n}return Vue.onMounted((()=>{h()})),{form:d,loading:f,columns:m,dataList:c,onSearch:h,resetForm:function(e){e&&(e.resetFields(),h())},openDialog:function(n="新增",t){var u,s,d,f,v,m,V,y,w,T,b,x,k,j,I,L,_,P,S,N,C;o({title:`${n}菜单`,props:{formInline:{menuType:null!=(u=null==t?void 0:t.menuType)?u:0,higherMenuOptions:g(i(c.value)),parentId:null!=(s=null==t?void 0:t.parentId)?s:0,title:null!=(d=null==t?void 0:t.title)?d:"",name:null!=(f=null==t?void 0:t.name)?f:"",path:null!=(v=null==t?void 0:t.path)?v:"",component:null!=(m=null==t?void 0:t.component)?m:"",rank:null!=(V=null==t?void 0:t.rank)?V:99,redirect:null!=(y=null==t?void 0:t.redirect)?y:"",icon:null!=(w=null==t?void 0:t.icon)?w:"",extraIcon:null!=(T=null==t?void 0:t.extraIcon)?T:"",enterTransition:null!=(b=null==t?void 0:t.enterTransition)?b:"",leaveTransition:null!=(x=null==t?void 0:t.leaveTransition)?x:"",activePath:null!=(k=null==t?void 0:t.activePath)?k:"",auths:null!=(j=null==t?void 0:t.auths)?j:"",frameSrc:null!=(I=null==t?void 0:t.frameSrc)?I:"",frameLoading:null==(L=null==t?void 0:t.frameLoading)||L,keepAlive:null!=(_=null==t?void 0:t.keepAlive)&&_,hiddenTag:null!=(P=null==t?void 0:t.hiddenTag)&&P,fixedTag:null!=(S=null==t?void 0:t.fixedTag)&&S,showLink:null==(N=null==t?void 0:t.showLink)||N,showParent:null!=(C=null==t?void 0:t.showParent)&&C}},width:"45%",draggable:!0,fullscreen:r(),fullscreenIcon:!0,closeOnClickModal:!1,contentRenderer:()=>Vue.h(e,{ref:p}),beforeSure:(e,{options:t})=>{const o=p.value.getRef(),i=t.props.formInline;function r(){a(`您${n}了菜单名称为${l(i.title)}的这条数据`,{type:"success"}),e(),h()}o.validate((e=>{e&&r()}))}})},handleDelete:function(e){a(`您删除了菜单名称为${l(e.title)}的这条数据`,{type:"success"}),h()},handleSelectionChange:function(e){}}}export{d as useMenu};
