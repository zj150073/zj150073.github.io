var e=Object.defineProperty,a=Object.defineProperties,n=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,r=(a,n,o)=>n in a?e(a,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[n]=o,s=(e,a)=>{for(var n in a||(a={}))i.call(a,n)&&r(e,n,a[n]);if(o)for(var n of o(a))t.call(a,n)&&r(e,n,a[n]);return e},p=(e,o)=>a(e,n(o));import{c as l,V as A,d as c,Z as d,r as u,$ as g,a0 as f,o as M,B as w,k as v,A as h,f as U,_ as I,Y as m,b as y,u as L}from"./index-CKXHolY4.js";import{m as k}from"./mock-CRIhzlfN.js";var x={exports:{}};const b=A(x.exports=function(){function e(e){var o=[];return e.AMapUI&&o.push(a(e.AMapUI)),e.Loca&&o.push(n(e.Loca)),Promise.all(o)}function a(e){return new Promise((function(a,n){var i=[];if(e.plugins)for(var p=0;p<e.plugins.length;p+=1)-1==t.AMapUI.plugins.indexOf(e.plugins[p])&&i.push(e.plugins[p]);if(r.AMapUI===o.failed)n("前次请求 AMapUI 失败");else if(r.AMapUI===o.notload){r.AMapUI=o.loading,t.AMapUI.version=e.version||t.AMapUI.version,p=t.AMapUI.version;var l=document.body||document.head,A=document.createElement("script");A.type="text/javascript",A.src="https://webapi.amap.com/ui/"+p+"/main.js",A.onerror=function(e){r.AMapUI=o.failed,n("请求 AMapUI 失败")},A.onload=function(){if(r.AMapUI=o.loaded,i.length)window.AMapUI.loadUI(i,(function(){for(var e=0,n=i.length;e<n;e++){var o=i[e].split("/").slice(-1)[0];window.AMapUI[o]=arguments[e]}for(a();s.AMapUI.length;)s.AMapUI.splice(0,1)[0]()}));else for(a();s.AMapUI.length;)s.AMapUI.splice(0,1)[0]()},l.appendChild(A)}else r.AMapUI===o.loaded?e.version&&e.version!==t.AMapUI.version?n("不允许多个版本 AMapUI 混用"):i.length?window.AMapUI.loadUI(i,(function(){for(var e=0,n=i.length;e<n;e++){var o=i[e].split("/").slice(-1)[0];window.AMapUI[o]=arguments[e]}a()})):a():e.version&&e.version!==t.AMapUI.version?n("不允许多个版本 AMapUI 混用"):s.AMapUI.push((function(e){e?n(e):i.length?window.AMapUI.loadUI(i,(function(){for(var e=0,n=i.length;e<n;e++){var o=i[e].split("/").slice(-1)[0];window.AMapUI[o]=arguments[e]}a()})):a()}))}))}function n(e){return new Promise((function(a,n){if(r.Loca===o.failed)n("前次请求 Loca 失败");else if(r.Loca===o.notload){r.Loca=o.loading,t.Loca.version=e.version||t.Loca.version;var i=t.Loca.version,p=t.AMap.version.startsWith("2"),l=i.startsWith("2");if(p&&!l||!p&&l)n("JSAPI 与 Loca 版本不对应！！");else{p=t.key,l=document.body||document.head;var A=document.createElement("script");A.type="text/javascript",A.src="https://webapi.amap.com/loca?v="+i+"&key="+p,A.onerror=function(e){r.Loca=o.failed,n("请求 AMapUI 失败")},A.onload=function(){for(r.Loca=o.loaded,a();s.Loca.length;)s.Loca.splice(0,1)[0]()},l.appendChild(A)}}else r.Loca===o.loaded?e.version&&e.version!==t.Loca.version?n("不允许多个版本 Loca 混用"):a():e.version&&e.version!==t.Loca.version?n("不允许多个版本 Loca 混用"):s.Loca.push((function(e){e?n(e):n()}))}))}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var o,i;(i=o||(o={})).notload="notload",i.loading="loading",i.loaded="loaded",i.failed="failed";var t={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},r={AMap:o.notload,AMapUI:o.notload,Loca:o.notload},s={AMap:[],AMapUI:[],Loca:[]},p=[],l=function(e){"function"==typeof e&&(r.AMap===o.loaded?e(window.AMap):p.push(e))};return{load:function(a){return new Promise((function(n,i){if(r.AMap==o.failed)i("");else if(r.AMap==o.notload){var s=a.key,A=a.version,c=a.plugins;s?(window.AMap&&"lbs.amap.com"!==location.host&&i("禁止多种API加载方式混用"),t.key=s,t.AMap.version=A||t.AMap.version,t.AMap.plugins=c||t.AMap.plugins,r.AMap=o.loading,A=document.body||document.head,window.___onAPILoaded=function(t){if(delete window.___onAPILoaded,t)r.AMap=o.failed,i(t);else for(r.AMap=o.loaded,e(a).then((function(){n(window.AMap)})).catch(i);p.length;)p.splice(0,1)[0]()},(c=document.createElement("script")).type="text/javascript",c.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+t.AMap.version+"&key="+s+"&plugin="+t.AMap.plugins.join(","),c.onerror=function(e){r.AMap=o.failed,i(e)},A.appendChild(c)):i("请填写key")}else if(r.AMap==o.loaded)if(a.key&&a.key!==t.key)i("多个不一致的 key");else if(a.version&&a.version!==t.AMap.version)i("不允许多个版本 JSAPI 混用");else{if(s=[],a.plugins)for(A=0;A<a.plugins.length;A+=1)-1==t.AMap.plugins.indexOf(a.plugins[A])&&s.push(a.plugins[A]);s.length?window.AMap.plugin(s,(function(){e(a).then((function(){n(window.AMap)})).catch(i)})):e(a).then((function(){n(window.AMap)})).catch(i)}else if(a.key&&a.key!==t.key)i("多个不一致的 key");else if(a.version&&a.version!==t.AMap.version)i("不允许多个版本 JSAPI 混用");else{var d=[];if(a.plugins)for(A=0;A<a.plugins.length;A+=1)-1==t.AMap.plugins.indexOf(a.plugins[A])&&d.push(a.plugins[A]);l((function(){d.length?window.AMap.plugin(d,(function(){e(a).then((function(){n(window.AMap)})).catch(i)})):e(a).then((function(){n(window.AMap)})).catch(i)}))}}))},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,t={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},r={AMap:o.notload,AMapUI:o.notload,Loca:o.notload},s={AMap:[],AMapUI:[],Loca:[]}}}}()),C={id:"mapview",ref:"mapview"},P=m(I(c(p(s({},{name:"Amap"}),{__name:"Amap",setup(e){let a,n;const o=d(),i=u({loading:!g()});return f((()=>{if(!o)return;const{MapConfigure:e}=o.appContext.config.globalProperties.$config,{options:t}=e;b.load({key:e.amapKey,version:"2.0",plugins:["AMap.MarkerCluster"]}).then((e=>{n=new e.Map(o.refs.mapview,t),n.plugin(["AMap.ToolBar","AMap.MapType"],(()=>{n.addControl(new e.ToolBar),n.addControl(new e.MapType({defaultType:0}))})),a=new e.MarkerCluster(n,[],{gridSize:80,maxZoom:14,renderMarker(a){const{marker:o,data:i}=a;if(Array.isArray(i)&&i[0]){const{driver:a,plateNumber:t,orientation:r}=i[0],s=`<img style="transform: scale(1) rotate(${360-Number(r)}deg);" src='data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAUCAMAAADSpG8HAAAC91BMVEUAAAAAJQskNR8JNS8AAAAHwgAu2CIAZQIDGgccFA8aTDwVvRAtwyUNqQgcZhgsXSUQQQ0BJQcHMwIpJw4BAQCM63sRRDct5xwHswAMOzAv4SAIxAAr3xofuhZWzUwYRTMqnDEvtyRDvjgKMSwBjQCWkJRdxFNnm2A0cy8KLSgknR0hQTEydjNDYzFhjFpocEsXig9wimhcTi45hy0kTy1Vg0hQLx0EPABCSkAYSxwATQc0UjIFCwOU/4mt/6YP7wXI/8Gh/5eK/4CG/3tJfla5/7K3/7Ck/5tL/0Yq/h0ANxDi/9DG/77D/7vA/7jG/7Cz/6yb/5Gd/4WY/4GF/oFrl3Zy9WtTh2Fj319F2kklakMgbjgOSDAx/yoALBgc8RECIQ7N/8bL/7Sx/6m6/6Oq/6Gm/6Cb/5aX/410oYRuln+U/3tklXNZjGtY019Ou15y/1RV/0YlZUUs1j1E/jk8/ysiYisWZiMFUh8CsR0i6hkj/xUd2RMa+hAAPgwK+gDa/8nT/8bW/7/a/73O/7m9/7W//6qLrZyt/5qk/5GY/JB/rI2k/4eK8YeO/3aI/3N6/21w/2Jf/2Jt72Jj5GJNemJLhmBEgVtOxlhR1lZAgVE2aFEzdE0ye0w/5Uk+nkdGzUY1TUVG4EQ+u0ElXzsicTkhZjgsijYsrDI37i0kgiwhSCwAoxsTnBsY0hALgBAAEQgN4gcHowUS/wT/////8PeWt8HI47WlxK/K/6aUuqGm/52f7Zyx/5qt/5XCupS9/5C+pI+U9456m4uI9oSS/4CE/4B+9nqa/3hkjHBVgWxUxWGA/2BNtl5WvFtS4Vll/1hGpFhY2ldd/FRa71Ne+lI6eFJAXlFq/05Ks01U2ExS9EcxTUAldz481zssRDszyDcfWTc9+jAXyzAx2S4PYSwIUiscOSkitygVMSgLwyYCvCEfpiEDyCAAvR4i3xwe1xwQaxoj9xgQShcKaBYKQBYMWBQU7BAMbA8X8A0J1wsFdgsAAABw6AJ/AAAAPXRSTlMAZ1XZBPPiqUM7/v7d04B2aFdSSRb68uzp5+fn5N/e3drT0MzKxsW+vr27tLOysLCrqqmno6CQj4aEd3Ig/fi2ogAAAkNJREFUKM9ioACwmIMIFCEBYz1DU34ODkFLHUYIEORWUpPjkeU1EICp0T1xYGfnpOLKNWveva2sfP3qcfG8eZGXI0J6LhR6+qtCzBPef2by5IiI4yEhR3p7D3U5uqfYrir/5rUh4VZH2MqwLRpgRUbbN62etWR+c1ODNxA0NDa22JbHxdXVbfBysusKu10rBFKkWPD1evjDm82+vr4+Pg4ODokOHeeyor28vP68CT6WHlLKDlLEFrv6pMuyvCY3N9dWPz+gukT/xZk7plXUJfwo9PCYNJEXrKjqTqhLdESLXXJAAEidb2LSglntu7ozD5fVxsbbV0uDFMnULAx1WTrFPy011S4ZqMzVISlyblZOZnd7WY1nvH09K0gRQOLrwIraHN3d01LtgOr8/Bfdzc3NzclCUiS17j7Qukspgenpju670+zsXNsWRU+dPi38VHkVXBHb++c5LssW7LXNCHR0dAwMdHdLufd09pxr02d/9Pz0036zBEgRT2xCePiSxZ1OtrYZGba2Ts62+x48K4qKmhOzvsR+Y221CkiR1o2El1O5lh91dnZ2cnJydp4wsW9FTBFQVRx36aMS+83gcALMbNumz8tXrcgODgrqCQoKDs7O7ltbURETE/e7tOrJrz1hHCBFnAcLPAqvzJyRl3c6/+LZ/PwZM89HFr9Yu/7Lh+8bqydstYCkAv2k/gKPyPnyzJJcc8WYmZmVNbVNFDxWxpZc7RdVZ4KlFSZrPj5+YWAqs2ESgQqxW3EKMTFxArnEAgDLUd+tnLfEzAAAAABJRU5ErkJggg==' />`;o.setContent(s),o.setLabel({direction:"bottom",offset:new e.Pixel(-4,0),content:`<div> ${t}(${a})</div>`}),o.setOffset(new e.Pixel(-18,-10)),o.on("click",(({lnglat:e})=>{n.setZoom(13),n.setCenter(e)}))}}}),k().then((({data:e})=>{const n=e.map((e=>s({lnglat:[e.lng,e.lat]},e)));a&&a.setData(n)})).catch((e=>{})),n&&n.on("complete",(()=>{i.loading=!1}))})).catch((()=>{throw i.loading=!1,"地图加载失败，请重新加载"}))})),M((()=>{n&&n.destroy()&&n.clearEvents("click")})),(e,a)=>{const n=h("loading");return w((U(),v("div",C,null,512)),[[n,i.loading]])}}})),[["__scopeId","data-v-2ac3e490"]])),E=I(c(p(s({},{name:"MapPage"}),{__name:"map",setup:e=>(e,a)=>(U(),y(L(P)))})),[["__scopeId","data-v-3dc552d8"]]);export{E as default};
