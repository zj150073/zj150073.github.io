import{A as q}from"./index-DJIrZTkI.js";import{a as L,g as z,h as A}from"./tree-QIzAAdts.js";import{d as R,h as u,l as S,aa as V,H as P,J as j,r as l,t as B,o as D,w as r,b as o,u as d,e as N,A as E,g as M}from"./index-CRBBsR8x.js";const Q={class:"each-item"},I=R({name:"user",__name:"index",setup(U){let y=u({}),c=u([]),k=u([{label:"用户名称",prop:"username",type:"input",width:"550px"},{label:"状态",prop:"status",type:"select",placeholder:"请选择状态",width:"550px",options:[{value:0,label:"停用"},{value:1,label:"启用"}]}]),_=S({pagination:{pageSize:5,pageSizes:[5,100,150,200],paginationLayout:"total, sizes, prev, pager, next"},requestConfig:{pagingBackEnd:["page","size","list"],request:L,queryParam:y.value,checkRequestSuccess:a=>a.code===200,onPageLoadSuccess:()=>{}},tableOptions:{columns:[{label:"用户头像",prop:"avatar",width:"70"},{label:"用户名称",prop:"username",width:"150px"},{label:"用户昵称",prop:"nickname",width:""},{label:"性别",prop:"sex",width:""},{label:"部门",prop:"dept",width:""},{label:"手机号",prop:"phone",width:""},{label:"状态",prop:"status",width:""},{label:"创建时间",prop:"createTime",width:""}],rowkey:"id",height:"",size:"small",border:!0,stripe:!0,serialNumber:!0,highlightCurrentRow:!0,hidePagination:!0,hideSetting:!0,lazy:!1,treeProps:{children:"children",hasChildren:"hasChildren",checkStrictly:!1},showSummary:!1,sumText:"求和",tableLayout:"auto",headerDragend:(a,e,t,n)=>{},sortChange:a=>{},load:(a,e,t)=>{setTimeout(()=>{t([{date:"2016-05-11",name:"81",state:"California",city:"Los Angeles",address:"No. 189, Grove St, Los Angeles",zip:"CA 90036"}])},1e3)},summaryMethod:a=>{const{columns:e,data:t}=a,n=[];return e.forEach((g,i)=>{if(i===0){n[i]=V("div",{},["求和"]);return}const h=t.map(s=>Number(s[g.property]));n[i]="N/A",h.every(s=>Number.isNaN(s))?n[i]="N/A":n[i]=`${h.reduce((s,f)=>{const b=Number(f);return Number.isNaN(b)?s:s+f},0)}`}),n}}}),v=u([]),w=u(null),m=u(null);const C=a=>{_.requestConfig.queryParam.dept=a.id,m.value.reloadTable()};let T=()=>{m.value.reloadTable()};return P(()=>{z().then(a=>{v.value=A(a.data),_.requestConfig.queryParam.dept=a.data[0].id,j(()=>{var e,t;(e=w.value)==null||e.setCurrentKey(a.data[0].id),(t=m.value)==null||t.reloadTable()})})}),(a,e)=>{const t=l("el-tree"),n=l("el-button"),g=l("el-date-picker"),i=l("ajmerQuery"),h=l("el-header"),s=l("el-avatar"),f=l("ajmerTable"),b=l("el-main"),x=l("el-container");return D(),B(d(q),{class:"bg-bg_color"},{left:r(()=>[o(t,{ref_key:"treeRefs",ref:w,"node-key":"id",class:"elTreeplatform",data:d(v),"default-expand-all":"","expand-on-click-node":!1,props:{children:"children",label:"name"},onNodeClick:C},null,8,["data"])]),right:r(()=>[o(x,null,{default:r(()=>[o(h,null,{default:r(()=>[o(i,{config:d(k),search:d(y)},{outBtns:r(()=>[o(n,{class:"theme-two",onClick:e[0]||(e[0]=p=>d(T)())},{default:r(()=>e[2]||(e[2]=[M(" 搜索 ")])),_:1,__:[2]})]),queryItems:r(()=>[N("div",Q,[e[3]||(e[3]=N("label",null,"时间范围",-1)),o(g,{modelValue:d(c),"onUpdate:modelValue":e[1]||(e[1]=p=>E(c)?c.value=p:c=p),style:{width:"350px"},type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},null,8,["modelValue"])])]),_:1},8,["config","search"])]),_:1}),o(b,null,{default:r(()=>[o(f,{ref_key:"tableRefs",ref:m,config:d(_)},{avatar:r(p=>[o(s,{size:30,src:p.row.avatar},null,8,["src"])]),_:1},8,["config"])]),_:1})]),_:1})]),_:1})}}});export{I as default};
