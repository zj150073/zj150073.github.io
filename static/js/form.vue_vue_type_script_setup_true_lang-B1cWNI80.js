import{f as e}from"./mock-9x5hvpBX.js";import{d as a,a as l,r as t,e as s,f as r,b as i,w as o,i as d,g as u,u as f,h as m,aG as p,L as c}from"./index-07XH1eRd.js";const n={width:24,height:24,body:'<path fill="currentColor" d="M4 19h16v-7h2v8a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1v-8h2v7Zm9-10v7h-2V9H6l6-6l6 6h-5Z"/>'},h={class:"el-upload__text"},_=a({__name:"form",setup(a){const _=l(),v=l(),b=t({fileList:[],date:""});return(a,l)=>{const t=s("IconifyIconOffline"),y=s("el-upload"),w=s("el-form-item"),x=s("el-date-picker"),g=s("el-button"),L=s("el-form");return r(),i(L,{ref_key:"formRef",ref:_,model:b,"label-width":"82px"},{default:o((()=>[d(w,{label:"附件",prop:"fileList",rules:[{required:!0,message:"附件不能为空"}]},{default:o((()=>[d(y,{ref_key:"uploadRef",ref:v,"file-list":b.fileList,"onUpdate:fileList":l[0]||(l[0]=e=>b.fileList=e),drag:"",multiple:"",action:"#",class:"!w-[200px]","auto-upload":!1},{default:o((()=>[u("div",h,[d(t,{icon:f(n),width:"26",class:"m-auto mb-2"},null,8,["icon"]),m(" 可点击或拖拽上传 ")])])),_:1},8,["file-list"])])),_:1}),d(w,{label:"日期",prop:"date",rules:[{required:!0,message:"日期不能为空"}]},{default:o((()=>[d(x,{modelValue:b.date,"onUpdate:modelValue":l[1]||(l[1]=e=>b.date=e),type:"datetime",class:"!w-[200px]",placeholder:"请选择日期时间","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])])),_:1}),d(w,null,{default:o((()=>[d(g,{type:"primary",text:"",bg:"",onClick:l[2]||(l[2]=a=>{var l;(l=_.value)&&l.validate((a=>{if(!a)return!1;{const a=p({files:b.fileList.map((e=>({raw:e.raw}))),date:b.date});e(a).then((({success:e})=>{e?c("提交成功",{type:"success"}):c("提交失败")})).catch((e=>{c(`提交异常 ${e}`,{type:"error"})}))}}))})},{default:o((()=>[m(" 提交 ")])),_:1}),d(g,{text:"",bg:"",onClick:l[3]||(l[3]=e=>{var a;(a=_.value)&&a.resetFields()})},{default:o((()=>[m("重置")])),_:1})])),_:1})])),_:1},8,["model"])}}});export{_};
