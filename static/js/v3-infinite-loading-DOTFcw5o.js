var e=(e,t,n)=>new Promise(((o,l)=>{var r=e=>{try{a(n.next(e))}catch(t){l(t)}},i=e=>{try{a(n.throw(e))}catch(t){l(t)}},a=e=>e.done?o(e.value):Promise.resolve(e.value).then(r,i);a((n=n.apply(e,t)).next())}));import{d as t,r as n,y as o,w as l,J as r,e as i,o as a,c as s,i as u,v as c,a as d,C as p,s as v,p as m,l as f,n as g,aC as y,aD as h}from"./@vue-CFXrvzpc.js";function x(e){let t=`0px 0px ${e.distance}px 0px`;e.top&&(t=`${e.distance}px 0px 0px 0px`);const n=new IntersectionObserver((t=>{t[0].isIntersecting&&(e.firstload&&e.emit(),e.firstload=!0)}),{root:e.parentEl,rootMargin:t});return n.observe(e.infiniteLoading.value),n}const E=(e,t)=>{const n=e.__vccOpts||e;for(const[o,l]of t)n[o]=l;return n},_={},w={class:"container"},b=[(e=>(y("data-v-d3e37633"),e=e(),h(),e))((()=>d("div",{class:"spinner"},null,-1)))];const C=E(_,[["render",function(e,t){return a(),s("div",w,b)}],["__scopeId","data-v-d3e37633"]]),I={class:"state-error"},L=E(t({__name:"InfiniteLoading",props:{top:{type:Boolean,default:!1},target:{},distance:{default:0},identifier:{},firstload:{type:Boolean,default:!0},slots:{}},emits:["infinite"],setup(t,{emit:y}){const h=t;let E=null,_=0;const w=n(null),b=n(""),{top:L,firstload:$,distance:k}=h,{identifier:B,target:H}=o(h),O={infiniteLoading:w,top:L,firstload:$,distance:k,parentEl:null,emit(){_=(O.parentEl||document.documentElement).scrollHeight,M.loading(),y("infinite",M)}},M={loading(){b.value="loading"},loaded(){return e(this,null,(function*(){b.value="loaded";const e=O.parentEl||document.documentElement;yield g(),L&&(e.scrollTop=e.scrollHeight-_),function(e,t){const n=e.getBoundingClientRect();if(!t)return n.top>=0&&n.bottom<=window.innerHeight;const o=t.getBoundingClientRect();return n.top>=o.top&&n.bottom<=o.bottom}(w.value,O.parentEl)&&O.emit()}))},complete(){b.value="complete",null==E||E.disconnect()},error(){b.value="error"}};return l(B,(()=>{null==E||E.disconnect(),E=x(O)})),r((()=>e(this,null,(function*(){O.parentEl=yield function(t){return e(this,null,(function*(){return yield g(),t.value instanceof HTMLElement?t.value:t.value?document.querySelector(t.value):null}))}(H),E=x(O)})))),i((()=>{null==E||E.disconnect()})),(e,t)=>(a(),s("div",{ref_key:"infiniteLoading",ref:w,style:{"min-height":"1px"}},[u(d("div",null,[p(e.$slots,"spinner",{},(()=>[v(C)]),!0)],512),[[c,"loading"==b.value]]),"complete"==b.value?p(e.$slots,"complete",{key:0},(()=>{var t;return[d("span",null,m((null==(t=e.slots)?void 0:t.complete)||"No more results!"),1)]}),!0):f("",!0),"error"==b.value?p(e.$slots,"error",{key:1,retry:O.emit},(()=>{var n;return[d("span",I,[d("span",null,m((null==(n=e.slots)?void 0:n.error)||"Oops something went wrong!"),1),d("button",{class:"retry",onClick:t[0]||(t[0]=(...e)=>O.emit&&O.emit(...e))},"retry")])]}),!0):f("",!0)],512))}}),[["__scopeId","data-v-a7077831"]]);export{L as W};
