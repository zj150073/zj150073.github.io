import{d as e}from"./dayjs-BWHVJBZs.js";import{_ as t}from"./form.vue_vue_type_script_setup_true_lang-DHorCj1N.js";import{K as s,a as o,m as r}from"./index-B2iGRBN9.js";import{e as i}from"./system-B7ZtQss2.js";import{u as n}from"./hooks-1lxAD9ho.js";import{j as l,C as a,n as p}from"./@pureadmin-f9nW_l6N.js";import{S as m,r as u,J as j,s as c,a1 as d,x as f}from"./@vue-CFXrvzpc.js";import"./@amap-Bx2D3lnM.js";import"./index-CAaOogHN.js";import"./element-plus-DsFyl0Kk.js";import"./lodash-es-BgzC0s9P.js";import"./@element-plus-Bqpau_gV.js";import"./@popperjs-D3lHDW-0.js";import"./@ctrl-D2oWfImC.js";import"./async-validator-Cuo4gI4y.js";import"./memoize-one-Ds0C_khL.js";import"./normalize-wheel-es-Vn5vHDCm.js";import"./@floating-ui-kghe82LF.js";import"./vite-plugin-fake-server-CytHVkXj.js";import"./@faker-js-CRy60TLX.js";import"./version-rocket-chvOQqaV.js";import"./@iconify-icons-CxRB8ffa.js";import"./@vueuse-tP1Y4vdd.js";import"./defu-iUM7Auia.js";import"./framesync-CUhBu5sQ.js";import"./style-value-types-UCYNu-x1.js";import"./popmotion-DRTv1-mp.js";import"./hey-listen-DkH12NBk.js";import"./plus-pro-components-CYEVFP0q.js";import"./sortablejs-DhhifNSC.js";import"./axios-B1L2Kzed.js";import"./vue-i18n-DB-7wkrF.js";import"./@intlify-DfwD9yJy.js";import"./js-cookie-BXEMiIsG.js";import"./pinia-DzAV29mk.js";import"./vue-demi-Dq6ymT-8.js";import"./vue-router-CGx-uoKe.js";import"./axs-request-CnYniYE7.js";import"./nprogress-L6f6pfEY.js";import"./echarts-D2b6xzX-.js";import"./zrender-CUz1GrA9.js";import"./tslib-ZseNXxlj.js";import"./vxe-table-CPtn8uUL.js";import"./xe-utils-CdBoVBzI.js";import"./dom-zindex-Ckn4mXSH.js";import"./responsive-storage-5vfjqqcs.js";import"./vue-DWYrQbHy.js";import"./@iconify-BUzAfhQo.js";/* empty css                 */import"./vue-tippy-DPYCMIfw.js";function v(){const v=m({name:"",status:null}),h=u(),y=u([]),g=u(!0),{tagStyle:b}=n(),x=[{label:"部门名称",prop:"name",width:180,align:"left"},{label:"排序",prop:"sort",minWidth:70},{label:"状态",prop:"status",minWidth:100,cellRenderer:({row:e,props:t})=>c(d("el-tag"),{size:t.size,style:b.value(e.status)},{default:()=>[1===e.status?"启用":"停用"]})},{label:"创建时间",minWidth:200,prop:"createTime",formatter:({createTime:t})=>e(t).format("YYYY-MM-DD HH:mm:ss")},{label:"备注",prop:"remark",minWidth:320},{label:"操作",fixed:"right",width:210,slot:"operation"}];function k(){return e=this,t=null,o=function*(){g.value=!0;const{data:e}=yield i();let t=e;l(v.name)||(t=t.filter((e=>e.name.includes(v.name)))),l(v.status)||(t=t.filter((e=>e.status===v.status))),y.value=s(t),setTimeout((()=>{g.value=!1}),500)},new Promise(((s,r)=>{var i=e=>{try{l(o.next(e))}catch(t){r(t)}},n=e=>{try{l(o.throw(e))}catch(t){r(t)}},l=e=>e.done?s(e.value):Promise.resolve(e.value).then(i,n);l((o=o.apply(e,t)).next())}));var e,t,o}function w(e){if(!e||!e.length)return;const t=[];for(let s=0;s<e.length;s++)e[s].disabled=0===e[s].status,w(e[s].children),t.push(e[s]);return t}return j((()=>{k()})),{form:v,loading:g,columns:x,dataList:y,onSearch:k,resetForm:function(e){e&&(e.resetFields(),k())},openDialog:function(e="新增",s){var i,n,l,m,u,j,c,d;o({title:`${e}部门`,props:{formInline:{higherDeptOptions:w(a(y.value)),parentId:null!=(i=null==s?void 0:s.parentId)?i:0,name:null!=(n=null==s?void 0:s.name)?n:"",principal:null!=(l=null==s?void 0:s.principal)?l:"",phone:null!=(m=null==s?void 0:s.phone)?m:"",email:null!=(u=null==s?void 0:s.email)?u:"",sort:null!=(j=null==s?void 0:s.sort)?j:0,status:null!=(c=null==s?void 0:s.status)?c:1,remark:null!=(d=null==s?void 0:s.remark)?d:""}},width:"40%",draggable:!0,fullscreen:p(),fullscreenIcon:!0,closeOnClickModal:!1,contentRenderer:()=>f(t,{ref:h}),beforeSure:(t,{options:s})=>{const o=h.value.getRef(),i=s.props.formInline;function n(){r(`您${e}了部门名称为${i.name}的这条数据`,{type:"success"}),t(),k()}o.validate((e=>{e&&n()}))}})},handleDelete:function(e){r(`您删除了部门名称为${e.name}的这条数据`,{type:"success"}),k()},handleSelectionChange:function(e){}}}export{v as useDept};
