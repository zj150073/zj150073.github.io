import{_ as e}from"./form.vue_vue_type_script_setup_true_lang-CsflysTN.js";import{r as l,a as n,m as t,i,N as o,ac as a,F as r,e as u,aX as s,g8 as p,ah as c,ag as d,$ as f,L as v,aD as m}from"./index-Doj-dlYt.js";import{f as h}from"./system-DpP-6O0X.js";import{u as g}from"./hooks-BMYZZRnH.js";import"./index-BuAQzDtp.js";import"./index-CS1jj-5Z.js";import"./index-BcekxLcZ.js";function y(){const y=l({title:""}),w=n(),T=n([]),b=n(!0),x=(e,l=!1)=>{switch(e){case 0:return l?"菜单":"primary";case 1:return l?"iframe":"warning";case 2:return l?"外链":"danger";case 3:return l?"按钮":"info"}},k=[{label:"菜单名称",prop:"title",align:"left",cellRenderer:({row:e})=>i(r,null,[i("span",{class:"inline-block mr-1"},[o(g(e.icon),{style:{paddingTop:"1px"}})]),i("span",null,[a(e.title)])])},{label:"菜单类型",prop:"menuType",width:100,cellRenderer:({row:e,props:l})=>{let n;return i(u("el-tag"),{size:l.size,type:x(e.menuType),effect:"plain"},"function"==typeof(t=n=x(e.menuType,!0))||"[object Object]"===Object.prototype.toString.call(t)&&!m(t)?n:{default:()=>[n]});var t}},{label:"路由路径",prop:"path"},{label:"组件路径",prop:"component",formatter:({path:e,component:l})=>s(l)?e:l},{label:"权限标识",prop:"auths"},{label:"排序",prop:"rank",width:100},{label:"隐藏",prop:"showLink",formatter:({showLink:e})=>e?"否":"是",width:100},{label:"操作",fixed:"right",width:210,slot:"operation"}];function j(){return e=this,l=null,n=function*(){b.value=!0;const{data:e}=yield h();let l=e;s(y.title)||(l=l.filter((e=>a(e.title).includes(y.title)))),T.value=p(l),setTimeout((()=>{b.value=!1}),500)},new Promise(((t,i)=>{var o=e=>{try{r(n.next(e))}catch(l){i(l)}},a=e=>{try{r(n.throw(e))}catch(l){i(l)}},r=e=>e.done?t(e.value):Promise.resolve(e.value).then(o,a);r((n=n.apply(e,l)).next())}));var e,l,n}function I(e){if(!e||!e.length)return;const l=[];for(let n=0;n<e.length;n++)e[n].title=a(e[n].title),I(e[n].children),l.push(e[n]);return l}return t((()=>{j()})),{form:y,loading:b,columns:k,dataList:T,onSearch:j,resetForm:function(e){e&&(e.resetFields(),j())},openDialog:function(l="新增",n){var t,i,r,u,s,p,m,h,g,y,b,x,k,L,_,P,S,$,F,O,R;c({title:`${l}菜单`,props:{formInline:{menuType:null!=(t=null==n?void 0:n.menuType)?t:0,higherMenuOptions:I(d(T.value)),parentId:null!=(i=null==n?void 0:n.parentId)?i:0,title:null!=(r=null==n?void 0:n.title)?r:"",name:null!=(u=null==n?void 0:n.name)?u:"",path:null!=(s=null==n?void 0:n.path)?s:"",component:null!=(p=null==n?void 0:n.component)?p:"",rank:null!=(m=null==n?void 0:n.rank)?m:99,redirect:null!=(h=null==n?void 0:n.redirect)?h:"",icon:null!=(g=null==n?void 0:n.icon)?g:"",extraIcon:null!=(y=null==n?void 0:n.extraIcon)?y:"",enterTransition:null!=(b=null==n?void 0:n.enterTransition)?b:"",leaveTransition:null!=(x=null==n?void 0:n.leaveTransition)?x:"",activePath:null!=(k=null==n?void 0:n.activePath)?k:"",auths:null!=(L=null==n?void 0:n.auths)?L:"",frameSrc:null!=(_=null==n?void 0:n.frameSrc)?_:"",frameLoading:null==(P=null==n?void 0:n.frameLoading)||P,keepAlive:null!=(S=null==n?void 0:n.keepAlive)&&S,hiddenTag:null!=($=null==n?void 0:n.hiddenTag)&&$,fixedTag:null!=(F=null==n?void 0:n.fixedTag)&&F,showLink:null==(O=null==n?void 0:n.showLink)||O,showParent:null!=(R=null==n?void 0:n.showParent)&&R}},width:"45%",draggable:!0,fullscreen:f(),fullscreenIcon:!0,closeOnClickModal:!1,contentRenderer:()=>o(e,{ref:w}),beforeSure:(e,{options:n})=>{const t=w.value.getRef(),i=n.props.formInline;function o(){v(`您${l}了菜单名称为${a(i.title)}的这条数据`,{type:"success"}),e(),j()}t.validate((e=>{e&&o()}))}})},handleDelete:function(e){v(`您删除了菜单名称为${a(e.title)}的这条数据`,{type:"success"}),j()},handleSelectionChange:function(e){}}}export{y as useMenu};
