var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,s=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,u=(e,a)=>{for(var t in a||(a={}))r.call(a,t)&&s(e,t,a[t]);if(l)for(var t of l(a))n.call(a,t)&&s(e,t,a[t]);return e},o=(e,l)=>a(e,t(l));import{az as i,d as c,a as p,m as v,k as d,g,i as m,w as f,u as y,B as h,a2 as b,F as w,j as _,e as j,A as x,f as z,h as P,l as C,b as L,fh as O,L as S,y as k}from"./index-CKXHolY4.js";import A from"./ListCard-CJxMPYg8.js";import{_ as I}from"./ListDialogForm.vue_vue_type_script_setup_true_lang-CKjdec2t.js";import{u as D}from"./hooks-Bl1Eeoqm.js";import{A as M}from"./add-circle-line-CB2OoI90.js";import"./more-2-fill-iTOisMwj.js";const U={class:"w-full flex justify-between mb-4"},V=c(o(u({},{name:"CardList"}),{__name:"index",setup(e){const a=p({current:1,pageSize:12,total:0}),t=p([]),l=p(!0),r=()=>{return e=this,r=null,n=function*(){try{const{data:e}=yield(e=>i({method:"post",url:"/get-card-list",data:e},{token:"",apiPrefix:""}))();t.value=e.list,a.value=o(u({},a.value),{total:e.list.length})}catch(e){}finally{setTimeout((()=>{l.value=!1}),500)}},new Promise(((a,t)=>{var l=e=>{try{u(n.next(e))}catch(a){t(a)}},s=e=>{try{u(n.throw(e))}catch(a){t(a)}},u=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,s);u((n=n.apply(e,r)).next())}));var e,r,n};v((()=>{r()}));const n=p(!1),s=p(u({},{name:"",status:"",description:"",type:"",mark:""})),c=p(""),V=e=>{a.value.pageSize=e,a.value.current=1},F=e=>{a.value.current=e},$=e=>{O.confirm(e?`确认删除后${e.name}的所有产品信息将被清空, 且无法恢复`:"","提示",{type:"warning"}).then((()=>{S("删除成功",{type:"success"})})).catch((()=>{}))},B=e=>{n.value=!0,k((()=>{s.value=o(u({},e),{status:(null==e?void 0:e.isSetup)?"1":"0"})}))};return(e,r)=>{const u=j("el-button"),o=j("IconifyIconOffline"),i=j("el-icon"),p=j("el-input"),v=j("el-empty"),O=j("el-col"),S=j("el-row"),k=j("el-pagination"),E=x("loading");return z(),d("div",null,[g("div",U,[m(u,{icon:y(D)(y(M)),onClick:r[0]||(r[0]=e=>n.value=!0)},{default:f((()=>[P(" 新建产品 ")])),_:1},8,["icon"]),m(p,{modelValue:c.value,"onUpdate:modelValue":r[1]||(r[1]=e=>c.value=e),style:{width:"300px"},placeholder:"请输入产品名称",clearable:""},{suffix:f((()=>[m(i,{class:"el-input__icon"},{default:f((()=>[h(m(o,{icon:"ri:search-line"},null,512),[[b,0===c.value.length]])])),_:1})])),_:1},8,["modelValue"])]),h((z(),d("div",{"element-loading-svg":'\n        <path class="path" d="\n          M 30 15\n          L 28 17\n          M 25.61 25.61\n          A 15 15, 0, 0, 1, 15 30\n          A 15 15, 0, 1, 1, 27.99 7.5\n          L 15 15\n        " style="stroke-width: 4px; fill: rgba(0, 0, 0, 0)"/>\n      ',"element-loading-svg-view-box":"-10, -10, 50, 50"},[h(m(v,{description:`${c.value} 产品不存在`},null,8,["description"]),[[b,0===t.value.slice(a.value.pageSize*(a.value.current-1),a.value.pageSize*a.value.current).filter((e=>e.name.toLowerCase().includes(c.value.toLowerCase()))).length]]),a.value.total>0?(z(),d(w,{key:0},[m(S,{gutter:16},{default:f((()=>[(z(!0),d(w,null,C(t.value.slice(a.value.pageSize*(a.value.current-1),a.value.pageSize*a.value.current).filter((e=>e.name.toLowerCase().includes(c.value.toLowerCase()))),((e,a)=>(z(),L(O,{key:a,xs:24,sm:12,md:8,lg:6,xl:4},{default:f((()=>[m(A,{product:e,onDeleteItem:$,onManageProduct:B},null,8,["product"])])),_:2},1024)))),128))])),_:1}),m(k,{currentPage:a.value.current,"onUpdate:currentPage":r[2]||(r[2]=e=>a.value.current=e),class:"float-right","page-size":a.value.pageSize,total:a.value.total,"page-sizes":[12,24,36],background:!0,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:V,onCurrentChange:F},null,8,["currentPage","page-size","total"])],64)):_("",!0)])),[[E,l.value]]),m(I,{visible:n.value,"onUpdate:visible":r[3]||(r[3]=e=>n.value=e),data:s.value},null,8,["visible","data"])])}}}));export{V as default};
