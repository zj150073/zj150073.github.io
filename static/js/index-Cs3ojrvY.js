var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,r=(l,a,o)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[a]=o;import{useRole as s}from"./hook-BlV62DIw.js";import{R as i,P as c}from"./refresh-BbRzR_HQ.js";import{u as p}from"./hooks-Bl1Eeoqm.js";import{d as u,p as d,a as m,m as f,aM as h,y as g,aN as v,g9 as b,e as y,A as w,f as k,k as x,i as _,w as C,u as j,h as V,g as S,v as z,$ as P,B as O,t as R,aF as I,j as U,_ as D}from"./index-CKXHolY4.js";import{d as A}from"./delete-Ce0TSdK5.js";import{d as B}from"./edit-pen-Ci7W0xNM.js";import{d as F,a as M}from"./close-0WsAeDWU.js";import{A as T}from"./add-circle-line-CB2OoI90.js";import{d as $}from"./check-CIQVCvCT.js";import"./form.vue_vue_type_script_setup_true_lang-C9zHzk0Q.js";import"./hooks-C9ROXJX4.js";import"./system-xcgQGG_K.js";import"./sortable.esm-DhhifNSC.js";import"./epTheme-nvQhaCO7.js";import"./collapse-DxXVJh2e.js";const E={class:"main"},L={key:0,class:"!min-w-[calc(100vw-60vw-268px)] w-full mt-2 px-2 pb-2 bg-bg_color ml-2 overflow-auto"},N={class:"flex justify-between w-full px-3 pt-5 pb-4"},Q={class:"flex"},W={class:"font-bold truncate"},Y={class:"flex flex-wrap"},q=u((G=((e,l)=>{for(var a in l||(l={}))t.call(l,a)&&r(e,a,l[a]);if(o)for(var a of o(l))n.call(l,a)&&r(e,a,l[a]);return e})({},{name:"SystemRole"}),l(G,a({__name:"index",setup(e){const l=d((()=>["w-[22px]","h-[22px]","flex","justify-center","items-center","outline-none","rounded-[4px]","cursor-pointer","transition-colors","hover:bg-[#0000000f]","dark:hover:bg-[#ffffff1f]","dark:hover:text-[#ffffffd9]"])),a=m(),o=m(),t=m(),n=m(),r=m(),{form:u,isShow:D,curRow:q,loading:G,columns:H,rowStyle:J,dataList:K,treeData:X,treeProps:Z,isLinkage:ee,pagination:le,isExpandAll:ae,isSelectAll:oe,treeSearchValue:te,onSearch:ne,resetForm:re,openDialog:se,handleMenu:ie,handleSave:ce,handleDelete:pe,filterMethod:ue,transformI18n:de,onQueryChanged:me,handleSizeChange:fe,handleCurrentChange:he,handleSelectionChange:ge}=s(a);return f((()=>{h(n,(()=>{return e=this,l=null,a=function*(){yield g(),v(60).then((()=>{r.value=parseFloat(b(t.value.getTableDoms().tableWrapper.style.height,"px"))}))},new Promise(((o,t)=>{var n=e=>{try{s(a.next(e))}catch(l){t(l)}},r=e=>{try{s(a.throw(e))}catch(l){t(l)}},s=e=>e.done?o(e.value):Promise.resolve(e.value).then(n,r);s((a=a.apply(e,l)).next())}));var e,l,a}))})),(e,s)=>{var d;const m=y("el-input"),f=y("el-form-item"),h=y("el-option"),g=y("el-select"),v=y("el-button"),b=y("el-form"),ve=y("el-popconfirm"),be=y("pure-table"),ye=y("IconifyIconOffline"),we=y("el-checkbox"),ke=y("el-tree-v2"),xe=w("tippy");return k(),x("div",E,[_(b,{ref_key:"formRef",ref:o,inline:!0,model:j(u),class:"search-form bg-bg_color w-[99/100] pl-8 pt-[12px] overflow-auto"},{default:C((()=>[_(f,{label:"角色名称：",prop:"name"},{default:C((()=>[_(m,{modelValue:j(u).name,"onUpdate:modelValue":s[0]||(s[0]=e=>j(u).name=e),placeholder:"请输入角色名称",clearable:"",class:"!w-[180px]"},null,8,["modelValue"])])),_:1}),_(f,{label:"角色标识：",prop:"code"},{default:C((()=>[_(m,{modelValue:j(u).code,"onUpdate:modelValue":s[1]||(s[1]=e=>j(u).code=e),placeholder:"请输入角色标识",clearable:"",class:"!w-[180px]"},null,8,["modelValue"])])),_:1}),_(f,{label:"状态：",prop:"status"},{default:C((()=>[_(g,{modelValue:j(u).status,"onUpdate:modelValue":s[2]||(s[2]=e=>j(u).status=e),placeholder:"请选择状态",clearable:"",class:"!w-[180px]"},{default:C((()=>[_(h,{label:"已启用",value:"1"}),_(h,{label:"已停用",value:"0"})])),_:1},8,["modelValue"])])),_:1}),_(f,null,{default:C((()=>[_(v,{type:"primary",icon:j(p)("ri:search-line"),loading:j(G),onClick:j(ne)},{default:C((()=>[V(" 搜索 ")])),_:1},8,["icon","loading","onClick"]),_(v,{icon:j(p)(j(i)),onClick:s[3]||(s[3]=e=>j(re)(o.value))},{default:C((()=>[V(" 重置 ")])),_:1},8,["icon"])])),_:1})])),_:1},8,["model"]),S("div",{ref_key:"contentRef",ref:n,class:z(["flex",j(P)()?"flex-wrap":""])},[_(j(c),{class:z([j(D)&&!j(P)()?"!w-[60vw]":"w-full"]),style:{transition:"width 220ms cubic-bezier(0.4, 0, 0.2, 1)"},title:"角色管理（仅演示，操作后不生效）",columns:j(H),onRefresh:j(ne)},{buttons:C((()=>[_(v,{type:"primary",icon:j(p)(j(T)),onClick:s[4]||(s[4]=e=>j(se)())},{default:C((()=>[V(" 新增角色 ")])),_:1},8,["icon"])])),default:C((({size:e,dynamicColumns:l})=>[_(be,{ref_key:"tableRef",ref:t,"align-whole":"center",showOverflowTooltip:"","table-layout":"auto",loading:j(G),size:e,adaptive:"","row-style":j(J),adaptiveConfig:{offsetBottom:108},data:j(K),columns:l,pagination:j(le),paginationSmall:"small"===e,"header-cell-style":{background:"var(--el-fill-color-light)",color:"var(--el-text-color-primary)"},onSelectionChange:j(ge),onPageSizeChange:j(fe),onPageCurrentChange:j(he)},{operation:C((({row:l})=>[_(v,{class:"reset-margin",link:"",type:"primary",size:e,icon:j(p)(j(B)),onClick:e=>j(se)("修改",l)},{default:C((()=>[V(" 修改 ")])),_:2},1032,["size","icon","onClick"]),_(ve,{title:`是否确认删除角色名称为${l.name}的这条数据`,onConfirm:e=>j(pe)(l)},{reference:C((()=>[_(v,{class:"reset-margin",link:"",type:"primary",size:e,icon:j(p)(j(A))},{default:C((()=>[V(" 删除 ")])),_:2},1032,["size","icon"])])),_:2},1032,["title","onConfirm"]),_(v,{class:"reset-margin",link:"",type:"primary",size:e,icon:j(p)(j(F)),onClick:e=>j(ie)(l)},{default:C((()=>[V(" 权限 ")])),_:2},1032,["size","icon","onClick"])])),_:2},1032,["loading","size","row-style","data","columns","pagination","paginationSmall","onSelectionChange","onPageSizeChange","onPageCurrentChange"])])),_:1},8,["class","columns","onRefresh"]),j(D)?(k(),x("div",L,[S("div",N,[S("div",Q,[S("span",{class:z(l.value)},[O(_(ye,{class:"dark:text-white",width:"18px",height:"18px",icon:j(M),onClick:j(ie)},null,8,["icon","onClick"]),[[xe,{content:"关闭"}]])],2),S("span",{class:z([l.value,"ml-2"])},[O(_(ye,{class:"dark:text-white",width:"18px",height:"18px",icon:j($),onClick:j(ce)},null,8,["icon","onClick"]),[[xe,{content:"保存菜单权限"}]])],2)]),S("p",W," 菜单权限 "+R((null==(d=j(q))?void 0:d.name)?`（${j(q).name}）`:""),1)]),_(m,{modelValue:j(te),"onUpdate:modelValue":s[5]||(s[5]=e=>I(te)?te.value=e:null),placeholder:"请输入菜单进行搜索",class:"mb-1",clearable:"",onInput:j(me)},null,8,["modelValue","onInput"]),S("div",Y,[_(we,{modelValue:j(ae),"onUpdate:modelValue":s[6]||(s[6]=e=>I(ae)?ae.value=e:null),label:"展开/折叠"},null,8,["modelValue"]),_(we,{modelValue:j(oe),"onUpdate:modelValue":s[7]||(s[7]=e=>I(oe)?oe.value=e:null),label:"全选/全不选"},null,8,["modelValue"]),_(we,{modelValue:j(ee),"onUpdate:modelValue":s[8]||(s[8]=e=>I(ee)?ee.value=e:null),label:"父子联动"},null,8,["modelValue"])]),_(ke,{ref_key:"treeRef",ref:a,"show-checkbox":"",data:j(X),props:j(Z),height:r.value,"check-strictly":!j(ee),"filter-method":j(ue)},{default:C((({node:e})=>[S("span",null,R(j(de)(e.label)),1)])),_:1},8,["data","props","height","check-strictly","filter-method"])])):U("",!0)],2)])}}}))));var G;const H=D(q,[["__scopeId","data-v-d6daf155"]]);export{H as default};
