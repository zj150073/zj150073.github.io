var e=function(e,t){var n,u=t.arg;if(u){var o=t.value,i=Vue.isRef(u)?u.value:null===(n=t.instance)||void 0===n?void 0:n.$refs[u];i&&"function"==typeof i.addReference&&(e.$contextmenuKey=u,i.addReference(e,o))}},t=function(e,t){var n,u=e.$contextmenuKey;if(u){var o=Vue.isRef(u)?u.value:null===(n=t.instance)||void 0===n?void 0:n.$refs[u];o&&"function"==typeof o.removeReference&&o.removeReference(e)}},n={mounted:e,updated:function(n,u){t(n,u),e(n,u)},beforeUnmount:t},u="v-contextmenu",o="v-contextmenu-icon",i="v-contextmenu-inner",l="v-contextmenu-divider",r="v-contextmenu-item",a="v-contextmenu-item--hover",s="v-contextmenu-item--disabled",c="v-contextmenu-group",d="v-contextmenu-group__title",v="v-contextmenu-group__menus",f="v-contextmenu-submenu",m="v-contextmenu-submenu__title",p="v-contextmenu-submenu__menus",h="v-contextmenu-submenu__menus--top",V="v-contextmenu-submenu__menus--right",x="v-contextmenu-submenu__menus--bottom",g="v-contextmenu-submenu__menus--left",b="v-contextmenu-submenu__arrow";var y=["contextmenu"],C=Vue.defineComponent({name:"VContextmenu",props:{modelValue:{type:Boolean,default:!1},autoAdjustPlacement:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},teleport:{type:[String,Object],default:function(){return"body"}},preventContextmenu:{type:Boolean,default:!0}},emits:["show","hide","update:modelValue","contextmenu"],setup:function(e,t){var n=t.emit,u=Vue.ref(null),o=Vue.ref(e.modelValue||!1),i=function(e){o.value=e,n("update:modelValue",e)},l=Vue.ref({top:0,left:0}),r=Vue.computed((function(){return{top:"".concat(l.value.top,"px"),left:"".concat(l.value.left,"px")}})),a=Vue.ref(null),s=function(t,o){var r,a,s=t instanceof Event?o:t,c=(null==s?void 0:s.autoAdjustPlacement)||e.autoAdjustPlacement,d={top:(null==s?void 0:s.top)||0,left:(null==s?void 0:s.left)||0};t instanceof Event&&(t.preventDefault(),d.top=null!==(r=null==s?void 0:s.top)&&void 0!==r?r:t.pageY,d.left=null!==(a=null==s?void 0:s.left)&&void 0!==a?a:t.pageX);i(!0),Vue.nextTick((function(){if(c){var e=u.value;if(!e)return;var t=e.clientWidth,o=e.clientHeight;if(o+d.top>=window.innerHeight+window.scrollY){var i=d.top-o;i>window.scrollY&&(d.top=i)}if(t+d.left>=window.innerWidth+window.scrollX){var r=d.left-t;r>window.scrollX&&(d.left=r)}}l.value=d,n("show")}))},c=function(){a.value=null,i(!1),n("hide")},d=Vue.reactive(new Map),v=Vue.ref(),f=Vue.computed((function(){return v.value&&d.get(v.value)})),m=function(e){e.target&&u.value&&v.value&&(u.value.contains(e.target)||f.value&&f.value.triggers.includes("click")&&v.value.contains(e.target)||i(!1))};return Vue.watch(o,(function(e){e?document.addEventListener("click",m):document.removeEventListener("click",m)})),Vue.onBeforeUnmount((function(){document.removeEventListener("click",m)})),Vue.provide("visible",o),Vue.provide("autoAdjustPlacement",e.autoAdjustPlacement),Vue.provide("show",s),Vue.provide("hide",c),{visible:o,style:r,currentReferenceOptions:f,currentOptions:a,contextmenuRef:u,addReference:function(t,n){var u=null!=n&&n.trigger?Array.isArray(n.trigger)?n.trigger:[n.trigger]:y,o=function(n){e.disabled||(v.value=t,s(n,{}))};u.forEach((function(e){t.addEventListener(e,o)})),d.set(t,{triggers:u,handler:o})},removeReference:function(e){var t=d.get(e);t&&(t.triggers.forEach((function(n){e.removeEventListener(n,t.handler)})),d.delete(e))},toggle:i,show:s,hide:c}},methods:{renderContent:function(){var e,t,n=this;return Vue.withDirectives(Vue.createVNode("div",{class:u,ref:"contextmenuRef",style:this.style,onContextmenu:function(e){n.$props.preventContextmenu&&e.preventDefault(),n.$emit("contextmenu",e)}},[Vue.createVNode("ul",{class:i},[null===(e=(t=this.$slots).default)||void 0===e?void 0:e.call(t,{triggerOptions:"currentReferenceOptions",options:"currentOptions"})])]),[[Vue.vShow,"visible"]])}},render:function(){var e,t;return this.visible?this.teleport?Vue.createVNode(Vue.Teleport,{to:this.teleport},"function"==typeof(t=e=this.renderContent())||"[object Object]"===Object.prototype.toString.call(t)&&!Vue.isVNode(t)?e:{default:function(){return[e]}}):this.renderContent():null}});function w(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var u=n.call(e,t||"default");if("object"!=typeof u)return u;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function N(e,t,n){return(t=w(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=Vue.defineComponent({name:"VContextmenuItem",props:{disabled:{type:Boolean,default:!1},hideOnClick:{type:Boolean,default:!0},contextmenuAsClick:{type:Boolean,default:!0}},emits:["click","contextmenu","mouseenter","mouseleave"],setup:function(e,t){var n=t.emit,u=Vue.inject("hide"),o=Vue.ref(!1);return{classes:Vue.computed((function(){return N(N(N({},r,!0),s,e.disabled),a,o.value)})),handleClick:function(t){n("click",t),e.disabled||e.hideOnClick&&(null==u||u())},handleContextmenu:function(t){if(n("contextmenu",t),e.contextmenuAsClick){if(e.disabled)return;e.hideOnClick&&(null==u||u())}},handleMouseenter:function(t){n("mouseenter",t),e.disabled||(o.value=!0)},handleMouseleave:function(t){n("mouseleave",t),e.disabled||(o.value=!1)}}},render:function(){var e,t;return Vue.createVNode("li",{class:this.classes,onClick:this.handleClick,onContextmenu:this.handleContextmenu,onMouseenter:this.handleMouseenter,onMouseleave:this.handleMouseleave},[null===(e=(t=this.$slots).default)||void 0===e?void 0:e.call(t)])}}),k=Vue.defineComponent({name:"VContextmenuDivider",render:function(){return Vue.createVNode("li",{class:l},null)}}),j=Vue.defineComponent({name:"VContextmenuIcon",props:{name:{type:String,required:!0}},render:function(){return Vue.createVNode("i",{class:[o,"".concat(o,"-").concat(this.name)]},null)}}),R=Vue.defineComponent({name:"VContextmenuSubmenu",props:{title:{type:String,required:!0},disabled:{type:Boolean,default:!1}},emits:["mouseenter","mouseleave"],setup:function(e,t){var n=t.emit,o=Vue.ref(null),i=Vue.inject("autoAdjustPlacement"),l=Vue.ref(["top","right"]),c=Vue.ref(!1),d=Vue.computed((function(){return N(N(N(N({},r,!0),m,!0),a,c.value),s,e.disabled)})),v=Vue.computed((function(){return N(N(N(N(N(N({},u,!0),p,!0),h,l.value.includes("top")),V,l.value.includes("right")),x,l.value.includes("bottom")),g,l.value.includes("left"))}));return{hover:c,submenuRef:o,titleClasses:d,menusClasses:v,handleMouseenter:function(t){e.disabled||(c.value=!0,n("mouseenter",t),Vue.nextTick((function(){var e=[];if(i){var n=t.target.getBoundingClientRect();if(!o.value)return;var u=o.value.clientWidth,r=o.value.clientHeight;n.right+u>=window.innerWidth?e.push("left"):e.push("right"),n.bottom+r>=window.innerHeight?e.push("bottom"):e.push("top")}l.value=e})))},handleMouseleave:function(t){e.disabled||(c.value=!1,n("mouseleave",t))}}},render:function(){var e,t,n,u;return Vue.createVNode("li",{class:f,onMouseenter:this.handleMouseenter,onMouseleave:this.handleMouseleave},[Vue.createVNode("div",{class:this.titleClasses},[(null===(e=(t=this.$slots).title)||void 0===e?void 0:e.call(t))||this.title,Vue.createVNode("span",{class:b},[Vue.createVNode(j,{name:"right-arrow"},null)])]),this.hover?Vue.createVNode("div",{ref:"submenuRef",class:this.menusClasses},[Vue.createVNode("ul",{class:i},[null===(n=(u=this.$slots).default)||void 0===n?void 0:n.call(u)])]):null])}}),M=Vue.defineComponent({name:"VContextmenuGroup",props:{title:{type:String,default:void 0},maxWidth:{type:[Number,String],default:void 0}},setup:function(e){return{style:Vue.computed((function(){if(e.maxWidth)return{"max-width":"number"==typeof e.maxWidth?"".concat(e.maxWidth,"px"):e.maxWidth,"overflow-x":"auto"}}))}},methods:{renderTitle:function(){var e,t,n=(null===(e=(t=this.$slots).title)||void 0===e?void 0:e.call(t))||this.title;return n?Vue.createVNode("div",{class:d},[n]):null}},render:function(){var e,t;return Vue.createVNode("li",{class:c},[this.renderTitle(),Vue.createVNode("ul",{style:this.style,class:v},[null===(e=(t=this.$slots).default)||void 0===e?void 0:e.call(t)])])}});export{C,_ as a,k as b,R as c,M as d,n as e};
