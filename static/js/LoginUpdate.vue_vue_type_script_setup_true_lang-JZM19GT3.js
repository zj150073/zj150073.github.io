import{M as e}from"./motion-BQObdsvG.js";import{t as u,m as r,av as o,ab as l}from"./index-DK9WUj9J.js";import{u as a,a as t}from"./verifyCode-Dtic1vHP.js";import{u as n}from"./hooks-D3PhPGWW.js";import{L as V}from"./lock-fill-mrzA9gW4.js";import{I as d}from"./iphone-CXdAVSG6.js";const i={class:"w-full flex justify-between"},s=Vue.defineComponent({__name:"LoginUpdate",setup(s){const{t:f}=VueI18n.useI18n(),p=Vue.ref(!1),c=Vue.reactive({phone:"",verifyCode:"",password:"",repeatPassword:""}),m=Vue.ref(),{isDisabled:h,text:w}=a(),x=[{validator:(e,r,o)=>{""===r?o(new Error(u(l("login.purePassWordSureReg")))):c.password!==r?o(new Error(u(l("login.purePassWordDifferentReg")))):o()},trigger:"blur"}],C=e=>{return o=this,a=null,t=function*(){p.value=!0,e&&(yield e.validate((e=>{e?setTimeout((()=>{r(u(l("login.purePassWordUpdateReg")),{type:"success"}),p.value=!1}),2e3):p.value=!1})))},new Promise(((e,u)=>{var r=e=>{try{n(t.next(e))}catch(r){u(r)}},l=e=>{try{n(t.throw(e))}catch(r){u(r)}},n=u=>u.done?e(u.value):Promise.resolve(u.value).then(r,l);n((t=t.apply(o,a)).next())}));var o,a,t};function v(){a().end(),o().SET_CURRENTPAGE(0)}return(u,r)=>{const o=Vue.resolveComponent("el-input"),l=Vue.resolveComponent("el-form-item"),s=Vue.resolveComponent("el-button"),y=Vue.resolveComponent("el-form");return Vue.openBlock(),Vue.createBlock(y,{ref_key:"ruleFormRef",ref:m,model:c,rules:Vue.unref(t),size:"large"},{default:Vue.withCtx((()=>[Vue.createVNode(Vue.unref(e),null,{default:Vue.withCtx((()=>[Vue.createVNode(l,{prop:"phone"},{default:Vue.withCtx((()=>[Vue.createVNode(o,{modelValue:c.phone,"onUpdate:modelValue":r[0]||(r[0]=e=>c.phone=e),clearable:"",placeholder:Vue.unref(f)("login.purePhone"),"prefix-icon":Vue.unref(n)(Vue.unref(d))},null,8,["modelValue","placeholder","prefix-icon"])])),_:1})])),_:1}),Vue.createVNode(Vue.unref(e),{delay:100},{default:Vue.withCtx((()=>[Vue.createVNode(l,{prop:"verifyCode"},{default:Vue.withCtx((()=>[Vue.createElementVNode("div",i,[Vue.createVNode(o,{modelValue:c.verifyCode,"onUpdate:modelValue":r[1]||(r[1]=e=>c.verifyCode=e),clearable:"",placeholder:Vue.unref(f)("login.pureSmsVerifyCode"),"prefix-icon":Vue.unref(n)("ri:shield-keyhole-line")},null,8,["modelValue","placeholder","prefix-icon"]),Vue.createVNode(s,{disabled:Vue.unref(h),class:"ml-2",onClick:r[2]||(r[2]=e=>Vue.unref(a)().start(m.value,"phone"))},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(w).length>0?Vue.unref(w)+Vue.unref(f)("login.pureInfo"):Vue.unref(f)("login.pureGetVerifyCode")),1)])),_:1},8,["disabled"])])])),_:1})])),_:1}),Vue.createVNode(Vue.unref(e),{delay:150},{default:Vue.withCtx((()=>[Vue.createVNode(l,{prop:"password"},{default:Vue.withCtx((()=>[Vue.createVNode(o,{modelValue:c.password,"onUpdate:modelValue":r[3]||(r[3]=e=>c.password=e),clearable:"","show-password":"",placeholder:Vue.unref(f)("login.purePassword"),"prefix-icon":Vue.unref(n)(Vue.unref(V))},null,8,["modelValue","placeholder","prefix-icon"])])),_:1})])),_:1}),Vue.createVNode(Vue.unref(e),{delay:200},{default:Vue.withCtx((()=>[Vue.createVNode(l,{rules:x,prop:"repeatPassword"},{default:Vue.withCtx((()=>[Vue.createVNode(o,{modelValue:c.repeatPassword,"onUpdate:modelValue":r[4]||(r[4]=e=>c.repeatPassword=e),clearable:"","show-password":"",placeholder:Vue.unref(f)("login.pureSure"),"prefix-icon":Vue.unref(n)(Vue.unref(V))},null,8,["modelValue","placeholder","prefix-icon"])])),_:1})])),_:1}),Vue.createVNode(Vue.unref(e),{delay:250},{default:Vue.withCtx((()=>[Vue.createVNode(l,null,{default:Vue.withCtx((()=>[Vue.createVNode(s,{class:"w-full",size:"default",type:"primary",loading:p.value,onClick:r[5]||(r[5]=e=>C(m.value))},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(f)("login.pureDefinite")),1)])),_:1},8,["loading"])])),_:1})])),_:1}),Vue.createVNode(Vue.unref(e),{delay:300},{default:Vue.withCtx((()=>[Vue.createVNode(l,null,{default:Vue.withCtx((()=>[Vue.createVNode(s,{class:"w-full",size:"default",onClick:v},{default:Vue.withCtx((()=>[Vue.createTextVNode(Vue.toDisplayString(Vue.unref(f)("login.pureBack")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules"])}}});export{s as _};
