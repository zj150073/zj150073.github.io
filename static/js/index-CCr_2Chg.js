var e=Object.defineProperty,t=Object.defineProperties,l=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,r=(t,l,a)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[l]=a,n=(e,t)=>{for(var l in t||(t={}))o.call(t,l)&&r(e,l,t[l]);if(a)for(var l of a(t))u.call(t,l)&&r(e,l,t[l]);return e},i=(e,a)=>t(e,l(a));import{F as c,m as s}from"./index-DK9WUj9J.js";import p from"./ListCard-BLWbvcIT.js";import{_ as v}from"./ListDialogForm.vue_vue_type_script_setup_true_lang-psjSJjSB.js";import{u as V}from"./hooks-D3PhPGWW.js";import{A as d}from"./add-circle-line-CB2OoI90.js";import"./more-2-fill-C2na9nRd.js";const m={class:"w-full flex justify-between mb-4"},f=Vue.defineComponent(i(n({},{name:"CardList"}),{__name:"index",setup(e){const t=Vue.ref({current:1,pageSize:12,total:0}),l=Vue.ref([]),a=Vue.ref(!0),o=()=>{return e=this,o=null,u=function*(){try{const{data:e}=yield(e=>c({method:"post",url:"/get-card-list",data:e},{token:"",apiPrefix:""}))();l.value=e.list,t.value=i(n({},t.value),{total:e.list.length})}catch(e){}finally{setTimeout((()=>{a.value=!1}),500)}},new Promise(((t,l)=>{var a=e=>{try{n(u.next(e))}catch(t){l(t)}},r=e=>{try{n(u.throw(e))}catch(t){l(t)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(a,r);n((u=u.apply(e,o)).next())}));var e,o,u};Vue.onMounted((()=>{o()}));const u=Vue.ref(!1),r=Vue.ref(n({},{name:"",status:"",description:"",type:"",mark:""})),f=Vue.ref(""),g=e=>{t.value.pageSize=e,t.value.current=1},h=e=>{t.value.current=e},w=e=>{ElementPlus.ElMessageBox.confirm(e?`确认删除后${e.name}的所有产品信息将被清空, 且无法恢复`:"","提示",{type:"warning"}).then((()=>{s("删除成功",{type:"success"})})).catch((()=>{}))},y=e=>{u.value=!0,Vue.nextTick((()=>{r.value=i(n({},e),{status:(null==e?void 0:e.isSetup)?"1":"0"})}))};return(e,o)=>{const n=Vue.resolveComponent("el-button"),i=Vue.resolveComponent("IconifyIconOffline"),c=Vue.resolveComponent("el-icon"),s=Vue.resolveComponent("el-input"),C=Vue.resolveComponent("el-empty"),x=Vue.resolveComponent("el-col"),b=Vue.resolveComponent("el-row"),k=Vue.resolveComponent("el-pagination"),_=Vue.resolveDirective("loading");return Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.createElementVNode("div",m,[Vue.createVNode(n,{icon:Vue.unref(V)(Vue.unref(d)),onClick:o[0]||(o[0]=e=>u.value=!0)},{default:Vue.withCtx((()=>[Vue.createTextVNode(" 新建产品 ")])),_:1},8,["icon"]),Vue.createVNode(s,{modelValue:f.value,"onUpdate:modelValue":o[1]||(o[1]=e=>f.value=e),style:{width:"300px"},placeholder:"请输入产品名称",clearable:""},{suffix:Vue.withCtx((()=>[Vue.createVNode(c,{class:"el-input__icon"},{default:Vue.withCtx((()=>[Vue.withDirectives(Vue.createVNode(i,{icon:"ri:search-line"},null,512),[[Vue.vShow,0===f.value.length]])])),_:1})])),_:1},8,["modelValue"])]),Vue.withDirectives((Vue.openBlock(),Vue.createElementBlock("div",{"element-loading-svg":'\n        <path class="path" d="\n          M 30 15\n          L 28 17\n          M 25.61 25.61\n          A 15 15, 0, 0, 1, 15 30\n          A 15 15, 0, 1, 1, 27.99 7.5\n          L 15 15\n        " style="stroke-width: 4px; fill: rgba(0, 0, 0, 0)"/>\n      ',"element-loading-svg-view-box":"-10, -10, 50, 50"},[Vue.withDirectives(Vue.createVNode(C,{description:`${f.value} 产品不存在`},null,8,["description"]),[[Vue.vShow,0===l.value.slice(t.value.pageSize*(t.value.current-1),t.value.pageSize*t.value.current).filter((e=>e.name.toLowerCase().includes(f.value.toLowerCase()))).length]]),t.value.total>0?(Vue.openBlock(),Vue.createElementBlock(Vue.Fragment,{key:0},[Vue.createVNode(b,{gutter:16},{default:Vue.withCtx((()=>[(Vue.openBlock(!0),Vue.createElementBlock(Vue.Fragment,null,Vue.renderList(l.value.slice(t.value.pageSize*(t.value.current-1),t.value.pageSize*t.value.current).filter((e=>e.name.toLowerCase().includes(f.value.toLowerCase()))),((e,t)=>(Vue.openBlock(),Vue.createBlock(x,{key:t,xs:24,sm:12,md:8,lg:6,xl:4},{default:Vue.withCtx((()=>[Vue.createVNode(p,{product:e,onDeleteItem:w,onManageProduct:y},null,8,["product"])])),_:2},1024)))),128))])),_:1}),Vue.createVNode(k,{currentPage:t.value.current,"onUpdate:currentPage":o[2]||(o[2]=e=>t.value.current=e),class:"float-right","page-size":t.value.pageSize,total:t.value.total,"page-sizes":[12,24,36],background:!0,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:g,onCurrentChange:h},null,8,["currentPage","page-size","total"])],64)):Vue.createCommentVNode("",!0)])),[[_,a.value]]),Vue.createVNode(v,{visible:u.value,"onUpdate:visible":o[3]||(o[3]=e=>u.value=e),data:r.value},null,8,["visible","data"])])}}}));export{f as default};
