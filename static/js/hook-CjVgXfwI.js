import{m as e}from"./index-DK9WUj9J.js";import{d as t}from"./system-CZHEA98f.js";function n(){const n=Vue.reactive({username:""}),a=Vue.ref([]),r=Vue.ref(!0),i=Vue.reactive({total:0,pageSize:10,currentPage:1,background:!0}),o=[{label:"序号",prop:"id",minWidth:60},{label:"用户名",prop:"username",minWidth:100},{label:"登录 IP",prop:"ip",minWidth:140},{label:"登录地点",prop:"address",minWidth:140},{label:"操作系统",prop:"system",minWidth:100},{label:"浏览器类型",prop:"browser",minWidth:100},{label:"登录时间",prop:"loginTime",minWidth:180,formatter:({loginTime:e})=>dayjs(e).format("YYYY-MM-DD HH:mm:ss")},{label:"操作",fixed:"right",slot:"operation"}];function l(){return e=this,o=null,l=function*(){r.value=!0;const{data:e}=yield t(Vue.toRaw(n));a.value=e.list,i.total=e.total,i.pageSize=e.pageSize,i.currentPage=e.currentPage,setTimeout((()=>{r.value=!1}),500)},new Promise(((t,n)=>{var a=e=>{try{i(l.next(e))}catch(t){n(t)}},r=e=>{try{i(l.throw(e))}catch(t){n(t)}},i=e=>e.done?t(e.value):Promise.resolve(e.value).then(a,r);i((l=l.apply(e,o)).next())}));var e,o,l}return Vue.onMounted((()=>{l()})),{form:n,loading:r,columns:o,dataList:a,pagination:i,onSearch:l,resetForm:e=>{e&&(e.resetFields(),l())},handleOffline:function(t){e(`${t.username}已被强制下线`,{type:"success"}),l()},handleSizeChange:function(e){},handleCurrentChange:function(e){},handleSelectionChange:function(e){}}}export{n as useRole};
